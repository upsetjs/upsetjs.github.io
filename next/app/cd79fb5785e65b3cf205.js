(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{114:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Pn}));var a=n(37),r=n(0),s=n.n(r),i=n(154),o=n(5);class l{constructor(){this.sidePanelExpanded=new Set((localStorage.getItem("sidePanel")||"queries,options,sets,elems").split(",")),this.menu=!1,this.zen="T"===localStorage.getItem("zen"),this.defaultTheme=null,this.setTable={order:"desc",orderBy:"cardinality"},this.elemTable={order:"asc",orderBy:"name"},this.speedDial=!1,this.ref=Object(r.createRef)(),this.toast=null,Object(o.c)(()=>{localStorage.setItem("zen",this.zen?"T":"F")}),Object(o.c)(()=>{localStorage.setItem("sidePanel",Array.from(this.sidePanelExpanded).join(","))})}get theme(){var e;return null!==(e=this.defaultTheme)&&void 0!==e?e:"light"}setSpeedDial(e){this.speedDial=e}toggleSidePanelExpansion(e){this.sidePanelExpanded.has(e)?this.sidePanelExpanded.delete(e):this.sidePanelExpanded.add(e)}changeSetTableOptions(e){Object.assign(this.setTable,e)}changeElemTableOptions(e){Object.assign(this.elemTable,e)}closeToast(){this.toast=null}showToast(e){this.toast=e}toggleMenu(){this.menu=!this.menu}toggleTheme(){this.defaultTheme="dark"===this.defaultTheme?"light":"dark"}toggleZen(){this.zen=!this.zen}}Object(i.b)([o.g],l.prototype,"sidePanelExpanded",void 0),Object(i.b)([o.g],l.prototype,"menu",void 0),Object(i.b)([o.g],l.prototype,"zen",void 0),Object(i.b)([o.g],l.prototype,"defaultTheme",void 0),Object(i.b)([o.g],l.prototype,"setTable",void 0),Object(i.b)([o.g],l.prototype,"elemTable",void 0),Object(i.b)([o.g],l.prototype,"speedDial",void 0),Object(i.b)([o.g],l.prototype,"ref",void 0),Object(i.b)([o.g],l.prototype,"toast",void 0),Object(i.b)([o.d],l.prototype,"theme",null),Object(i.b)([o.b],l.prototype,"setSpeedDial",null),Object(i.b)([o.b],l.prototype,"toggleSidePanelExpansion",null),Object(i.b)([o.b],l.prototype,"changeSetTableOptions",null),Object(i.b)([o.b],l.prototype,"changeElemTableOptions",null),Object(i.b)([o.b.bound],l.prototype,"closeToast",null),Object(i.b)([o.b],l.prototype,"showToast",null),Object(i.b)([o.b.bound],l.prototype,"toggleMenu",null),Object(i.b)([o.b.bound],l.prototype,"toggleTheme",null),Object(i.b)([o.b.bound],l.prototype,"toggleZen",null);var c=n(38);const u=n(209).map(e=>({name:e.name,sets:e.sets,attrs:{words:e.words,episodes:e.episodes}})),d=Object(c.f)(u);var m={id:"got",name:"Game of Thrones Characters",description:"Game of Thrones characters data from https://github.com/ jeffreylancaster/game-of-thrones",author:"Samuel Gratzl",attrs:["words","episodes"],setCount:d.length,load:()=>Promise.resolve({sets:d,elems:u})};const p=n(210).map(e=>({name:e.name,sets:e.sets,attrs:{}})),f=Object(c.f)(p);var h={id:"got_small",name:"Game of Thrones Characters (small)",description:"Game of Thrones characters data from https://github.com/ jeffreylancaster/game-of-thrones",author:"Samuel Gratzl",attrs:[],setCount:f.length,load:()=>Promise.resolve({sets:f,elems:p})},y=n(178);function b(e){const t=new URL(e);return fetch("https://cors-anywhere.herokuapp.com/"+e,{headers:{Origin:`${t.protocol}://${t.hostname}`}})}const g="https://vcg.github.io/upset/",v="https://vdl.sci.utah.edu/upset2";function w(e){var t,n,a;return{id:(a=e.name,a.replace(/[(); \-{}~%$^&@#]+/g," ").trim().split(" ").map(e=>e.slice(0,2)).join("")),name:e.name,description:null!==(t=e.description)&&void 0!==t?t:"",author:null!==(n=e.author)&&void 0!==n?n:"",attrs:e.meta.filter(e=>"float"===e.type||"integer"===e.type).map(e=>e.name),setCount:e.sets.length>0?e.sets[0].end-e.sets[0].start+1:void 0,load:()=>Object(i.a)(this,void 0,void 0,(function*(){const t=yield function(e){var t,n;return Object(i.a)(this,void 0,void 0,(function*(){const a=yield b(e.file).then(e=>e.text()),r=Object(y.parse)(a,{delimiter:e.separator,skipEmptyLines:!0}),s={start:e.sets[0].start,end:e.sets[0].end+1},i=null!==(n=null===(t=e.meta.find(e=>"id"===e.type))||void 0===t?void 0:t.index)&&void 0!==n?n:0,o=r.data,l=o[e.skip+e.header],c=o.slice(e.skip+e.header+1),u=l.slice(s.start,s.end);return c.map(t=>{const n=t.slice(s.start,s.end).map((e,t)=>[e,u[t]]).filter(([e,t])=>"1"===e).map(([e,t])=>t),a={};return e.meta.filter(e=>"float"===e.type||"integer"===e.type).forEach(e=>{a[e.name]=Number.parseFloat(t[e.index])}),{name:t[i],sets:n,attrs:a}})}))}(e);return{elems:t,sets:Object(c.f)(t)}}))}}function S(){return function(e=g+"/datasets.json",t=g){return Object(i.a)(this,void 0,void 0,(function*(){return(yield b(e).then(e=>e.json())).map(e=>b(`${t}/${e}`).then(e=>e.json()).then(e=>(e.file=e.file.startsWith("https")?e.file:`${t}/${e.file}`,w(e))))}))}(v+"/data/datasets.json",v)}var E=n(18);function x(e){const t=new Map(e.map((e,t)=>[e,t]));return e=>t.get(e)}function k(e,t={}){var n,a;let r=e.elems;const s=0===e.combinationsOptions.min,i=t.all?e.sortedSets:e.visibleSets;if(!s){const e=new Set(i.map(e=>e.elems).flat());r=r.filter(t=>e.has(t))}const o=x(r),l=x(i),c=x(e.visibleCombinations),u=null!==(a=null===(n=e.dataset)||void 0===n?void 0:n.attrs)&&void 0!==a?a:[],d=t.all?u:u.filter(t=>e.selectedAttrs.has(t));return{all:s,sets:i,elems:Object(E.a)(r,d,t.maxCompress),attrs:d,toElemIndex:o,toSetIndex:l,toCombinationIndx:c,toSetRef:e=>({type:e.type,index:"set"===e.type?l(e):c(e)})}}var O=n(40);function j(e,t={}){var n;const a=k(e,t),r=e.dataset,s=Object(c.y)({sets:a.sets,queries:e.visibleQueries,toElemIndex:a.toElemIndex,selection:e.selection||void 0,combinations:e.visibleCombinations,combinationOptions:Object(o.j)(e.combinationsOptions)},{compress:null!==(n=t.compress)&&void 0!==n?n:"auto"});return Object.assign(Object.assign({},s),{name:r.name,description:r.description,author:r.author,elements:Object(o.j)(a.elems),attrs:Object(o.j)(a.attrs),props:me(e.props,e.ui.theme)})}function C(e,t={}){var n;const a=e.dataset,r=Object(c.B)({sets:e.visibleSets,combinations:e.visibleCombinations,selection:null!==(n=e.selection)&&void 0!==n?n:void 0,queries:e.visibleQueries},t);return Object.assign(Object.assign({},r),{name:a.name,description:a.description,author:a.author,props:me(e.props,e.ui.theme)})}const N=4096;n.p,n.p;function A(e,t){return{id:t,name:e.name,author:e.author,description:e.description,creationDate:new Date,attrs:e.attrs,setCount:e.sets.length,load:()=>{const t=Object(E.e)(e.elements,e.attrs),n=Object(E.b)(e,t,{});return Promise.resolve({elems:t,sets:n.sets,props:e.props,combinations:e.combinationOptions,queries:e.queries})}}}function T(e){return"string"==typeof e?Object(E.d)(e).then(t=>A(t,e.includes("/")?e.slice(e.lastIndexOf("/")+1):e)):Object(E.c)(e).then(t=>A(t,e.name))}let L=null;function q(){return L?Promise.resolve(L):n.e(4).then(n.bind(null,325)).then(e=>{class t extends e.default{constructor(){super("UpSet.js App DB"),this.version(1).stores({datasets:"++uid,id,name,creationDate"}),this.datasets=this.datasets||void 0}}return new t}).then(e=>L=e)}function M(e){const t=A(e,String(e.uid));return t.uid=e.uid,t.creationDate=new Date(e.creationDate),t}function z(e){return e.sort((e,t)=>t.creationDate-e.creationDate)}var B=n(211);function $(e,t,n){var a=t-1,r=function(t){var r=t*a,s=Math.floor(r),i=r-s,o=e[s];return 0===i?o:n(o,e[Math.min(s+1,a)],i)};return{q1:r(.25),median:r(.5),q3:r(.75)}}function P(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e,t,n){return e+n*(t-e)}))}function I(e,t){void 0===t&&(t=e.length);var n=t,a=Math.floor((n+3)/2)/2,r=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:r(a),median:r((n+1)/2),q3:r(n+1-a)}}var R={hinges:I,fivenum:I,type7:P,quantiles:P,linear:function(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e,t,n){return e+(t-e)*n}))},lower:function(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e){return e}))},higher:function(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e,t){return t}))},nearest:function(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e,t,n){return n<.5?e:t}))},midpoint:function(e,t){return void 0===t&&(t=e.length),$(e,t,(function(e,t){return.5*(e+t)}))}};function D(e,t){void 0===t&&(t={});for(var n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=0,s=0,i=e.length,o=function(e){var t,n,a;return void 0===e&&(e={}),{coef:null!==(t=e.coef)&&void 0!==t?t:1.5,quantiles:(a=null!==(n=e.quantiles)&&void 0!==n?n:"type7","function"==typeof a?a:R[a]||P)}}(t),l=o.quantiles,c=o.coef,u=new Float32Array(i),d=0;d<i;++d){var m=e[d];null==m||Number.isNaN(m)||(u[s]=m,s++,m<n&&(n=m),m>a&&(a=m),r+=m)}var p=i-s;if(0===s)return{min:NaN,max:NaN,mean:NaN,missing:p,count:i,whiskerHigh:NaN,whiskerLow:NaN,outlier:[],median:NaN,q1:NaN,q3:NaN};for(var f=u.subarray(0,s).sort((function(e,t){return e===t?0:e<t?-1:1})),h=l(f,s),y=h.median,b=h.q1,g=h.q3,v=g-b,w="number"==typeof c&&c>0,S=w?Math.max(n,b-c*v):n,E=w?Math.min(a,g+c*v):a,x=[],k=S,O=0;O<s;++O){var j=f[O];if(S<j){k=j;break}0!==x.length&&x[x.length-1]===j||x.push(j)}for(var C=E,N=[],A=s-1;A>=0;--A){var T=f[A];if(T<E){C=T;break}0!==N.length&&N[N.length-1]===T||0!==x.length&&x[x.length-1]===T||N.push(T)}return{min:n,max:a,count:i,missing:p,mean:r/s,whiskerHigh:C,whiskerLow:k,outlier:x.concat(N.reverse()),median:y,q1:b,q3:g}}function F(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function _(e){return Math.round(100*e)/100}var J=function(e){var t=e.theme,n=void 0===t?"light":t,a=e.mode,r=void 0===a?"normal":a,i=e.values,o=e.orient,l=void 0===o?"horizontal":o,c=e.width,u=e.height,d=e.min,m=e.max,p=e.boxStyle,f=e.lineStyle,h=e.outlierStyle,y=e.boxPadding,b=void 0===y?.1:y,g=e.outlierRadius,v=void 0===g?3:g,w=e.numberFormat,S=void 0===w?function(e){return e.toFixed(2)}:w,E=D(i,F(e,["theme","mode","values","orient","width","height","min","max","boxStyle","lineStyle","outlierStyle","boxPadding","outlierRadius","numberFormat"]));if(Number.isNaN(E.median))return s.a.createElement("g",null);var x,k,O="indicator"===r?1:0,j="horizontal"===l,C=(k=(x=[d,m])[1]-x[0],function(e){return(e-x[0])/k}),N=function(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}([0,j?c:u]),A=function(e){return _(N(C(e)))},T={max:A(E.max),avg:A(E.mean),med:A(E.median),min:A(E.min),q1:A(E.q1),q3:A(E.q3),wh:A(E.whiskerHigh),wl:A(E.whiskerLow)},L=s.a.createElement("title",null,"Min: "+S(E.min)+", 25% Quantile: "+S(E.q1)+", Median: "+S(E.median)+", 75% Quantile: "+S(E.q3)+", Max: "+S(E.max)),q="light"===n?"#d3d3d3":"#666666",M={box:Object.assign({fill:q},p),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},f),outlier:Object.assign({fill:q},h)};if(j){var z=u/2,B=_(u*b)+O,$=u-B-O,P="M"+T.wl+","+O+" l0,"+(u-2*O)+" M"+T.wl+","+z+" L"+T.q1+","+z,I="M"+T.q3+","+z+" L"+T.wh+","+z+" M"+T.wh+","+O+" L"+T.wh+","+(u-O),R="M"+T.q1+","+B+" L"+T.q3+","+B+" L"+T.q3+","+$+" L"+T.q1+","+$+" L"+T.q1+","+B+" M"+T.med+","+B+" l0,"+($-B),J=s.a.createElement("path",{d:P+"  "+I+" "+R,style:M.line});return"indicator"===r?J:s.a.createElement("g",null,L,"normal"===r&&s.a.createElement("rect",{x:T.q1,y:B,width:T.q3-T.q1,height:u-2*B,style:M.box}),J,";",E.outlier.map((function(e){return s.a.createElement("circle",{key:e,r:v,cy:z,cx:A(e),style:M.outlier},s.a.createElement("title",null,"$",S(e)))})))}var G=c/2,U=_(c*b)+O,H=c-U-O,W="M"+O+","+T.wl+" l"+(c-2*O)+",0 M"+G+","+T.wl+" L"+G+","+T.q1,V="M"+G+","+T.q3+" L"+G+","+T.wh+" M"+O+","+T.wh+" L"+(c-O)+","+T.wh,Q="M"+U+","+T.q1+" L"+U+","+T.q3+" l"+(H-U)+",0 L"+H+","+T.q1+" L"+U+","+T.q1+" M"+U+","+T.med+" l"+(H-U)+",0",K=s.a.createElement("path",{d:W+" "+V+" "+Q,style:M.line});return"indicator"===r?K:s.a.createElement("g",null,L,"normal"===r&&s.a.createElement("rect",{y:T.q1,x:U,height:T.q3-T.q1,width:c-2*U,style:M.box}),K,E.outlier.map((function(e){return s.a.createElement("circle",{key:e,r:v,cx:G,cy:A(e),style:M.outlier},s.a.createElement("title",null,"$",S(e)))})))},G=s.a.memo(J);function U(e,t,n){var a=void 0===n?{}:n,r=a.size,i=void 0===r?100:r,o=a.position,l=a.name,c=void 0===l?e.toString():l,u=F(a,["size","position","name"]),d="function"==typeof e?e:function(t){return t[e]},m=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(Array.isArray(t))t.forEach((function(e){var t=d(e);null==t||Number.isNaN(t)||(t<m&&(m=t),t>p&&(p=t))}));else{var f=t;m=f.min,p=f.max}return{name:c,position:o,size:i,render:function(e){var t=e.width,n=e.height,a=e.set,r=e.theme,i=a.elems.map(d);return s.a.createElement(G,Object.assign({values:i,width:t,height:n,min:m,max:p,theme:r},u))},renderSelection:function(e){var t=e.width,n=e.height,a=e.overlap,r=e.selectionColor,i=e.theme;if(null==a||0===a.length)return null;var o=a.map(d);return s.a.createElement(G,Object.assign({values:o,width:t,height:n,min:m,max:p,mode:"box",lineStyle:{stroke:r},outlierStyle:{fill:r},theme:i},u))},renderQuery:function(e){var t=e.width,n=e.height,a=e.overlap,r=e.query,i=e.secondary,o=e.theme;if(null==a||0===a.length)return null;var l=a.map(d);return s.a.createElement(G,Object.assign({values:l,width:t,height:n,min:m,max:p,mode:i?"indicator":"box",lineStyle:{stroke:r.color},outlierStyle:{fill:r.color},theme:o},u))}}}function H(e,t,n){const a=function(e,t){const n="function"==typeof e?e:t=>t[e],a="asc"===t?1:-1;return(e,t)=>{const r=n(e),s=n(t);return r===s?0:r<s?-a:a}}(t,n),r=e.map((e,t)=>({v:e,i:t}));return r.sort((e,t)=>{const n=a(e.v,t.v);return 0!==n?n:e.i-t.i}),r.map(e=>e.v)}var W=n(337);function V(e){const t=e.visibleSets,n=e.visibleCombinations,a=e.dataset.attrs.filter(t=>e.selectedAttrs.has(t));return Object(y.unparse)([["Name","Cardinality","Degree",t.map(e=>e.name),a.map(e=>function(e){return["Count","Median","Mean","Min","Max","Q1","Q3"].map(t=>`${e}_${t}`)}(e))].flat(2),...n.map(e=>[e.name,e.cardinality,e.degree,t.map(t=>e.sets.has(t)?1:0),a.map(t=>function(e,t){const n=D(t.map(t=>t.attrs[e]));return[n.count,n.median,n.mean,n.min,n.max,n.q1,n.q3]}(t,e.elems))].flat(2))])}function Q(e,t){const n={};return e.forEach(e=>n[e]=t[e]),n}function K(e,t){return null!=e?e.toString():t.toString()}function Y(e){const t=function(e){let t="";return t="string"==typeof e?e.includes("/")?e.slice(e.lastIndexOf("/")+1):e:e.name,t.includes(".")?t.slice(0,t.lastIndexOf(".")):t}(e);return new Promise(n=>{Object(y.parse)(e,{download:"string"==typeof e,dynamicTyping:!0,header:!0,skipEmptyLines:!0,complete(e){const a=e.meta.fields,r=function(e){const t=e.map(e=>e.toLowerCase());return t.includes("name")?e[t.indexOf("name")]:t.includes("id")?e[t.indexOf("id")]:e[0]}(a),s=function(e,t){return t.filter(t=>e.every(e=>function(e){if(""===e||null==e)return!0;if("number"==typeof e)return 1===e||0===e;if("string"==typeof e){const t=e.toLowerCase();return"t"===t||"f"===t||"true"===t||"false"===t}return!1}(e[t])))}(e.data,a),i=function(e,t){return t.filter(t=>e.every(e=>"number"==typeof e[t]))}(e.data,a.filter(e=>!s.includes(e)&&e!==r));n({id:t,name:t,creationDate:new Date,author:"User",description:"imported from "+t,attrs:i,load:()=>{const t=e.data.map((e,t)=>({name:K(e[r],t),sets:s.filter(t=>function(e){if(""===e||null==e)return!1;if("number"==typeof e)return 1===e;if("string"==typeof e){const t=e.toLowerCase();return"t"===t||"true"===t}return!1}(e[t])),attrs:Q(i,e)}));return Promise.resolve({elems:t,sets:Object(c.f)(t)})}})}})})}function Z(e){return e.replace(/([A-Z])/gm,e=>"."+e.toLowerCase())}function X(e){return"string"==typeof e?`"${e}"`:`c(${e.map(X).join(", ")})`}function ee(e){return"set"===e.type?e.name:Array.from(e.sets).map(e=>e.name).sort()}function te(e){const t=e.selectedAttrs.size>0?function(e){const t=e.elems,n=Array.from(e.selectedAttrs);return`df <- data.frame(\n${e.visibleSets.map(e=>{const n=new Set(e.elems);return`   \`${e.name}\`= c(${t.map(e=>n.has(e)?1:0).join(",")})`}).join(",\n")}\n)\nrownames(df) <- ${X(t.map(e=>e.name))}\ndf.attributes <- list(\n${n.map(e=>`\`${e}\` = c(${t.map(t=>{var n;return null!==(n=t.attrs[e])&&void 0!==n?n:"NULL"}).join(",")})`).join(",\n")}\n)\nupsetjs() %>% fromDataFrame(df, attributes=df.attributes)`}(e):function(e){return`listInput <- list(\n${e.visibleSets.map(e=>`   \`${e.name}\`=${X(e.elems.map(e=>e.name))}`).join(",\n")}\n)\nupsetjs() %>% fromList(listInput)`}(e),n=e.selection?`%>% setSelection(${X(ee(e.selection))})`:"",a=e.combinationsOptions;return`\ndevtools::install_url("https://github.com/upsetjs/upsetjs_r/releases/v1.0.0/download/upsetjs.tar.gz")\nlibrary(upsetjs)\n\n${t} ${` %>% generate${a.type[0].toUpperCase()}${a.type.slice(1)}s(min=${a.min}, max=${a.max}, empty=${a.empty?"T":"F"}, limit=${a.limit}, order.by=${X(a.order)})`}${n}${e.visibleQueries.map(e=>`%>% addQuery(${X(e.name)}, ${X(e.color)}, set=${X(ee(e.set))})`).join("")}${function(e){const t=Object.keys(e);if(0===t.length)return"";const n=[];return t.forEach(t=>{const a=t,r=e[a];"widthRatios"===a||"heightRatios"===a?n.push(`${Z(a)} = c(${r})`):"fontSizes"===a?n.push(`font.sizes = list(${Object.keys(r).map(e=>`${Z(e)} = "${r[e]}"`).join(", ")})`):n.push(`${Z(a)} = ${JSON.stringify(r)}`)}),` %>% chartProps(${n.join(", ")})`}(me(e.props,e.ui.theme))} %>% interactiveChart()\n`}function ne(e){return e.replace(/([A-Z])/gm,e=>"_"+e.toLowerCase())}function ae(e){const t=e.selectedAttrs.size>0?function(e){const t=[],n=Array.from(e.selectedAttrs);t.push("df = pd.DataFrame({\n");const a=e.visibleSets.length+n.length-1;return e.visibleSets.forEach((n,r)=>{const s=new Set(n.elems);t.push(`  "${n.name}": ${JSON.stringify(e.elems.map(e=>s.has(e)?1:0))}${r<a?",":""}\n`)}),n.forEach((a,r)=>{t.push(`  "${a}": ${JSON.stringify(e.elems.map(e=>e.attrs[a]))}${r<n.length-1?",":""}\n`.replace(/null/g,"None"))}),t.push("}, index="+JSON.stringify(e.elems.map(e=>e.name))),t.push(")\n"),t.push("\n"),t.push(`w = UpSetJSWidget[str]().from_dataframe(df${n.length>0?", attributes="+JSON.stringify(n):""})\n`),t}(e):function(e){return["dict_input = OrderedDict([\n",...e.visibleSets.map((t,n)=>`   ("${t.name}", ${JSON.stringify(t.elems.map(e=>e.name))})${n<e.visibleSets.length-1?",":""}\n`),"])\n","\n","w = UpSetJSWidget[str]().from_dict(dict_input)\n"]}(e),n=e=>`next(s for s in w.${"set"===e.type?"sets":"combinations"} if s.name == "${e.name}")`,a=e.combinationsOptions,r=`w.generate_${a.type}s(min_degree=${a.min}, max_degree=${a.max}, empty=${a.empty?"True":"False"}, limit=${a.limit})\n`,s=e.selection?`w.selection = ${n(e.selection)}\n`:null,i=e.visibleQueries.map(e=>`w.append_query("${e.name}", "${e.color}", upset=${n(e.set)})\n`),o=function(e){const t=[],n=me(e.props,e.ui.theme);return Object.keys(n).forEach(e=>{const a=e,r=n[a];"heightRatios"===a||"widthRatios"===a?t.push(`w.${ne(a)} = (${r})\n`):"fontSizes"===a?Object.keys(r).forEach(e=>{t.push(`w.font_sizes.${ne(e)} = "${r[e]}"\n`)}):t.push(`w.${ne(a)} = ${JSON.stringify(r)}\n`)}),t}(e),l={nbformat:4,nbformat_minor:2,metadata:{language_info:{name:"python",codemirror_mode:{name:"ipython",version:3}},orig_nbformat:2,file_extension:".py",mimetype:"text/x-python",name:"python",npconvert_exporter:"python",pygments_lexer:"ipython3",version:3},cells:[{cell_type:"markdown",metadata:{},source:["# "+e.title,"\n","Please make sure the jupyter extension is installed:\n","```bash\n","pip install upsetjs_jupyter_widget\n","jupyter labextension install @jupyter-widgets/jupyterlab-manager@3.0.0-alpha.0\n","```\n"]},{cell_type:"code",execution_count:null,metadata:{},outputs:[],source:["from ipywidgets import interact\n","from collections import OrderedDict\n","from upsetjs_jupyter_widget import UpSetJSWidget\n","import pandas as pd"]},{cell_type:"code",execution_count:40,metadata:{},outputs:[],source:[...t,r,s,...i,...o,"w"].filter(Boolean)}]};return JSON.stringify(l,null,2)}const re="#app {\n  width: 100vw;\n  height: 100vh;\n}";function se(e,t="UpSetJS."){const n=k(e),a=e.visibleSets.map(e=>Object(c.z)(e.elems,n.toElemIndex,{sortAble:!0})),r=e.visibleSets.map((e,n)=>({name:e.name,elems:`CC${t}fromIndicesArray(${JSON.stringify(a[n]).replace(/"/gm,"'")}, elems)CC`})),s=e.visibleQueries.length>0||null!=e.selection,i=e=>{const t=n.toSetRef(e);return`{ type: '${t.type}', index: ${t.index} }`},l=n.attrs.length>0?`\n  setAddons: ${JSON.stringify(n.attrs.map(e=>`CC${t}boxplotAddon((v) => v['${e}'], elems, { name: '${e}' })CC`))},\n  combinationAddons: ${JSON.stringify(n.attrs.map(e=>`CC${t}boxplotAddon((v) => v['${e}'], elems, { orient: 'vertical', name: '${e}' })CC`))}`:"",u=`\nconst root = document.getElementById("app");\nconst sets = ${t}asSets(${JSON.stringify(Object(o.j)(r),null,2)});\n\nconst combinations = ${t}generateCombinations(sets, ${JSON.stringify(Object.assign(Object.assign({},e.combinationsOptions),{elems:"CCelemsCC"}),null,2)});\n\n${s?'function fromSetRef(ref) {\n  if (ref.type === "set") {\n    return sets[ref.index];\n  }\n  return combinations[ref.index];\n}':""}\n\nlet selection = ${e.selection?`fromSetRef(${i(e.selection)})`:null};\nconst queries = ${JSON.stringify(e.visibleQueries.map(e=>({name:e.name,color:e.color,set:`CCfromSetRef(${i(e.set)})CC`})),null,2)};\n\nconst props = Object.assign({\n  width: root.clientWidth,\n  height: root.clientHeight,\n}, {\n  sets: sets,\n  combinations: combinations,\n  selection: selection,\n  queries: queries,${l}\n}, ${JSON.stringify(me(e.props,e.ui.theme),null,2)});\n\nfunction update() {\n  ${t}render(root, props);\n}\n\n// uncomment for interactivity\nprops.onHover = (s) => {\n  props.selection = s;\n  update();\n}\n//props.onClick = (s) => {\n//  console.log(s);\n//}\n\nupdate();\n\n`.replace(/"CC/gm,"").replace(/CC"/gm,"");return{elems:Object(o.j)(n.elems),js:u}}function ie(e){const{elems:t,js:n}=se(e);return{html:`<div id="app"></div>\n<script id="data" type="application/json">\n${JSON.stringify(t)}\n<\/script>\n`,js:'const elems = JSON.parse(document.getElementById("data").textContent);\n'+n}}const oe=[W.a[0],...W.a.slice(2)],le=oe.shift(),ce=["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor"],ue=["fontSizes","barPadding","dotPadding","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","heightRatios","padding","theme","widthRatios","fontFamily","numericScale","bandScale"];function de(e,t){const n=Object(B.fillDefaults)({theme:t,width:100,height:100,sets:[]}),a={};for(const t of e)a[t]=n[t];return a}function me(e,t){const n=de(ce.concat(ue),t),a=(e,t)=>{const n={};for(const a of Object.keys(e)){const r=t[a],s=e[a];r!==s&&(n[a]=s)}return n},r=a(e,n);if(r.fontSizes){const e=a(r.fontSizes,n.fontSizes);0===Object.keys(e).length?delete r.fontSizes:r.fontSizes=e}return Array.isArray(r.heightRatios)&&r.heightRatios.every((e,t)=>e===n.heightRatios[t])&&delete r.heightRatios,Array.isArray(r.widthRatios)&&r.widthRatios.every((e,t)=>e===n.widthRatios[t])&&delete r.widthRatios,r}class pe{constructor(e,t){this.q=e,this.visible=t}}Object(i.b)([o.g.ref],pe.prototype,"q",void 0),Object(i.b)([o.g],pe.prototype,"visible",void 0);class fe{constructor(){this.ui=new l,this.datasets=[],this.dataset=null,this.sets=[],this.elems=[],this.props=de(ce.concat(ue),this.ui.theme),this.hover=null,this.selection=null,this.queries=[],this.selectedAttrs=new Set,this.combinationsOptions={type:"intersection",min:1,max:5,empty:!1,limit:100,order:["cardinality","name"]},this.selectedSets=new Set,this.appendDatasets([m,h]),this.ui.showToast({severity:"info",message:"Preparing Datasets..."}),Promise.all([q().then(e=>e.datasets.toArray()).then(z).then(e=>e.map(M)).then(e=>this.appendDatasets(e)),S().then(e=>{e.forEach(e=>e.then(e=>this.appendDatasets([e])))})]).then(()=>{this.ui.closeToast(),this.syncHistory()}),Object(o.c)(()=>{Object.assign(this.props,de(ce.concat(ue),this.ui.theme))}),Object(o.c)(()=>{document.title=this.title})}syncHistory(){const e=(e=!1)=>{var t;const n=new URL(window.location.href);if(n.searchParams.has("ds")){const a=decodeURIComponent(n.searchParams.get("ds"));e&&a.startsWith("http")?this.importFile(a):(null===(t=this.dataset)||void 0===t?void 0:t.id)!==a&&this.selectDataSet(a)}},t=e.bind(this,!1);window.addEventListener("popstate",t),e(!0),Object(o.c)(()=>{const e=new URLSearchParams;this.dataset&&e.set("ds",encodeURIComponent(this.dataset.id)),e.sort();const n=new URL(window.location.href);n.searchParams.toString()!==e.toString()&&(n.search="?"+e.toString(),window.removeEventListener("popstate",t),window.history.pushState(null,"",n.toString()),window.addEventListener("popstate",t))})}resetProps(){Object.assign(this.props,de(ce.concat(ue),this.ui.theme))}appendDatasets(e){e.length<=0||(this.datasets.push(...e),this.sortDatasets(),this.datasets.length>0&&!this.dataset&&this.loadDataSet(this.datasets[0]))}sortDatasets(){this.datasets=this.datasets.slice().sort((e,t)=>"got"===e.id?-1:"got"===t.id?1:e.name.localeCompare(t.name))}selectDataSet(e){var t;const n=null!==(t=this.datasets.find(t=>t.id===e))&&void 0!==t?t:null;this.loadDataSet(n)}pushDataSet(e){this.datasets.push(e),this.sortDatasets(),this.dataset=e,this.loadDataSet(e,()=>{(function(e){const t=Object.assign({creationDate:Date.now()},j(e,{all:!0}));return t.name=t.name+" - Local",q().then(e=>e.datasets.add(t)).then(e=>M(Object.assign(t,{uid:e})))})(this).then(t=>{this.dataset=t,this.datasets.splice(this.datasets.indexOf(e),1,t)})}),this.ui.showToast({severity:"success",message:"Data set loaded"})}deleteDataSet(e){e.uid&&function(e){return q().then(t=>t.transaction("rw",t.datasets,()=>Promise.all([t.datasets.where("uid").equals(e.uid).delete()])))}(e).then(()=>Object(o.h)(()=>{this.datasets.splice(this.datasets.indexOf(e),1),this.dataset===e&&this.loadDataSet(this.datasets[0]),this.ui.showToast({severity:"success",message:"Data set deleted"})}))}loadDataSet(e,t){this.dataset=e,this.sets=[],this.elems=[],this.selectedSets=new Set,this.selectedAttrs=new Set(e?e.attrs.slice(0,1):[]),this.hover=null,this.selection=null,this.queries.splice(0,this.queries.length),this.dataset&&this.dataset.load().then(e=>Object(o.h)(()=>{var n,a;this.sets=e.sets,this.elems=e.elems,Object.assign(this.props,null!==(n=e.props)&&void 0!==n?n:{}),Object.assign(this.combinationsOptions,null!==(a=e.combinations)&&void 0!==a?a:{}),this.selectedSets=new Set(this.sortedSets.slice(0,5).map(e=>e.name)),t&&t()}))}setHover(e,t){if(!e||!this.selection||!t.ctrlKey)return void(this.hover=e);const n=new Set;if("set"===e.type?n.add(e):e.sets.forEach(e=>n.add(e)),"set"===this.selection.type?n.add(this.selection):c.C.isSetLike(this.selection)&&this.selection.sets.forEach(e=>n.add(e)),1===n.size)return void(this.hover=e);const a=this.visibleCombinations.find(e=>e.degree===n.size&&Array.from(e.sets).every(e=>n.has(e)));this.hover=a||e}setSelection(e){this.selection=e}get visibleSets(){return this.sortedSets.filter(e=>this.selectedSets.has(e.name))}get visibleSetAddons(){return this.dataset?this.dataset.attrs.filter(e=>this.selectedAttrs.has(e)).map(e=>U(t=>t.attrs[e],this.elems,{name:e})):[]}get visibleCombinationAddons(){return this.dataset?this.dataset.attrs.filter(e=>this.selectedAttrs.has(e)).map(e=>U(t=>t.attrs[e],this.elems,{orient:"vertical",name:e})):[]}get sortedSelectedElems(){if(!this.selection)return[];const e=this.ui.elemTable.orderBy;return H(this.selection.elems,e.startsWith("attrs")?t=>t.attrs[e.slice(6)]:e,this.ui.elemTable.order)}get sortedSets(){return H(this.sets,this.ui.setTable.orderBy,this.ui.setTable.order)}setSelectedSets(e){this.selectedSets=e}setSelectedAttrs(e){this.selectedAttrs=e}get visibleCombinations(){return Object(c.k)(this.visibleSets,Object.assign({elems:this.elems},this.combinationsOptions))}changeCombinations(e){Object.assign(this.combinationsOptions,e)}changeProps(e){Object.assign(this.props,e),e.theme&&Object.assign(this.props,function(e){const t=Object(B.fillDefaults)({theme:e,width:100,height:100,sets:[]}),n={};for(const e of ce)n[e]=t[e];return n}(e.theme))}changeFontSize(e){this.props.fontSizes=Object.assign({},this.props.fontSizes,e)}get visibleQueries(){return this.queries.filter(e=>e.visible).map(e=>e.q)}get queriesAndSelection(){const e=this.visibleQueries;return this.selection?[{name:this.selection.name,color:le,set:this.selection}].concat(e):e}deleteQuery(e){const t=this.queries.findIndex(t=>t.q===e);t>=0&&(this.queries.splice(t,1),oe.unshift(e.color))}persistSelection(){this.selection&&(this.queries.push(new pe({name:this.selection.name,set:this.selection,color:oe.length>0?oe.shift():"grey"},!0)),this.selection=null)}toggleQueryVisibility(e){const t=this.queries.find(t=>t.q===e);t&&(t.visible=!t.visible)}get title(){var e,t;return"UpSet.js - "+(null!==(t=null===(e=this.dataset)||void 0===e?void 0:e.name)&&void 0!==t?t:"Unknown")}exportSVG(){this.ui.ref.current&&Object(B.exportSVG)(this.ui.ref.current,{type:"svg",title:this.title})}exportPNG(){this.ui.ref.current&&Object(B.exportSVG)(this.ui.ref.current,{type:"png",title:this.title})}exportVega(){this.ui.ref.current&&(Object(B.exportVegaLite)(this.ui.ref.current,{title:this.title}),this.ui.showToast({severity:"success",message:this.title+".json generated",link:{alt:"Vega-Lite Editor",href:"https://vega.github.io/"}}))}downloadFile(e,t,n,a){const r=new Blob([e],{type:t}),s=URL.createObjectURL(r);Object(B.downloadUrl)(s,`${this.title}.${n}`,document),URL.revokeObjectURL(s),this.ui.showToast({severity:"success",message:`${this.title}.${n} generated`,link:a})}exportCSV(){this.downloadFile(V(this),"text/csv","csv")}exportJSON(){this.downloadFile(function(e){const t=Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json"},j(e,{compress:"no"}));return JSON.stringify(t,null,2)}(this),"application/json","json")}exportStaticJSON(){this.downloadFile(function(e){const t=Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json"},C(e,{compress:"no"}));return JSON.stringify(t,null,2)}(this),"application/json","json")}exportR(){this.downloadFile(te(this),"text/plain","R",{href:"https://mybinder.org/v2/gh/upsetjs/upsetjs_r/master?urlpath=rstudio/",alt:"Open MyBinder R Environment"})}exportPython(){this.downloadFile(ae(this),"application/vnd.jupyter","ipynb",{href:"https://mybinder.org/v2/gh/upsetjs/upsetjs_jupyter_widget/master?urlpath=lab/",alt:"Open MyBinder Python Environment"})}exportCodepen(){!function(e){const{html:t,js:n}=ie(e),a={title:e.title,description:e.dataset.description,html:t,css:re,css_pre_processor:"scss",css_starter:"normalize",js:n,js_pre_processor:"babel",js_modernizr:!1,js_external:`https://unpkg.com/@upsetjs/bundle@${encodeURIComponent("^")}1.0.0`},r=JSON.stringify(a).replace(/"/g,"&quot;").replace(/'/g,"&apos;"),s=document.createElement("form");s.method="post",s.action="https://codepen.io/pen/define",s.target="_blank",s.rel="noopener noreferrer",s.innerHTML='<input type="hidden" name="data">',s.firstElementChild.value=r,document.body.appendChild(s),s.submit(),s.remove()}(this)}exportCodesandbox(){!function(e){const{elems:t,js:n}=se(e,""),a=n.includes("boxplotAddon("),r=n.includes("fromIndicesArray"),s={files:{"index.html":{content:`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <title>${e.title}</title>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n</head>\n<body>\n<div id="app"></div>\n</body>\n</html>`},"main.css":{content:re},"data.json":{content:t},"index.js":{content:`\nimport {render, generateCombinations, ${r?"fromIndicesArray, ":""}${a?"boxplotAddon, ":""}asSets)} from "@upsetjs/bundle";\nimport elems from './data.json';\nimport "./main.css";\n\n${n}\n`},"package.json":{content:{name:e.dataset.name,description:e.dataset.description,dependencies:{"@upsetjs/bundle":"^1.0.0"}}}}},i=Object(O.compressToBase64)(JSON.stringify(s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),o=document.createElement("form");o.method="post",o.action="https://codesandbox.io/api/v1/sandboxes/define",o.target="_blank",o.rel="noopener noreferrer",o.innerHTML='<input type="hidden" name="parameters">',o.firstElementChild.value=i,document.body.appendChild(o),o.submit(),o.remove()}(this)}exportJSFiddle(){!function(e){const{html:t,js:n}=ie(e),a=document.createElement("form");a.method="post",a.action="https://jsfiddle.net/api/post/library/pure/",a.target="_blank",a.rel="noopener noreferrer",a.innerHTML='\x3c!--https://docs.jsfiddle.net/api/display-a-fiddle-from-post--\x3e\n      <input type="hidden" name="title">\n      <input type="hidden" name="description">\n      <input type="hidden" name="resources">\n      <input type="hidden" name="html">\n      <input type="hidden" name="css">\n      <input type="hidden" name="js">\n      <input type="hidden" name="wrap" value="d">\n      <input type="hidden" name="normalize_css" value="yes">\n      <input type="hidden" name="css_panel" value="1">\x3c!--SCSS--\x3e\n      <input type="hidden" name="js_panel" value="2">\x3c!--JS 1.7--\x3e';const r=(e,t)=>{a.querySelector(`[name="${e}"]`).value=t.toString()};r("title",e.title),r("description",e.dataset.description),r("html",t),r("css",re),r("js",n),r("resources",`https://unpkg.com/@upsetjs/bundle@${encodeURIComponent("^")}1.0.0`),document.body.appendChild(a),a.submit(),a.remove()}(this)}sharedEmbedded(){(function(e){const t=j(e,{compress:"yes"}),n=Object(O.compressToEncodedURIComponent)(JSON.stringify(t)),a=new URL(window.location.toString());if(a.hash="",a.pathname.endsWith("/")?a.pathname=a.pathname+"embed.html":a.pathname.endsWith("index.html")?a.pathname=a.pathname.replace("index.html","embed.html"):a.pathname=a.pathname+"/embed.html",a.search="?",a.searchParams.set("p",n),a.toString().length<N)return window.open(a.toString(),"_blank"),!0;if(0===e.selectedAttrs.size){const t=C(e,{compress:"yes"}),n=Object(O.compressToEncodedURIComponent)(JSON.stringify(t));if(a.searchParams.set("p",n),a.toString().length<N)return window.open(a.toString(),"_blank"),!0}a.searchParams.delete("p");const r=window.open(a.toString(),"_blank");return null==r||r.addEventListener("load",()=>{null==r||r.postMessage(t,a.origin)}),!1})(this)||this.ui.showToast({severity:"warning",message:`The current dataset cannot be encoded within ${N.toLocaleString()} characters in the URL. You can either try to deactive any attriubtes or save the page and host it yourself`})}importFile(e){const t="string"==typeof e?e:e.name;this.ui.showToast({severity:"info",message:`Importing Dataset: ${t}...`});const n=t.endsWith(".json")?T:t.endsWith(".csv")?Y:null;n?n(e).then(e=>{this.ui.closeToast(),this.pushDataSet(e)}).catch(e=>{console.error(e),this.ui.showToast({severity:"error",message:"Error occurred during dataset import!"})}):this.ui.showToast({severity:"error",message:"Unknown Dataset type: only .csv and .json are supported"})}}Object(i.b)([o.g],fe.prototype,"ui",void 0),Object(i.b)([o.g.shallow],fe.prototype,"datasets",void 0),Object(i.b)([o.g.ref],fe.prototype,"dataset",void 0),Object(i.b)([o.g.shallow],fe.prototype,"sets",void 0),Object(i.b)([o.g.shallow],fe.prototype,"elems",void 0),Object(i.b)([o.g],fe.prototype,"props",void 0),Object(i.b)([o.g.ref],fe.prototype,"hover",void 0),Object(i.b)([o.g.ref],fe.prototype,"selection",void 0),Object(i.b)([o.g],fe.prototype,"queries",void 0),Object(i.b)([o.g],fe.prototype,"selectedAttrs",void 0),Object(i.b)([o.g],fe.prototype,"combinationsOptions",void 0),Object(i.b)([o.g],fe.prototype,"selectedSets",void 0),Object(i.b)([o.b.bound],fe.prototype,"resetProps",null),Object(i.b)([o.b],fe.prototype,"appendDatasets",null),Object(i.b)([o.b],fe.prototype,"selectDataSet",null),Object(i.b)([o.b.bound],fe.prototype,"pushDataSet",null),Object(i.b)([o.b],fe.prototype,"deleteDataSet",null),Object(i.b)([o.b.bound],fe.prototype,"setHover",null),Object(i.b)([o.b.bound],fe.prototype,"setSelection",null),Object(i.b)([o.d],fe.prototype,"visibleSets",null),Object(i.b)([o.d],fe.prototype,"visibleSetAddons",null),Object(i.b)([o.d],fe.prototype,"visibleCombinationAddons",null),Object(i.b)([o.d],fe.prototype,"sortedSelectedElems",null),Object(i.b)([o.d],fe.prototype,"sortedSets",null),Object(i.b)([o.b],fe.prototype,"setSelectedSets",null),Object(i.b)([o.b],fe.prototype,"setSelectedAttrs",null),Object(i.b)([o.d],fe.prototype,"visibleCombinations",null),Object(i.b)([o.b],fe.prototype,"changeCombinations",null),Object(i.b)([o.b],fe.prototype,"changeProps",null),Object(i.b)([o.b],fe.prototype,"changeFontSize",null),Object(i.b)([o.d],fe.prototype,"visibleQueries",null),Object(i.b)([o.d],fe.prototype,"queriesAndSelection",null),Object(i.b)([o.b],fe.prototype,"deleteQuery",null),Object(i.b)([o.b],fe.prototype,"persistSelection",null),Object(i.b)([o.b],fe.prototype,"toggleQueryVisibility",null),Object(i.b)([o.d],fe.prototype,"title",null),Object(i.b)([o.b.bound],fe.prototype,"exportSVG",null),Object(i.b)([o.b.bound],fe.prototype,"exportPNG",null),Object(i.b)([o.b.bound],fe.prototype,"exportVega",null),Object(i.b)([o.b.bound],fe.prototype,"exportCSV",null),Object(i.b)([o.b.bound],fe.prototype,"exportJSON",null),Object(i.b)([o.b.bound],fe.prototype,"exportStaticJSON",null),Object(i.b)([o.b.bound],fe.prototype,"exportR",null),Object(i.b)([o.b.bound],fe.prototype,"exportPython",null),Object(i.b)([o.b.bound],fe.prototype,"exportCodepen",null),Object(i.b)([o.b.bound],fe.prototype,"exportCodesandbox",null),Object(i.b)([o.b.bound],fe.prototype,"exportJSFiddle",null),Object(i.b)([o.b.bound],fe.prototype,"sharedEmbedded",null),Object(i.b)([o.b.bound],fe.prototype,"importFile",null);const he=s.a.createContext(null),ye=({children:e})=>{const t=Object(a.c)(()=>new fe);return s.a.createElement(he.Provider,{value:t}," ",e," ")},be=()=>{const e=s.a.useContext(he);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e};var ge=n(324),ve=n(322),we=n(238),Se=n(323),Ee=n(284),xe=n(292),ke=n(336),Oe=n(293),je=n(290),Ce=n(216),Ne=n.n(Ce);const Ae=Object(Ee.a)(e=>({root:{padding:e.spacing(1),display:"flex",flexDirection:"column"},header:{whiteSpace:"nowrap"}}));var Te=Object(a.a)(({id:e,title:t,className:n,children:a})=>{const r=be(),i=Ae();return s.a.createElement(ke.a,{expanded:r.ui.sidePanelExpanded.has(e),onChange:()=>r.ui.toggleSidePanelExpansion(e),className:n},s.a.createElement(je.a,{expandIcon:s.a.createElement(Ne.a,null),"aria-controls":e,id:e},s.a.createElement(xe.a,{variant:"h6",className:i.header},t)),s.a.createElement(Oe.a,{className:i.root},a))}),Le=Object(a.a)(()=>{var e,t;const n=be(),a=n.dataset;return s.a.createElement(Te,{id:"datasetinfo",title:"Dataset Information"},s.a.createElement(xe.a,{variant:"subtitle2"},"Name:"),s.a.createElement(xe.a,null,null==a?void 0:a.name),s.a.createElement(xe.a,{variant:"subtitle2"},"#Sets: ",n.sets.length),s.a.createElement(xe.a,{variant:"subtitle2"},"#Items: ",n.elems.length),s.a.createElement(xe.a,{variant:"subtitle2"},"#Attributes: ",null!==(t=null===(e=n.dataset)||void 0===e?void 0:e.attrs.length)&&void 0!==t?t:0),s.a.createElement(xe.a,{variant:"subtitle2"},"Author:"),s.a.createElement(xe.a,null,null==a?void 0:a.author),s.a.createElement(xe.a,{variant:"subtitle2"},"Description:"),s.a.createElement(xe.a,null,null==a?void 0:a.description))}),qe=n(301),Me=n(299),ze=n(302),Be=n(330),$e=Object(a.a)(()=>{var e;const t=be(),n=t.combinationsOptions,a=Array.isArray(n.order)?n.order.join(","):null!==(e=n.order)&&void 0!==e?e:"",r=e=>t.changeCombinations({[e.target.name]:Number.parseInt(e.target.value,10)});return s.a.createElement(Te,{id:"options",title:"Set Combinations"},s.a.createElement(Be.a,{label:"Ordering",value:a,select:!0,required:!0,onChange:e=>t.changeCombinations({order:e.target.value.split(",")})},s.a.createElement(Me.a,{value:"name"},"1. Name"),s.a.createElement(Me.a,{value:"cardinality,name"},"1. Cardinality 2. Name"),s.a.createElement(Me.a,{value:"cardinality,degree,name"},"1. Cardinality 2. Degree 3. Name"),s.a.createElement(Me.a,{value:"degree,name"},"1. Degree 2. Name"),s.a.createElement(Me.a,{value:"degree,cardinality,name"},"1. Degree 2. Cardinality 3. Name"),s.a.createElement(Me.a,{value:"group,name"},"1. Set Group 2. Name"),s.a.createElement(Me.a,{value:"group,cardinality,name"},"1. Set Group 2. Cardinality 3. Name"),s.a.createElement(Me.a,{value:"group,degree,name"},"1. Set Group 2. Degree 3. Name"),s.a.createElement(Me.a,{value:"group,degree,cardinality,name"},"1. Set Group 2. Degree 3. Cardinality 4. Name")),s.a.createElement(Be.a,{label:"Mode",value:n.type,select:!0,required:!0,onChange:e=>t.changeCombinations({type:"intersection"===String(e.target.value)?"intersection":"union"})},s.a.createElement(Me.a,{value:"intersection"},"Set Intersections"),s.a.createElement(Me.a,{value:"union"},"Set Unions")),s.a.createElement(Be.a,{label:"Mininum Set Members",value:n.min,name:"min",type:"number",required:!0,inputProps:{min:0,max:t.sets.length>0?t.sets.length:void 0},onChange:r}),s.a.createElement(Be.a,{label:"Maximum Set Members",name:"max",value:n.max,type:"number",required:!0,inputProps:{min:1,max:t.sets.length>0?t.sets.length:void 0},onChange:r}),s.a.createElement(Be.a,{label:"Max # Combinations",name:"limit",value:n.limit,type:"number",required:!0,inputProps:{min:1},onChange:r}),s.a.createElement(qe.a,{control:s.a.createElement(ze.a,{checked:n.empty,onChange:e=>t.changeCombinations({[e.target.name]:e.target.checked}),name:"empty",size:"small"}),label:"Include Empty Combinations"}))}),Pe=n(333),Ie=n(304),Re=n(308),De=n(307),Fe=n(303),_e=n(305),Je=n(306),Ge=n(339);const Ue=Object(Ee.a)(e=>({pointer:{cursor:"pointer"},cell:{position:"relative"},bar:{position:"absolute",left:0,top:"6px",bottom:"6px",backgroundColor:e.palette.text.primary,opacity:.3}}));var He=Object(a.a)(()=>{const e=be(),t=Ue(),n=e.ui.setTable,a=e.sets,r=a.length,i=e.selectedSets,o=e.selectedSets.size,l=t=>()=>{const a=n.orderBy===t&&"asc"===n.order;e.ui.changeSetTableOptions({order:a?"desc":"asc",orderBy:t})},c=e.sortedSets.reduce((e,t)=>Math.max(e,t.cardinality),0);return s.a.createElement(Te,{id:"sets",title:"Set Chooser"},s.a.createElement(Fe.a,null,s.a.createElement(Ie.a,{size:"small"},s.a.createElement(_e.a,null,s.a.createElement(Je.a,null,s.a.createElement(De.a,{padding:"checkbox"},s.a.createElement(Pe.a,{indeterminate:o>0&&o<r,checked:r>0&&o===r,onChange:t=>{if(t.target.checked){const t=a.map(e=>e.name);e.setSelectedSets(new Set(t))}else e.setSelectedSets(new Set([]))},inputProps:{"aria-label":"select all sets"}})),s.a.createElement(De.a,{padding:"none",sortDirection:"name"===n.orderBy&&n.order},s.a.createElement(Ge.a,{active:"name"===n.orderBy,direction:"name"===n.orderBy?n.order:"asc",onClick:l("name")},"Name")),s.a.createElement(De.a,{sortDirection:"cardinality"===n.orderBy&&n.order},s.a.createElement(Ge.a,{active:"cardinality"===n.orderBy,direction:"cardinality"===n.orderBy?n.order:"asc",onClick:l("cardinality")},"Cardinality")))),e.ui.sidePanelExpanded.has("sets")&&s.a.createElement(Re.a,null,e.sortedSets.map(n=>{const a=(r=n.name,i.has(r));var r,o;return s.a.createElement(Je.a,{hover:!0,onClick:t=>((t,n)=>{const a=new Set(i);a.has(n)?a.delete(n):a.add(n),e.setSelectedSets(a)})(0,n.name),role:"checkbox",tabIndex:-1,key:n.name,selected:a,className:t.pointer},s.a.createElement(De.a,{padding:"checkbox"},s.a.createElement(Pe.a,{checked:a})),s.a.createElement(De.a,{component:"th",scope:"row",padding:"none"},n.name),s.a.createElement(De.a,{align:"right",className:t.cell},s.a.createElement("div",{className:t.bar,style:{width:(o=n.cardinality,Math.round(100*o/c)+"%")}}),n.cardinality))})))))});const We=Object(Ee.a)(()=>({pointer:{cursor:"pointer"}}));var Ve=Object(a.a)(()=>{var e,t;const n=be(),a=We(),r=null!==(t=null===(e=n.dataset)||void 0===e?void 0:e.attrs)&&void 0!==t?t:[],i=n.selectedAttrs,o=i.size,l=r.length;if(0===l)return null;return s.a.createElement(Te,{id:"attrs",title:"Attribute Chooser"},s.a.createElement(Fe.a,null,s.a.createElement(Ie.a,{size:"small"},s.a.createElement(_e.a,null,s.a.createElement(Je.a,null,s.a.createElement(De.a,{padding:"checkbox"},s.a.createElement(Pe.a,{indeterminate:o>0&&o<l,checked:l>0&&o===l,onChange:e=>{if(e.target.checked){const e=r;n.setSelectedAttrs(new Set(e))}else n.setSelectedAttrs(new Set([]))},inputProps:{"aria-label":"select all attributes"}})),s.a.createElement(De.a,{padding:"none"},"Name"))),n.ui.sidePanelExpanded.has("attrs")&&s.a.createElement(Re.a,null,r.map(e=>{const t=(r=e,i.has(r));var r;return s.a.createElement(Je.a,{hover:!0,onClick:t=>((e,t)=>{const a=new Set(i);a.has(t)?a.delete(t):a.add(t),n.setSelectedAttrs(a)})(0,e),role:"checkbox",tabIndex:-1,key:e,selected:t,className:a.pointer},s.a.createElement(De.a,{padding:"checkbox"},s.a.createElement(Pe.a,{checked:t})),s.a.createElement(De.a,{component:"th",scope:"row",padding:"none"},e))})))))}),Qe=n(289);const Ke=Object(Ee.a)(e=>({wrapper:{overflow:"auto",position:"relative",width:"15vw",borderRight:"1px solid "+e.palette.primary.main},root:{position:"absolute",left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"}}));var Ye=Object(a.a)(()=>{const e=Ke();return s.a.createElement(Qe.a,{className:e.wrapper},s.a.createElement("div",{className:e.root},s.a.createElement($e,null),s.a.createElement(He,null),s.a.createElement(Ve,null),s.a.createElement(Le,null)))}),Ze=n(332),Xe=n(291),et=Object(a.a)(()=>{const e=be(),t=e.props,n=t=>e.changeProps({[t.target.name]:t.target.value});return s.a.createElement(Te,{id:"theme",title:"Customize Theme"},s.a.createElement(Be.a,{label:"Theme",value:t.theme,select:!0,required:!0,onChange:t=>e.changeProps({theme:"dark"===String(t.target.value)?"dark":"light"})},s.a.createElement(Me.a,{value:"dark"},"Dark Theme"),s.a.createElement(Me.a,{value:"light"},"Light Theme")),s.a.createElement(Be.a,{label:"Bar Color",required:!0,name:"color",value:t.color,type:"color",onChange:n}),s.a.createElement(Be.a,{label:"Text Color",required:!0,name:"textColor",value:t.textColor,type:"color",onChange:n}),s.a.createElement(Be.a,{label:"Selection Color",name:"selectionColor",value:t.selectionColor,type:"color",required:!0,onChange:n}),s.a.createElement(Be.a,{label:"Hover Hint Color",name:"hoverHintColor",value:t.hoverHintColor,type:"color",required:!0,onChange:n}),s.a.createElement(Be.a,{label:"Not Member Dot Color",name:"notMemberColor",value:t.notMemberColor,type:"color",required:!0,onChange:n}),s.a.createElement(Be.a,{label:"Alternating Background Color",name:"alternatingBackgroundColor",value:t.alternatingBackgroundColor,type:"color",onChange:n}))}),tt=n(298),nt=n(300),at=n(311),rt=n(309),st=n(310),it=n(197),ot=n.n(it),lt=n(218),ct=n.n(lt),ut=n(312),dt=n(334);const mt=Object(Ee.a)(()=>({root:{}})),pt=Object(a.a)(()=>{const e=be(),t=e.selection;return s.a.createElement(nt.a,null,s.a.createElement(rt.a,{onClick:()=>e.persistSelection()},s.a.createElement(dt.a,{title:"Persist Selection"},s.a.createElement(Xe.a,{edge:"start","aria-label":"persist"},s.a.createElement(ct.a,{style:{color:le}})))),s.a.createElement(st.a,{primary:`${t.name}: ${t.cardinality}`}))}),ft=Object(a.a)(({query:e,visible:t})=>{const n=be();return s.a.createElement(nt.a,null,s.a.createElement(rt.a,{onClick:()=>n.toggleQueryVisibility(e)},s.a.createElement(Pe.a,{edge:"start",checked:t,tabIndex:-1,disableRipple:!0,style:{color:e.color}})),s.a.createElement(st.a,{primary:`${e.name}: ${e.set.cardinality}`}),s.a.createElement(at.a,null,s.a.createElement(dt.a,{title:"Remove Query"},s.a.createElement(Xe.a,{edge:"end","aria-label":"delete",onClick:()=>n.deleteQuery(e)},s.a.createElement(ot.a,null)))))});var ht=Object(a.a)(()=>{const e=be(),t=mt();return s.a.createElement(Te,{id:"queries",title:"Queries",className:t.root},s.a.createElement(tt.a,{dense:!0},e.selection&&s.a.createElement(s.a.Fragment,null,s.a.createElement(pt,null),s.a.createElement(ut.a,null)),e.queries.map(({q:e,visible:t})=>s.a.createElement(ft,{key:e.name+e.color,query:e,visible:t}))))}),yt=n(313),bt=n(327),gt=n(314);function vt({label:e,value:t,onChange:n}){const a=Number.parseFloat(t),r=t.slice(a.toString().length);return s.a.createElement(Be.a,{label:e,value:a,type:"number",inputProps:{min:0,step:1},InputProps:{endAdornment:s.a.createElement(yt.a,{position:"end"},s.a.createElement(bt.a,{value:r,onChange:e=>{n(`${a}${e.target.value}`)}},s.a.createElement(Me.a,{value:"px"},"px"),s.a.createElement(Me.a,{value:"pt"},"pt")))},required:!0,onChange:e=>{n(`${e.target.value}${r}`)}})}var wt=Object(a.a)(()=>{const e=be(),t=e.props,n=t=>e.changeProps({[t.target.name]:t.target.value}),a=t=>e.changeProps({[t.target.name]:Number.parseFloat(t.target.value)});return s.a.createElement(Te,{id:"customize",title:"Customize"},s.a.createElement(Be.a,{label:"Set Name",name:"setName",value:t.setName,required:!0,onChange:n}),s.a.createElement(Be.a,{label:"Set Axis Offset",name:"setNameAxisOffset",value:t.setNameAxisOffset,type:"number",required:!0,onChange:a}),s.a.createElement(Be.a,{label:"Combination Name",name:"combinationName",value:t.combinationName,required:!0,onChange:n}),s.a.createElement(Be.a,{label:"Combination Axis Offset",name:"combinationNameAxisOffset",value:t.combinationNameAxisOffset,type:"number",required:!0,onChange:a}),s.a.createElement(Be.a,{label:"Font Family",name:"fontFamily",value:t.fontFamily,required:!0,onChange:n}),s.a.createElement(vt,{label:"Chart Font Size",value:t.fontSizes.chartLabel,onChange:t=>e.changeFontSize({chartLabel:t})}),s.a.createElement(vt,{label:"Set Label Font Size",value:t.fontSizes.setLabel,onChange:t=>e.changeFontSize({setLabel:t})}),s.a.createElement(ut.a,null),s.a.createElement(Be.a,{label:"Axis Scale",value:"linear"===t.numericScale?"linear":"log",select:!0,required:!0,onChange:t=>e.changeProps({numericScale:"log"===String(t.target.value)?"log":"linear"})},s.a.createElement(Me.a,{value:"linear"},"Linear Scale"),s.a.createElement(Me.a,{value:"log"},"Log Scale")),s.a.createElement(Be.a,{label:"Bar Padding",name:"barPadding",value:t.barPadding,type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:a}),s.a.createElement(Be.a,{label:"Dot Padding",name:"dotPadding",value:t.dotPadding,type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:a}),s.a.createElement(Be.a,{label:"Chart Padding",name:"padding",value:t.padding,type:"number",required:!0,onChange:a}),s.a.createElement(Be.a,{label:"Combination to Set Height Ratio",value:t.heightRatios[0],type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:t=>{const n=Number.parseFloat(t.target.value);e.changeProps({heightRatios:[n,1-n]})}}),s.a.createElement(Be.a,{label:"Combination to Set Width Ratio",value:t.widthRatios[2],type:"number",required:!0,inputProps:{min:0,max:1,step:.05},onChange:n=>{const a=Number.parseFloat(n.target.value),r=t.widthRatios[0]+t.widthRatios[1],s=(1-a)*t.widthRatios[0]/r,i=(1-a)*t.widthRatios[1]/r;e.changeProps({widthRatios:[s,i,a]})}}),s.a.createElement(Be.a,{label:"Set to Label Width Ratio",value:t.widthRatios[0]/(t.widthRatios[0]+t.widthRatios[1]),type:"number",required:!0,inputProps:{min:0,max:1,step:.05},onChange:n=>{const a=Number.parseFloat(n.target.value),r=t.widthRatios[0]+t.widthRatios[1],s=a*r,i=(1-a)*r;e.changeProps({widthRatios:[s,i,t.widthRatios[2]]})}}),s.a.createElement(ut.a,null),s.a.createElement(gt.a,{onClick:e.resetProps},"Reset"))});const St=Object(Ee.a)(()=>({root:{}}));var Et=Object(a.a)(()=>{var e,t;const n=be(),a=St(),r=n.ui.elemTable,i=e=>()=>{const t=r.orderBy===e&&"asc"===r.order;n.ui.changeElemTableOptions({order:t?"desc":"asc",orderBy:e})},o=n.sortedSelectedElems,l=null!==(t=null===(e=n.dataset)||void 0===e?void 0:e.attrs)&&void 0!==t?t:[];return s.a.createElement(Te,{id:"elems",title:`Selected ${o.length.toLocaleString()} Items`},s.a.createElement(Fe.a,null,s.a.createElement(Ie.a,{size:"small",className:a.root},s.a.createElement(_e.a,null,s.a.createElement(Je.a,null,s.a.createElement(De.a,{padding:"none",sortDirection:"name"===r.orderBy&&r.order},s.a.createElement(Ge.a,{active:"name"===r.orderBy,direction:"name"===r.orderBy?r.order:"asc",onClick:i("name")},"Name")),l.map(e=>s.a.createElement(De.a,{key:e,sortDirection:r.orderBy==="attrs."+e&&r.order},s.a.createElement(Ge.a,{active:r.orderBy==="attrs."+e,direction:r.orderBy==="attrs."+e?r.order:"asc",onClick:i("attrs."+e)},e))))),n.ui.sidePanelExpanded.has("elems")&&s.a.createElement(Re.a,null,o.map(e=>s.a.createElement(Je.a,{hover:!0,tabIndex:-1,key:e.name},s.a.createElement(De.a,{component:"th",scope:"row",padding:"none"},e.name),l.map(t=>s.a.createElement(De.a,{key:t,align:"right"},e.attrs[t]))))))))});const xt=Object(Ee.a)(e=>({wrapper:{overflow:"auto",position:"relative",width:"15vw",borderLeft:"1px solid "+e.palette.primary.main},root:{position:"absolute",left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"}}));var kt=Object(a.a)(()=>{const e=xt();return s.a.createElement(Qe.a,{className:e.wrapper},s.a.createElement("div",{className:e.root},s.a.createElement(ht,null),s.a.createElement(Et,null),s.a.createElement(et,null),s.a.createElement(wt,null)))}),Ot=n(239),jt=n(315);const Ct=Object(Ee.a)(()=>({root:{display:"flex",alignItems:"center",justifyContent:"center"}}));var Nt=function({children:e}){const t=Ct();return s.a.createElement("div",{className:t.root},null!=e?e:s.a.createElement(jt.a,null))},At=n(64);const Tt=Object(Ee.a)(()=>({root:{display:"flex",padding:"1rem",flexGrow:1,"& > *":{flexGrow:1}},wrapper:{position:"absolute"}})),Lt=Object(r.lazy)(()=>Promise.resolve().then(n.bind(null,211))),qt=Object(a.a)(({width:e,height:t})=>{const n=be(),a=Tt();return s.a.createElement("div",null,s.a.createElement(r.Suspense,{fallback:s.a.createElement(At.a,null)},e>0&&t>0&&s.a.createElement(Lt,Object.assign({width:e,height:t,className:a.wrapper},n.props,{sets:n.visibleSets,queries:n.queriesAndSelection,combinations:n.visibleCombinations,selection:n.hover,onHover:n.setHover,onClick:n.setSelection,exportButtons:!1,setAddons:n.visibleSetAddons,combinationAddons:n.visibleCombinationAddons,ref:n.ui.ref}))))});function Mt({width:e,height:t}){return s.a.createElement(qt,{width:e,height:t})}var zt=Object(a.a)(()=>{const e=be(),t=Tt();return s.a.createElement("div",{className:t.root},e.sets.length>0&&e.dataset&&s.a.createElement(Ot.a,{handleWidth:!0,handleHeight:!0,render:Mt}),!e.dataset&&s.a.createElement(Nt,null,"Choose Dataset"),0===e.sets.length&&e.dataset&&s.a.createElement(Nt,null))}),Bt=n(316),$t=n(317),Pt=n(221),It=n.n(Pt),Rt=n(224),Dt=n.n(Rt),Ft=n(225),_t=n.n(Ft),Jt=n(227),Gt=n.n(Jt),Ut=n(226),Ht=n.n(Ut),Wt=n(228),Vt=n.n(Wt),Qt=n(229),Kt=n.n(Qt),Yt=n(230),Zt=n.n(Yt),Xt=n(231),en=n.n(Xt),tn=n(232),nn=n.n(tn),an=n(338),rn=n(319),sn=n(223),on=n.n(sn),ln=n(222),cn=n.n(ln),un=n(233),dn=n.n(un),mn=n(118);const pn=Object(Ee.a)(e=>({menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{},select:{marginLeft:"1rem",minWidth:"20em",color:e.palette.primary.contrastText},menu:{display:"flex",justifyContent:"space-between"},speeddial:{position:"absolute",right:e.spacing(2),bottom:-e.spacing(2)},grow:{flexGrow:1},line:{display:"flex",alignItems:"center"},file:{position:"absolute",left:-1e4,top:-1e4,visibility:"hidden"}}));function fn(e){if(!e)return"Choose Dataset...";const t=e.setCount?e.setCount+" sets":null,n=e.attrs.length>0?e.attrs.length+" attributes":null;return t||n?`${e.name} (${[t,n].filter(Boolean).join(", ")})`:e.name}var hn=Object(a.a)(({className:e})=>{var t;const n=be(),a=pn(),r=s.a.useRef(null);return s.a.createElement(Bt.a,{position:"fixed",className:e},s.a.createElement($t.a,null,s.a.createElement(Xe.a,{edge:"start",className:Object(mn.a)(a.menuButton,n.ui.menu&&a.hide),color:"inherit","aria-label":"menu",onClick:n.ui.toggleMenu},s.a.createElement(It.a,null)),s.a.createElement("div",{className:a.line,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{1===e.dataTransfer.files.length&&(e.preventDefault(),n.importFile(e.dataTransfer.files[0]))}},s.a.createElement(xe.a,{variant:"h6",className:a.title},"UpSet.js: ",s.a.createElement(bt.a,{className:a.select,onChange:e=>{n.selectDataSet(e.target.value)},value:(null===(t=n.dataset)||void 0===t?void 0:t.id)||"",renderValue:()=>fn(n.dataset)},s.a.createElement(Me.a,{value:""},"Choose Dataset..."),n.datasets.map(e=>s.a.createElement(Me.a,{key:e.id,value:e.id,className:a.menu},s.a.createElement("span",null,fn(e)),null!=e.uid&&s.a.createElement(Xe.a,{onClick:()=>n.deleteDataSet(e),edge:"end",size:"small"},s.a.createElement(ot.a,null)))))),s.a.createElement(dt.a,{title:"CSV file or JSON UpSet.js Dump file"},s.a.createElement(Xe.a,{onClick:()=>{r.current&&r.current.click()}},s.a.createElement(cn.a,null)))),s.a.createElement("div",{className:a.grow},s.a.createElement("input",{ref:r,type:"file",className:a.file,onChange:e=>{const t=e.target.files[0];e.target.value="",n.importFile(t)},accept:".json,.csv,application/json,text/csv"})),s.a.createElement(an.a,{ariaLabel:"Export",icon:s.a.createElement(on.a,null),direction:"left",hidden:null==n.dataset,className:a.speeddial,onClose:()=>n.ui.setSpeedDial(!1),onOpen:()=>n.ui.setSpeedDial(!0),open:n.ui.speedDial},s.a.createElement(rn.a,{icon:s.a.createElement(Dt.a,null),tooltipTitle:"PNG Image",tooltipPlacement:"bottom",onClick:n.exportPNG}),s.a.createElement(rn.a,{icon:s.a.createElement(_t.a,null),tooltipTitle:"SVG Image",tooltipPlacement:"bottom",onClick:n.exportSVG}),s.a.createElement(rn.a,{icon:s.a.createElement(_t.a,null),tooltipTitle:"Vega Lite Specification (static)",tooltipPlacement:"bottom",onClick:n.exportVega}),s.a.createElement(rn.a,{icon:s.a.createElement(Ht.a,null),tooltipTitle:"CSV File",tooltipPlacement:"bottom",onClick:n.exportCSV}),s.a.createElement(rn.a,{icon:s.a.createElement(Gt.a,null),tooltipTitle:"JSON File",tooltipPlacement:"bottom",onClick:n.exportJSON}),s.a.createElement(rn.a,{icon:s.a.createElement(Gt.a,null),tooltipTitle:"Static JSON File",tooltipPlacement:"bottom",onClick:n.exportStaticJSON}),s.a.createElement(rn.a,{icon:s.a.createElement(Vt.a,null),tooltipTitle:"Export to Codepen.io",tooltipPlacement:"bottom",onClick:n.exportCodepen}),s.a.createElement(rn.a,{icon:s.a.createElement(Kt.a,null),tooltipTitle:"Export to JSFiddle",tooltipPlacement:"bottom",onClick:n.exportJSFiddle}),s.a.createElement(rn.a,{icon:s.a.createElement(Zt.a,null),tooltipTitle:"Export to CodeSandbox.io",tooltipPlacement:"bottom",onClick:n.exportCodesandbox}),s.a.createElement(rn.a,{icon:s.a.createElement(en.a,null),tooltipTitle:"Create R Script",tooltipPlacement:"bottom",onClick:n.exportR}),s.a.createElement(rn.a,{icon:s.a.createElement(nn.a,null),tooltipTitle:"Create Jupyter Notebook",tooltipPlacement:"bottom",onClick:n.exportPython}),s.a.createElement(rn.a,{icon:s.a.createElement(dn.a,null),tooltipTitle:"Open Embedded Version",tooltipPlacement:"bottom",onClick:n.sharedEmbedded}))))}),yn=n(321),bn=n(236),gn=n.n(bn),vn=n(235),wn=n.n(vn),Sn=n(234),En=n.n(Sn),xn=n(320);const kn=Object(Ee.a)(()=>({grow:{flexGrow:1}}));var On=Object(a.a)(()=>{const e=kn(),t=be();return s.a.createElement(s.a.Fragment,null,s.a.createElement(ut.a,null),s.a.createElement(tt.a,null,s.a.createElement(xn.a,null,"Options"),s.a.createElement(nt.a,{button:!0,onClick:t.ui.toggleZen},s.a.createElement(rt.a,null,s.a.createElement(ze.a,{checked:t.ui.zen})),s.a.createElement(st.a,null,"Zen Mode")),s.a.createElement(nt.a,{button:!0,onClick:t.ui.toggleTheme},s.a.createElement(rt.a,null,s.a.createElement(ze.a,{checked:"dark"===t.ui.theme})),s.a.createElement(st.a,null,"Dark Theme"))),s.a.createElement("div",{className:e.grow}),s.a.createElement(ut.a,null),s.a.createElement(tt.a,{dense:!0,disablePadding:!0},s.a.createElement(xn.a,null,"About"),s.a.createElement(nt.a,null,s.a.createElement(rt.a,null,s.a.createElement(En.a,null)),s.a.createElement(st.a,null,"v","1.0.0")),s.a.createElement(nt.a,null,s.a.createElement(rt.a,null,s.a.createElement(wn.a,null)),s.a.createElement(st.a,null,s.a.createElement(yn.a,{href:"https://github.com/upsetjs/upsetjs/blob/master/LICENSE.md",target:"_blank",rel:"noopener noreferrer"},"AGPL-3.0 and commercial license available"))),s.a.createElement(nt.a,null,s.a.createElement(rt.a,null,s.a.createElement(gn.a,null)),s.a.createElement(st.a,null,s.a.createElement(yn.a,{href:"https://www.sgratzl.com",target:"_blank",rel:"noopener noreferrer"},"Samuel Gratzl"),", 2020"))))}),jn=n(335),Cn=n(328);function Nn(e){return s.a.createElement(Cn.a,Object.assign({elevation:6,variant:"filled"},e))}var An=Object(a.a)(()=>{const e=be();return s.a.createElement(jn.a,{open:null!=e.ui.toast,autoHideDuration:6e3,onClose:e.ui.closeToast},e.ui.toast?s.a.createElement(Nn,{onClose:e.ui.closeToast,severity:e.ui.toast.severity},e.ui.toast.message,e.ui.toast.link&&s.a.createElement("a",{href:e.ui.toast.link.href,target:"_blank",rel:"noopener noreferrer"},e.ui.toast.link.alt)):void 0)}),Tn=n(237),Ln=n.n(Tn);const qn=Object(Ee.a)(e=>({root:{width:"100vw",height:"100vh",display:"flex",flexGrow:1},appBar:{},appBarShift:{width:"calc(100% - 240px)",marginLeft:240},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object.assign(Object.assign({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{justifyContent:"flex-end"}),content:{display:"flex",flexDirection:"column",flexGrow:1,marginLeft:-240},main:{display:"flex",flexGrow:1},contentShift:{marginLeft:0}}));var Mn=Object(a.a)(()=>{const e=qn(),t=be();return s.a.createElement("div",{className:e.root},s.a.createElement(hn,{className:Object(mn.a)(e.appBar,{[e.appBarShift]:t.ui.menu})}),s.a.createElement(Ze.a,{className:e.drawer,variant:"persistent",anchor:"left",open:t.ui.menu,classes:{paper:e.drawerPaper}},s.a.createElement("div",{className:e.drawerHeader},s.a.createElement(Xe.a,{onClick:t.ui.toggleMenu},s.a.createElement(Ln.a,null))),s.a.createElement(On,null)),s.a.createElement("div",{className:Object(mn.a)(e.content,{[e.contentShift]:t.ui.menu})},s.a.createElement("div",{className:e.drawerHeader}),s.a.createElement("main",{className:e.main},!t.ui.zen&&s.a.createElement(Ye,null),s.a.createElement(zt,null),!t.ui.zen&&s.a.createElement(kt,null))),s.a.createElement(An,null))});const zn=Object(we.a)({palette:{type:"dark"}}),Bn=Object(we.a)({palette:{type:"light"}}),$n=Object(a.a)(()=>{const e=Object(ve.a)("(prefers-color-scheme: dark)"),t=be();return Object(r.useEffect)(()=>{null==t.ui.defaultTheme&&(t.ui.defaultTheme=e?"dark":"light")}),s.a.createElement(Se.a,{theme:"dark"===t.ui.defaultTheme||null==t.ui.defaultTheme&&e?zn:Bn},s.a.createElement(ge.a,null),s.a.createElement(Mn,null))});function Pn(){return s.a.createElement(ye,null,s.a.createElement($n,null))}},18:function(e,t,n){"use strict";function a(e){return fetch("https://cors-anywhere.herokuapp.com/"+e).then(e=>e.json())}function r(e){return new Promise((t,n)=>{const a=new FileReader;a.addEventListener("load",()=>{const e=JSON.parse(a.result);t(e)}),a.addEventListener("error",()=>{n(a.error)}),a.readAsText(e)})}n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s.g})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o}));var s=n(38);function i(e,t,n=!1){return e.map(e=>{if(0===t.length)return e.name;if(n)return[e.name].concat(t.map(t=>e.attrs[t]));const a={name:e.name};return t.forEach(t=>a[t]=e.attrs[t]),a})}function o(e,t){return e.map(e=>{var n;if("string"==typeof e||"number"==typeof e)return{name:String(e),attrs:{}};const a=null!==(n=e.attrs)&&void 0!==n?n:{};return Array.isArray(e)?(t.forEach((t,n)=>a[t]=e[n+1]),{name:e[0],attrs:a}):(t.forEach(t=>{void 0!==e[t]&&(a[t]=e[t])}),{name:e.name,attrs:a})})}},209:function(e){e.exports=JSON.parse('[{"name":"Aegon Targaryen","episodes":0,"words":0,"sets":["royal","was killed","Targaryen"]},{"name":"Aeron Greyjoy","episodes":2,"words":206,"sets":["Greyjoy","male"]},{"name":"Aerys II Targaryen","episodes":0,"words":0,"sets":["royal","was killed","has killed","Targaryen"]},{"name":"Alton Lannister","episodes":3,"words":339,"sets":["was killed","Lannister","male"]},{"name":"Arya Stark","episodes":58,"words":6465,"sets":["has killed","Stark","female"]},{"name":"Balon Greyjoy","episodes":4,"words":809,"sets":["was killed","Greyjoy","male"]},{"name":"Baratheon Guard","episodes":0,"words":0,"sets":["Baratheon"]},{"name":"Benjen Stark","episodes":6,"words":633,"sets":["was killed","Stark","male"]},{"name":"Black Walder Rivers","episodes":4,"words":173,"sets":["was killed","has killed","Frey","male"]},{"name":"Bran Stark","episodes":38,"words":3260,"sets":["royal","Stark","male"]},{"name":"Brandon Stark","episodes":0,"words":0,"sets":["was killed","Stark"]},{"name":"Brynden Tully","episodes":6,"words":762,"sets":["Tully","male"]},{"name":"Catelyn Stark","episodes":25,"words":3496,"sets":["was killed","has killed","Stark","Tully","female"]},{"name":"Cersei Lannister","episodes":60,"words":15234,"sets":["royal","was killed","has killed","Lannister","Baratheon","female"]},{"name":"Daenerys Targaryen","episodes":61,"words":12560,"sets":["royal","was killed","has killed","Targaryen","female"]},{"name":"Doran Martell","episodes":5,"words":526,"sets":["was killed","Martell","male"]},{"name":"Drogon","episodes":0,"words":0,"sets":["has killed","Targaryen","male"]},{"name":"Eddard Stark","episodes":11,"words":3511,"sets":["was killed","has killed","Stark","male"]},{"name":"Edmure Tully","episodes":7,"words":684,"sets":["Tully","male"]},{"name":"Elia Martell","episodes":0,"words":0,"sets":["royal","was killed","Martell"]},{"name":"Ellaria Sand","episodes":12,"words":805,"sets":["has killed","Martell","female"]},{"name":"Euron Greyjoy","episodes":9,"words":1328,"sets":["was killed","has killed","Greyjoy","male"]},{"name":"Gendry","episodes":21,"words":1894,"sets":["has killed","Baratheon","male"]},{"name":"Ghost","episodes":0,"words":0,"sets":["has killed","Stark","male","direwolf"]},{"name":"Grey Wind","episodes":0,"words":0,"sets":["was killed","has killed","Stark","male","direwolf"]},{"name":"Hoster Tully","episodes":0,"words":0,"sets":["Tully","male"]},{"name":"Jaime Lannister","episodes":53,"words":11728,"sets":["was killed","has killed","Lannister","male"]},{"name":"Jeor Mormont","episodes":12,"words":1601,"sets":["was killed","Mormont","male"]},{"name":"Joffrey Baratheon","episodes":21,"words":3303,"sets":["royal","was killed","has killed","Baratheon","male"]},{"name":"Jon Snow","episodes":60,"words":12592,"sets":["royal","was killed","has killed","Stark","Targaryen","male"]},{"name":"Jorah Mormont","episodes":49,"words":4806,"sets":["was killed","has killed","Mormont","male"]},{"name":"Kevan Lannister","episodes":9,"words":492,"sets":["was killed","Lannister","male"]},{"name":"Kitty Frey","episodes":0,"words":0,"sets":["Frey","female"]},{"name":"Lady","episodes":0,"words":0,"sets":["was killed","Stark","female","direwolf"]},{"name":"Lancel Lannister","episodes":13,"words":752,"sets":["was killed","Lannister","male"]},{"name":"Loras Tyrell","episodes":15,"words":1093,"sets":["was killed","Tyrell","male"]},{"name":"Lothar Frey","episodes":4,"words":163,"sets":["was killed","has killed","Frey","male"]},{"name":"Lyanna Mormont","episodes":8,"words":565,"sets":["was killed","has killed","Mormont","female"]},{"name":"Lyanna Stark","episodes":1,"words":63,"sets":["was killed","Stark","female"]},{"name":"Lysa Arryn","episodes":5,"words":1320,"sets":["was killed","has killed","Arryn","Tully","female"]},{"name":"Mace Tyrell","episodes":10,"words":483,"sets":["was killed","Tyrell","male"]},{"name":"Maester Aemon","episodes":11,"words":1350,"sets":["was killed","Targaryen","male"]},{"name":"Margaery Tyrell","episodes":25,"words":3534,"sets":["was killed","Tyrell","female"]},{"name":"Martyn Lannister","episodes":2,"words":43,"sets":["was killed","Lannister","male"]},{"name":"Myrcella Baratheon","episodes":7,"words":277,"sets":["royal","was killed","Baratheon","female"]},{"name":"Ned Umber","episodes":2,"words":21,"sets":["was killed","Umber","male"]},{"name":"Nymeria","episodes":0,"words":0,"sets":["Stark","female","direwolf"]},{"name":"Nymeria Sand","episodes":7,"words":147,"sets":["was killed","Martell","female"]},{"name":"Obara Sand","episodes":7,"words":212,"sets":["was killed","has killed","Martell","female"]},{"name":"Oberyn Martell","episodes":7,"words":1912,"sets":["was killed","Martell","male"]},{"name":"Olenna Tyrell","episodes":18,"words":3924,"sets":["was killed","has killed","Tyrell","female"]},{"name":"Ramsay Snow","episodes":20,"words":3329,"sets":["was killed","has killed","Bolton","male"]},{"name":"Renly Baratheon","episodes":8,"words":1400,"sets":["was killed","Baratheon","male"]},{"name":"Rhaegal","episodes":0,"words":0,"sets":["was killed","has killed","Targaryen","male"]},{"name":"Rhaegar Targaryen","episodes":1,"words":23,"sets":["royal","was killed","Targaryen","male"]},{"name":"Rhaella Targaryen","episodes":0,"words":0,"sets":["royal","Targaryen"]},{"name":"Rhaenys Targaryen","episodes":0,"words":0,"sets":["royal","was killed","Targaryen"]},{"name":"Rickard Stark","episodes":1,"words":27,"sets":["was killed","Stark","male"]},{"name":"Rickon Stark","episodes":7,"words":124,"sets":["was killed","Stark","male"]},{"name":"Robb Stark","episodes":21,"words":3920,"sets":["royal","was killed","has killed","Stark","male"]},{"name":"Robert Baratheon","episodes":7,"words":2608,"sets":["royal","was killed","has killed","Baratheon","male"]},{"name":"Roose Bolton","episodes":19,"words":2036,"sets":["was killed","has killed","Bolton","male"]},{"name":"Roslin Frey","episodes":1,"words":33,"sets":["Frey","female"]},{"name":"Sansa Stark","episodes":59,"words":8937,"sets":["royal","Stark","female"]},{"name":"Selyse Baratheon","episodes":7,"words":585,"sets":["was killed","has killed","Baratheon","female"]},{"name":"Shaggydog","episodes":0,"words":0,"sets":["was killed","Stark","male","direwolf"]},{"name":"Shireen Baratheon","episodes":8,"words":1046,"sets":["was killed","Baratheon","female"]},{"name":"Stannis Baratheon","episodes":24,"words":3607,"sets":["was killed","has killed","Baratheon","male"]},{"name":"Stevron Frey","episodes":1,"words":7,"sets":["Frey","male"]},{"name":"Summer","episodes":0,"words":0,"sets":["was killed","has killed","Stark","male","direwolf"]},{"name":"Talla Tarly","episodes":1,"words":79,"sets":["Tarly","female"]},{"name":"Theon Greyjoy","episodes":44,"words":5363,"sets":["was killed","has killed","Greyjoy","male"]},{"name":"Tommen Baratheon","episodes":14,"words":1400,"sets":["royal","was killed","has killed","Baratheon","male"]},{"name":"Trystane Martell","episodes":4,"words":109,"sets":["was killed","Martell","male"]},{"name":"Tyene Sand","episodes":7,"words":201,"sets":["was killed","has killed","Martell","female"]},{"name":"Tyrion Lannister","episodes":66,"words":27655,"sets":["has killed","Lannister","male"]},{"name":"Tywin Lannister","episodes":26,"words":5964,"sets":["was killed","Lannister","male"]},{"name":"Viserion","episodes":0,"words":0,"sets":["was killed","has killed","Targaryen","male"]},{"name":"Viserys Targaryen","episodes":5,"words":1177,"sets":["royal","was killed","Targaryen","male"]},{"name":"Walda Bolton","episodes":0,"words":0,"sets":["was killed","Bolton","Frey","female"]},{"name":"Walder Frey","episodes":6,"words":1648,"sets":["was killed","Frey","male"]},{"name":"Willem Lannister","episodes":1,"words":4,"sets":["was killed","Lannister","male"]},{"name":"Yara Greyjoy","episodes":14,"words":1829,"sets":["Greyjoy","female"]}]')},210:function(e){e.exports=JSON.parse('[{"name":"Alton Lannister","sets":["was killed","Lannister","male"]},{"name":"Arya Stark","sets":["Stark","female"]},{"name":"Benjen Stark","sets":["was killed","Stark","male"]},{"name":"Bran Stark","sets":["royal","Stark","male"]},{"name":"Brandon Stark","sets":["was killed","Stark"]},{"name":"Catelyn Stark","sets":["was killed","Stark","female"]},{"name":"Cersei Lannister","sets":["royal","was killed","Lannister","female"]},{"name":"Eddard Stark","sets":["was killed","Stark","male"]},{"name":"Jaime Lannister","sets":["was killed","Lannister","male"]},{"name":"Jon Snow","sets":["royal","was killed","Stark","male"]},{"name":"Kevan Lannister","sets":["was killed","Lannister","male"]},{"name":"Lancel Lannister","sets":["was killed","Lannister","male"]},{"name":"Lyanna Stark","sets":["was killed","Stark","female"]},{"name":"Martyn Lannister","sets":["was killed","Lannister","male"]},{"name":"Rickard Stark","sets":["was killed","Stark","male"]},{"name":"Rickon Stark","sets":["was killed","Stark","male"]},{"name":"Robb Stark","sets":["royal","was killed","Stark","male"]},{"name":"Sansa Stark","sets":["royal","Stark","female"]},{"name":"Tyrion Lannister","sets":["Lannister","male"]},{"name":"Tywin Lannister","sets":["was killed","Lannister","male"]},{"name":"Willem Lannister","sets":["was killed","Lannister","male"]}]')},211:function(e,t,n){"use strict";n.r(t),n.d(t,"UpSetJS",(function(){return V})),n.d(t,"downloadUrl",(function(){return w})),n.d(t,"exportSVG",(function(){return v})),n.d(t,"exportVegaLite",(function(){return E})),n.d(t,"fillDefaults",(function(){return W}));var a=n(0),r=n.n(a),s=n(38);function i(){}function o(e){return e?function(t){return function(n){return e.call(this,t,n.nativeEvent)}}:i}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function c(e){var t=0,n=0;return function(a){var r=0;return"before"===a.position?r=-(t+=a.size):(r=e+n,n+=a.size),r}}function u(e){return"upset-"+Math.random().toString(36).slice(4)}function d(e,t,n,a,r,i,o,l,c,d,m,p){var f,h="linear"===(f=a)?s.o:"log"===f?s.p:f,y=function(e){return"band"===e?s.e:e}(r),b=function(e){return Array.isArray(e)}(t)?t:Object(s.k)(e,t),g=y(b.map(d),n.cs.w,n.padding),v=b.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),w=h(v,[n.cs.h,i],{orientation:"vertical",fontSizeHint:c}),S=function(e){return Math.floor(i/1.4*.7*w.tickFormat()(e).length)},E=e.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),x=S(E),k=S(v),O=h(E,[n.sets.w,x],{orientation:"horizontal",fontSizeHint:c}),j=e.map(d),C=y(j.slice().reverse(),n.sets.h,n.padding),N=Math.min(C.bandwidth(),g.bandwidth())/2*o,A=Math.max(2,Math.min(C.bandwidth(),g.bandwidth())/2*l);return{id:p||u(),r:N,triangleSize:A,sets:{v:e,keys:j,rv:e.slice().reverse(),x:O,xAxisWidth:n.sets.w-x,y:function(e){return C(d(e))},bandWidth:C.bandwidth(),cy:C.bandwidth()/2+n.cs.h,format:O.tickFormat(),labelOffset:i+9+2},cs:{v:b,keys:b.map(d),x:function(e){return g(d(e))},y:w,yAxisWidth:n.cs.h-i,cx:g.bandwidth()/2,bandWidth:g.bandwidth(),format:w.tickFormat(),has:function(e,t){var n=d(t);return Array.from(e.sets).some((function(e){return d(e)===n}))},labelOffset:k+9+6},toKey:d,toElemKey:m}}n.d(t,"asCombination",(function(){return s.a})),n.d(t,"asCombinations",(function(){return s.b})),n.d(t,"asSet",(function(){return s.c})),n.d(t,"asSets",(function(){return s.d})),n.d(t,"bandScale",(function(){return s.e})),n.d(t,"extractSets",(function(){return s.f})),n.d(t,"fromDump",(function(){return s.g})),n.d(t,"fromIndicesArray",(function(){return s.h})),n.d(t,"fromSetName",(function(){return s.i})),n.d(t,"fromStaticDump",(function(){return s.j})),n.d(t,"generateCombinations",(function(){return s.k})),n.d(t,"isCalcQuery",(function(){return s.l})),n.d(t,"isElemQuery",(function(){return s.m})),n.d(t,"isSetQuery",(function(){return s.n})),n.d(t,"linearScale",(function(){return s.o})),n.d(t,"logScale",(function(){return s.p})),n.d(t,"powerSet",(function(){return s.q})),n.d(t,"queryElemOverlap",(function(){return s.r})),n.d(t,"queryOverlap",(function(){return s.s})),n.d(t,"setElemIntersectionFactory",(function(){return s.t})),n.d(t,"setElemOverlap",(function(){return s.u})),n.d(t,"setElemOverlapFactory",(function(){return s.v})),n.d(t,"setOverlap",(function(){return s.w})),n.d(t,"setOverlapFactory",(function(){return s.x})),n.d(t,"toDump",(function(){return s.y})),n.d(t,"toIndicesArray",(function(){return s.z})),n.d(t,"toKey",(function(){return s.A})),n.d(t,"toStaticDump",(function(){return s.B})),n.d(t,"validators",(function(){return s.C}));var m={},p=[],f={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px"},h=[.18,.12,.7],y=[.6,.4],b={type:"intersection"};function g(e,t){var n=e.dataset.theme,a=e.cloneNode(!0);return a.style.backgroundColor="dark"===n?"#303030":"white",t&&Array.from(a.querySelectorAll(t)).forEach((function(e){return e.remove()})),(new XMLSerializer).serializeToString(a)}function v(e,t){var n=t.type,a=void 0===n?"png":n,r=t.title,s=void 0===r?"UpSet":r,i=t.toRemove,o=new Blob([g(e,i)],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(o);return"svg"===a?(w(l,s+"."+a,e.ownerDocument),URL.revokeObjectURL(l),Promise.resolve()):function(e,t){var n=t.ownerDocument.createElement("canvas"),a=t.getBoundingClientRect();n.width=a.width,n.height=a.height;var r=n.getContext("2d"),s=new Image(n.width,n.height);return new Promise((function(t){s.onload=function(){r.drawImage(s,0,0);var e=n.toDataURL("image/png");t(e)},s.src=e}))}(l,e).then((function(t){w(t,s+"."+a,e.ownerDocument),URL.revokeObjectURL(l)}))}function w(e,t,n){var a=n.createElement("a");a.href=e,a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",a.download=t,document.body.appendChild(a),a.click(),a.remove()}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t){var n=(void 0===t?{}:t).title,a=void 0===n?"UpSet":n,r=function(e,t){var n,a,r,s,i,o,l=null!==(n=e.getComputedStyle||(null===(a=e.ownerDocument)||void 0===a||null===(r=a.defaultView)||void 0===r?void 0:r.getComputedStyle))&&void 0!==n?n:window.getComputedStyle,c=e.dataset.theme,u=Array.from(e.classList).find((function(e){return e.startsWith("root-")})).slice("root-".length),d=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.setTextStyle-"+u).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}})).reverse(),m=-Number.parseFloat(e.querySelector(".sBarTextStyle-"+u).getAttribute("dx")),p=l(e.querySelector(".fillPrimary-"+u)).fill,f=l(e.querySelector(".fillNotMember-"+u)).fill,h=l(e.querySelector("text")).fill,y=e.querySelector(".cChartTextStyle-"+u).textContent,b=e.querySelector(".sChartTextStyle-"+u).textContent,g=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.hoverBarTextStyle-"+u).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(".fillPrimary-"+u+" > title")).map((function(e){return e.textContent}))}})),v=function(e){return Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1])},w=e.querySelector("[data-upset=base]"),E=v(w),x=v(e.querySelector("[data-upset=csaxis]")),k=Number.parseFloat(w.querySelector("g").firstElementChild.children[1].getAttribute("x2")),O=(o=e.querySelector("[data-upset=setaxis]"),Number.parseFloat(o.getAttribute("transform").match(/,([\d.]+)/)[1])),j=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),C=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),N=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-"+u).getAttribute("r")),A=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),T=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),L=A||T,q="orange";L&&(Array.from(e.querySelectorAll("[data-upset=sets-"+(A?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=d.length-Number.parseInt(e.dataset.i,10)-1;d[t].selection=Number.parseInt(e.dataset.cardinality,10)})),Array.from(e.querySelectorAll("[data-upset=cs-"+(A?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=Number.parseInt(e.dataset.i,10);g[t].selection=Number.parseInt(e.dataset.cardinality,10)})),q=l(e.querySelector("[data-upset=sets-"+(A?"s":"q")+"] [data-cardinality]")).fill);var M=Number.parseInt(null!==(s=null===(i=e.querySelector("[data-upset=cs-ss]"))||void 0===i?void 0:i.dataset.i)&&void 0!==s?s:"-1",10),z=M>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:t,datasets:{sets:d,combinations:g.map((function(e,t){return Object.assign({},e,{partOf:M===t?2:1,nsets:[""]})})).concat(g.map((function(e){return{name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:d.filter((function(t){return!e.sets.includes(t.name)})).map((function(e){return e.name}))}})))},vconcat:[{hconcat:[{mark:"bar",width:x+j-40,height:O},{width:k,height:O,data:{name:"combinations"},transform:[{filter:z}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-m},encoding:{text:{field:"cardinality",type:"quantitative"}}},L&&{mark:{type:"bar",fill:q,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:y}}}]},{hconcat:[{width:x,height:C,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-m},encoding:{text:{field:"cardinality",type:"quantitative"}}},L&&{mark:{type:"bar",fill:q,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:b,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:j,height:C,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(l(e.querySelector(".setTextStyle-"+u)).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:k,height:C,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:N*N*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[f,p].concat(M>=0?[q]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null}}},{mark:"rule",transform:[{filter:z},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:S({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},M<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[p,q]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:E,background:"dark"===c?"#303030":"white",concat:{spacing:0},view:{stroke:null},bar:{fill:p},circle:{opacity:1},rule:{stroke:p,strokeWidth:Number.parseInt(l(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:h,labelFontSize:Number.parseInt(l(e.querySelector(".axisTextStyle-"+u)).fontSize,10),titleColor:h,titleFontSize:Number.parseInt(l(e.querySelector(".cChartTextStyle-"+u)).fontSize,10)},title:{color:h},text:{fill:h,fontSize:Number.parseInt(l(e.querySelector(".sBarTextStyle-"+u)).fontSize,10)}}}}(e,a),s=URL.createObjectURL(new Blob([JSON.stringify(r,null,2)],{type:"application/json"}));w(s,a+".json",e.ownerDocument),URL.revokeObjectURL(s)}function x(e){var t=e.currentTarget.closest("svg"),n=e.currentTarget.dataset.type||"png";"vega"!==n?v(t,{type:n,toRemove:"."+e.currentTarget.getAttribute("class")}):E(t)}function k(e){var t=e.transform,n=e.styleId;return r.a.createElement("g",{className:"exportButtons-"+n,transform:t},r.a.createElement("g",{className:"exportButton-"+n,onClick:x,"data-type":"png",transform:"translate(-50, 0)"},r.a.createElement("title",null,"Download PNG Image"),r.a.createElement("rect",{y:-9,width:24,height:11,rx:2,ry:2}),r.a.createElement("text",{className:"exportTextStyle-"+n,x:12},"PNG")),r.a.createElement("g",{className:"exportButton-"+n,onClick:x,"data-type":"svg",transform:"translate(-24, 0)"},r.a.createElement("title",null,"Download SVG Image"),r.a.createElement("rect",{y:-9,width:24,height:11,rx:2,ry:2}),r.a.createElement("text",{className:"exportTextStyle-"+n,x:12},"SVG")),r.a.createElement("g",{className:"exportButton-"+n,onClick:x,"data-type":"vega",transform:"translate(-84, 0)"},r.a.createElement("title",null,"Download VEGA-Lite Specification"),r.a.createElement("rect",{y:-9,width:32,height:11,rx:2,ry:2}),r.a.createElement("text",{className:"exportTextStyle-"+n,x:16},"VEGA")))}var O=r.a.memo((function(e){var t=e.queries,n=e.size,a=e.style,i=e.data;return r.a.createElement("text",{transform:"translate("+n.legend.x+",4)",style:a.styles.legend,className:l("legendTextStyle-"+a.id,a.classNames.legend)},t.map((function(e,t){var n=null;return Object(s.n)(e)?n=e.set.cardinality:Object(s.m)(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement("tspan",{className:"fillQ"+t+"-"+i.id},"  ⬤ "),r.a.createElement("tspan",null,e.name,null!=n?": "+i.sets.format(n):""))})))})),j=r.a.memo((function(e){var t=e.pos,n=e.spacing,a=e.tickSizeInner,s=e.orient,i=e.name,o=e.style,c="top"===s||"left"===s?-1:1;return r.a.createElement("g",{transform:"translate(0, "+(t+.5)+")"},i&&r.a.createElement("text",{x:c*n,dy:"0.32em",className:l("axisTextStyle-"+o.id,"right"===s?"startText-"+o.id:"endText-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},i),r.a.createElement("line",{x2:c*a,className:"axisLine-"+o.id}))})),C=r.a.memo((function(e){var t=e.pos,n=e.name,a=e.spacing,s=e.orient,i=e.tickSizeInner,o=e.style,c="top"===s||"left"===s?-1:1;return r.a.createElement("g",{transform:"translate("+(t+.5)+", 0)"},n&&r.a.createElement("text",{y:c*a,dy:"top"===s?"0em":"0.71em",className:l("axisTextStyle-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},n),r.a.createElement("line",{y2:c*i,className:"axisLine-"+o.id}))}));function N(e){var t=e.scale,n=e.orient,a=e.tickSizeInner,s=void 0===a?6:a,i=e.tickSizeOuter,o=void 0===i?6:i,l=e.tickPadding,c=void 0===l?3:l,u=e.size,d=e.shift,m=e.style,p=e.transform,f=Math.max(s,0)+c,h=d,y=u,b="top"===n||"left"===n?-1:1,g="left"===n||"right"===n?j:C,v=t.ticks().map((function(e){return"number"==typeof e?{value:e,label:String(e)}:e}));return r.a.createElement("g",{transform:p},v.map((function(e){return r.a.createElement(g,{key:e.value,pos:t(e.value),name:e.label,spacing:f,tickSizeInner:s,orient:n,style:m})})),r.a.createElement("path",{className:"axisLine-"+m.id,d:"left"===n||"right"===n?o?"M"+b*o+","+h+"H0.5V"+y+"H"+b*o:"M0.5,"+h+"V"+y:o?"M"+h+","+b*o+"V0.5H"+y+"V"+b*o:"M"+h+",0.5H"+y}))}var A=r.a.memo((function(e){var t=e.size,n=e.style,a=e.data,s=c(t.sets.w+t.labels.w+t.cs.w),i=c(t.cs.h+t.sets.h),o="auto"===n.cs.offset?a.cs.labelOffset:n.cs.offset,u="auto"===n.sets.offset?a.sets.labelOffset:n.sets.offset;return r.a.createElement("g",null,r.a.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")","data-upset":"csaxis"},r.a.createElement(N,{scale:a.cs.y,orient:"left",size:t.cs.h,shift:t.cs.h-a.cs.yAxisWidth,style:n}),r.a.createElement("line",{x1:0,x2:t.cs.w,y1:t.cs.h+1,y2:t.cs.h+1,className:"axisLine-"+n.id}),r.a.createElement("text",{className:l("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-o+", "+t.cs.h/2+")rotate(-90)"},n.cs.name),t.cs.addons.map((function(e){return r.a.createElement("text",{key:e.name,className:l("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-o+", "+(i(e)+e.size/2)+")rotate(-90)"},e.name)}))),r.a.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")","data-upset":"setaxis"},r.a.createElement(N,{scale:a.sets.x,orient:"bottom",size:t.sets.w,shift:t.sets.w-a.sets.xAxisWidth,transform:"translate(0, "+t.sets.h+")",style:n}),r.a.createElement("text",{className:l("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+t.sets.w/2+", "+(t.sets.h+u)+")"},n.sets.name),t.sets.addons.map((function(e){return r.a.createElement("text",{key:e.name,className:l("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+(s(e)+e.size/2)+", "+(t.sets.h+u)+")"},e.name)}))))})),T=r.a.memo((function(e){var t=e.cx,n=e.r,a=e.cy,s=e.name,i=e.className,o=e.style;return r.a.createElement("circle",{r:n,cx:t,cy:a,className:i,style:o},r.a.createElement("title",null,s))})),L=r.a.memo((function(e){var t=e.d,n=e.onClick,a=e.onMouseEnter,s=e.onMouseLeave,i=e.onContextMenu,o=e.className,u=e.data,d=e.size,m=e.style,p=e.children,f=u.cs.y(t.cardinality),h=c(d.cs.h+d.sets.h);return r.a.createElement("g",{transform:"translate("+u.cs.x(t)+", 0)",onMouseEnter:a(t),onMouseLeave:s,onClick:n(t),onContextMenu:i(t),className:o,"data-cardinality":t.cardinality},r.a.createElement("title",null,t.name,": ",u.cs.format(t.cardinality)),r.a.createElement("rect",{y:-d.cs.before,width:u.cs.bandWidth,height:d.sets.h+d.cs.h+d.cs.before+d.cs.after,className:"hoverBar-"+m.id}),r.a.createElement("rect",{y:f,height:d.cs.h-f,width:u.cs.bandWidth,className:l("fillPrimary-"+m.id,m.classNames.bar),style:m.styles.bar}),r.a.createElement("text",{y:f-m.barLabelOffset,x:u.cs.bandWidth/2,style:m.styles.barLabel,className:l("cBarTextStyle-"+m.id,m.classNames.barLabel)},u.cs.format(t.cardinality)),r.a.createElement("text",{y:-m.barLabelOffset-d.cs.before,x:u.cs.bandWidth/2,style:m.styles.barLabel,className:l("hoverBarTextStyle-"+m.id,m.classNames.barLabel)},t.name),u.sets.v.map((function(e,n){return r.a.createElement(T,{key:u.sets.keys[n],r:u.r,cx:u.cs.cx,cy:u.sets.y(e)+u.sets.cy,name:u.cs.has(t,e)?e.name:t.name,style:m.styles.dot,className:l(t.sets.has(e)?"fillPrimary-"+m.id:"fillNotMember-"+m.id,m.classNames.dot)})})),t.sets.size>1&&r.a.createElement("line",{x1:u.cs.cx,y1:u.sets.y(u.sets.v.find((function(e){return u.cs.has(t,e)})))+u.sets.cy,x2:u.cs.cx,y2:u.sets.y(u.sets.rv.find((function(e){return u.cs.has(t,e)})))+u.sets.cy,className:"upsetLine-"+u.id}),d.cs.addons.map((function(e){return r.a.createElement("g",{key:e.name,transform:"translate(0,"+h(e)+")"},e.render({set:t,width:u.cs.bandWidth,height:e.size,theme:m.theme}))})),p)})),q=r.a.memo((function(e){var t=e.d,n=e.i,a=e.onMouseEnter,s=e.onMouseLeave,i=e.onClick,o=e.onContextMenu,u=e.className,d=e.size,m=e.data,p=e.style,f=e.children,h=m.sets.x(t.cardinality),y=c(d.sets.w+d.labels.w+d.cs.w);return r.a.createElement("g",{transform:"translate(0, "+m.sets.y(t)+")",onMouseEnter:a(t),onMouseLeave:s,onClick:i(t),onContextMenu:o(t),className:u,"data-cardinality":t.cardinality},r.a.createElement("title",null,t.name,": ",m.sets.format(t.cardinality)),r.a.createElement("rect",{x:-d.sets.before,width:d.sets.w+d.labels.w+d.cs.w+d.sets.after,height:m.sets.bandWidth,className:"hoverBar-"+p.id}),n%2==1&&r.a.createElement("rect",{x:d.sets.w,width:d.labels.w+d.cs.w+d.sets.after,height:m.sets.bandWidth,className:"fillAlternating-"+p.id}),r.a.createElement("rect",{x:h,width:d.sets.w-h,height:m.sets.bandWidth,className:l("fillPrimary-"+p.id,p.classNames.bar),style:p.styles.bar}),r.a.createElement("text",{x:h,dx:-p.barLabelOffset,y:m.sets.bandWidth/2,style:p.styles.barLabel,className:l("sBarTextStyle-"+p.id,p.classNames.barLabel)},m.sets.format(t.cardinality)),r.a.createElement("text",{x:d.sets.w+d.labels.w/2,y:m.sets.bandWidth/2,className:l("setTextStyle-"+p.id,p.classNames.setLabel),style:p.styles.setLabel,clipPath:"url(#clip-"+d.id+")"},t.name),d.sets.addons.map((function(e){return r.a.createElement("g",{key:e.name,transform:"translate("+y(e)+",0)"},e.render({set:t,width:e.size,height:m.sets.bandWidth,theme:p.theme}))})),f)})),M=r.a.memo((function(e){var t=e.data,n=e.size,a=e.style,s=e.onHover,i=e.onClick,l=e.onContextMenu,c=e.setChildrenFactory,u=e.combinationChildrenFactory,d=r.a.useMemo((function(){return[o(i),o(s),o(l),s?function(e){return s(null,e.nativeEvent)}:void 0]}),[i,s,l]),m=d[0],p=d[1],f=d[2],h=d[3];return r.a.createElement("g",{className:i?"clickAble-"+a.id:void 0},r.a.createElement("g",{transform:"translate("+n.sets.x+","+n.sets.y+")","data-upset":"sets"},t.sets.v.map((function(e,o){return r.a.createElement(q,{key:t.sets.keys[o],d:e,i:o,onClick:m,onMouseEnter:p,onMouseLeave:h,onContextMenu:f,className:i||s?"interactive-"+a.id:void 0,data:t,style:a,size:n},c&&c(e))}))),r.a.createElement("g",{transform:"translate("+n.cs.x+","+n.cs.y+")","data-upset":"cs"},t.cs.v.map((function(e,o){return r.a.createElement(L,{key:t.cs.keys[o],d:e,onClick:m,onMouseEnter:p,onMouseLeave:h,onContextMenu:f,className:i||s?"interactive-"+a.id:void 0,data:t,style:a,size:n},u&&u(e))}))))}));function z(e){var t=e.data,n=e.size,a=e.style,s=e.elemOverlap,i=e.secondary,o=e.tooltip,u=e.suffix,d=e.transform,m=e.empty,p=e.combinationAddons,f=t.cs.bandWidth,h=n.cs.h+n.sets.h,y=n.cs.h,b=l("fill"+u,!o&&"pnone-"+a.id,a.classNames.bar);return r.a.createElement("g",{transform:d,"data-upset":i?"cs-q":"cs-s"},t.cs.v.map((function(e,n){var l=t.cs.x(e),u=t.cs.keys[n];if(m&&!i)return r.a.createElement("rect",{key:u,x:l,y:y,height:0,width:f,className:b,style:a.styles.bar},o&&r.a.createElement("title",null));var d=s(e);if(0===d)return null;var g=t.cs.y(d),v=o&&r.a.createElement("title",null,e.name+" ∩ "+o+": "+d),w=i?r.a.createElement("path",{key:u,transform:"translate("+l+", "+g+")",d:"M0,-1 l"+f+",0 l0,2 l"+-f+",0 L-"+t.triangleSize+",-"+t.triangleSize+" L-"+t.triangleSize+","+t.triangleSize+" Z",className:b,"data-i":n,"data-cardinality":d},v):r.a.createElement("rect",{key:u,x:l,y:g,height:y-g,"data-i":n,"data-cardinality":d,width:f,className:b,style:a.styles.bar},v),S=c(h),E=p.map((function(t){var n=S(t),s=t.render({set:e,width:f,height:t.size,theme:a.theme});return s?r.a.createElement("g",{key:t.name,transform:"translate("+l+","+n+")"},s):null})).filter(Boolean);return 0===E.length?w:r.a.createElement("g",{key:u},w,E)})))}function B(e){var t=e.data,n=e.size,a=e.style,s=e.elemOverlap,i=e.suffix,o=e.secondary,u=e.empty,d=e.tooltip,m=e.setAddons,p=e.transform,f=n.sets.w,h=n.sets.w+n.labels.w+n.cs.w,y=t.sets.bandWidth,b=l("fill"+i,!d&&" pnone-"+a.id,a.classNames.bar);return r.a.createElement("g",{transform:p,"data-upset":o?"sets-q":"sets-s"},t.sets.v.map((function(e,n){var i=t.sets.y(e),l=t.sets.keys[n];if(u&&!o)return r.a.createElement("rect",{key:l,x:f,y:i,width:0,height:y,className:b,style:a.styles.bar},d&&r.a.createElement("title",null));var p=s(e);if(0===p)return null;var g=t.sets.x(p),v=d&&r.a.createElement("title",null,e.name+" ∩ "+d+": "+p),w=o?r.a.createElement("path",{key:l,transform:"translate("+g+", "+(i+y)+")",d:"M1,0 l0,"+-y+" l-2,0 l0,"+y+" L-"+t.triangleSize+","+t.triangleSize+" L"+t.triangleSize+","+t.triangleSize+" Z","data-i":n,"data-cardinality":p,className:b},v):r.a.createElement("rect",{key:l,"data-i":n,"data-cardinality":p,x:g,y:i,width:f-g,height:y,className:b,style:a.styles.bar},v),S=c(h),E=m.map((function(t){var n=S(t),s=t.render({set:e,width:t.size,height:y,theme:a.theme});return s?r.a.createElement("g",{key:t.name,transform:"translate("+n+","+i+")"},s):null})).filter(Boolean);return 0===E.length?w:r.a.createElement("g",{key:l},w,E)})))}var $=[],P=r.a.memo((function(e){var t=e.size,n=e.data,i=e.style,o=e.onHover,l=e.secondary,c=e.queries,u=t.sets.addons.some((function(e){return null!=e.renderQuery}))||t.cs.addons.some((function(e){return null!=e.renderQuery})),d=Object(a.useMemo)((function(){return c.map((function(e){return S(S({},e),{},{overlap:Object(s.s)(e,"intersection",n.toElemKey),elemOverlap:u?Object(s.r)(e,"intersection",n.toElemKey):null})}))}),[c,u,n.toElemKey]);function m(e,t,n,a){return S(S({},e),{},{render:function(r){var s=n(r.set);return e.renderQuery?e.renderQuery(S({query:t,overlap:s,secondary:a},r)):null}})}return r.a.createElement("g",{className:o&&!l?"pnone-"+i.id:void 0},r.a.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")"},d.map((function(e,a){return r.a.createElement(B,{key:e.name,data:n,size:t,style:i,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:l||a>0,tooltip:o&&!(l||a>0)?void 0:e.name,setAddons:0===t.sets.addons.length?$:t.sets.addons.map((function(t){return m(t,e,e.elemOverlap,l||a>0)}))})}))),r.a.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")"},d.map((function(e,a){return r.a.createElement(z,{key:e.name,data:n,size:t,style:i,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:l||a>0,tooltip:o&&!(l||a>0)?void 0:e.name,combinationAddons:0===t.cs.addons.length?$:t.cs.addons.map((function(t){return m(t,e,e.elemOverlap,l||a>0)}))})}))))}));function I(e){var t=e.data,n=e.size,a=e.style,s=e.selection;if(!s||"set"!==s.type)return null;var i=s;return r.a.createElement("rect",{y:t.sets.y(i),width:n.labels.w+n.cs.w+n.sets.after,height:t.sets.bandWidth,className:"selectionHint-"+a.id})}function R(e){var t=e.data,n=e.size,a=e.style,s=e.selection,i=t.sets.bandWidth/2,o=t.cs.cx,c=t.r,u=n.sets.h+n.sets.after,d=t.cs.bandWidth;if(!s||"set"===s.type)return null;var m=s,p=t.cs.keys.indexOf(t.toKey(m));return r.a.createElement("g",{transform:"translate("+(n.labels.w+t.cs.x(m))+", 0)","data-upset":"cs-ss","data-i":p},r.a.createElement("rect",{width:d,height:u,className:"selectionHint-"+a.id}),t.sets.v.filter((function(e){return t.cs.has(m,e)})).map((function(e){return r.a.createElement(T,{key:t.toKey(e),r:1.1*c,cx:o,cy:t.sets.y(e)+i,name:e.name,className:l("fillSelection-"+a.id,"pnone-"+a.id,a.classNames.dot),style:a.styles.dot})})),m.sets.size>1&&r.a.createElement("line",{x1:o,y1:t.sets.y(t.sets.v.find((function(e){return t.cs.has(m,e)})))+i,x2:o,y2:t.sets.y(t.sets.rv.find((function(e){return t.cs.has(m,e)})))+i,className:"upsetSelectionLine-"+t.id}))}var D=[];function F(e){return null!=e&&!Array.isArray(e)}function _(e,t){var n=Object(s.x)(e,t);return function(e){return n(e.elems).intersection}}function J(){return 0}function G(e){var t=e.size,n=e.data,a=e.style,i=e.selection,o=e.onHover,l=a.emptySelection;var c,u,d,m=function(){if(!i)return J;if("function"==typeof i)return i;if(Array.isArray(i))return _(i,n.toElemKey);var e=i;if(e.overlap)return e.overlap;var t=_(e.elems,n.toElemKey);return function(n){return n.overlap?n.overlap(e):t(n)}}(),p=Array.isArray(i)?"Array("+i.length+")":"function"==typeof i?"?":null==i?void 0:i.name,f=t.sets.addons.some((function(e){return null!=e.renderSelection}))||t.cs.addons.some((function(e){return null!=e.renderSelection})),h=i&&"function"!=typeof i&&f?(c=Array.isArray(i)?i:i.elems,u=n.toElemKey,d=Object(s.v)(c,u),function(e){return d(e.elems).intersection}):null;function y(e){return S(S({},e),{},{render:function(t){var n=h?h(t.set):null;return e.renderSelection?e.renderSelection(S({selection:i,selectionColor:a.selectionColor,overlap:n},t)):null}})}return r.a.createElement("g",{className:o?"pnone-"+a.id:void 0},(i||l)&&r.a.createElement(z,{data:n,size:t,style:a,transform:"translate("+t.cs.x+","+t.cs.y+")",empty:l&&!i,elemOverlap:m,suffix:"Selection-"+a.id,tooltip:o?void 0:p,combinationAddons:0===t.cs.addons.length?D:t.cs.addons.map(y)}),(i||l)&&r.a.createElement(B,{data:n,size:t,style:a,transform:"translate("+t.sets.x+","+t.sets.y+")",empty:l&&!i,elemOverlap:m,suffix:"Selection-"+a.id,tooltip:o?void 0:p,setAddons:0===t.sets.addons.length?D:t.sets.addons.map(y)}),r.a.createElement("g",{transform:"translate("+t.labels.x+","+t.labels.y+")"},F(i)&&r.a.createElement(I,{data:n,size:t,style:a,selection:i}),F(i)&&r.a.createElement(R,{data:n,size:t,style:a,selection:i})))}var U={selectionColor:"#ffa500",color:"#000000",textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"#0000000d"},H={selectionColor:"#ffa500",color:"#cccccc",textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"#ffffff33"};function W(e){var t,n=function(e){return"dark"===e?H:U}(e.theme);return Object.assign({theme:"light",padding:20,barPadding:.3,dotPadding:.7,combinations:b,selection:null,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",fontFamily:"sans-serif",widthRatios:h,heightRatios:y,queries:p,queryLegend:null!=e.queries&&e.queries.length>0,exportButtons:!0,numericScale:"linear",bandScale:"band",className:"",fontSizes:f,classNames:m,style:m,styles:m,childrenFactories:m,setAddons:p,combinationAddons:p,emptySelection:!0,toKey:s.A},n,e,e.fontSizes?{fontSizes:Object.assign({},f,e.fontSizes)}:m)}var V=Object(a.forwardRef)((function(e,t){var n=W(e),s=n.id,i=n.className,o=n.style,c=n.width,m=n.height,p=n.padding,f=n.barPadding,h=n.sets,y=n.toKey,b=n.toElemKey,g=n.combinations,v=n.selection,w=void 0===v?null:v,S=n.onClick,E=n.onContextMenu,x=n.onHover,j=n.theme,C=n.dotPadding,N=n.setChildrenFactory,T=n.combinationChildrenFactory,L=n.widthRatios,q=n.heightRatios,z=n.queries,B=void 0===z?[]:z,$=n.setAddons,I=n.combinationAddons,R=n.alternatingBackgroundColor,D=n.bandScale,F=n.barLabelOffset,_=n.classNames,J=n.color,U=n.combinationName,H=n.combinationNameAxisOffset,V=n.exportButtons,Q=n.fontFamily,K=n.fontSizes,Y=n.hoverHintColor,Z=n.notMemberColor,X=n.numericScale,ee=n.queryLegend,te=n.selectionColor,ne=n.setName,ae=n.setNameAxisOffset,re=n.styles,se=n.textColor,ie=n.emptySelection,oe=K.axisTick,le=K.barLabel,ce=K.chartLabel,ue=K.legend,de=K.setLabel,me=Object(a.useMemo)((function(){return s||u()}),[s,Q,oe,le,ce,ue,de,se,Y,J,te,Z,R]),pe=Object(a.useMemo)((function(){return function(e,t,n,a,r,s,i,o,l,c,u){return{theme:e,styles:t,classNames:n,cs:{name:a,offset:r},sets:{name:s,offset:i},emptySelection:u,id:o,barLabelOffset:l,selectionColor:c}}(j,re,_,U,H,ne,ae,me,F,te,ie)}),[j,re,_,F,U,H,ne,ae,me,te,ie]),fe=Object(a.useMemo)((function(){return function(e,t,n,a,r,s,i,o,l){var c=i.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),d=i.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),m=o.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),p=o.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),f=t-2*n-20-p-m,h=e-2*n-c-d,y=h*r[0],b=h*r[1],g=f*s[0];return{id:l||u(),cs:{before:m,after:p,x:c+y+b,y:m,w:h-y-b,h:g,addons:o},labels:{x:c+y,y:m+g,w:b,h:f-g},sets:{before:c,after:d,x:c,y:m+g,w:y,h:f-g,addons:i},padding:a,legend:{x:e/2},margin:n,w:e,h:t}}(c,m,p,f,L,q,$,I,s)}),[c,m,p,f,L,q,$,I,s]),he=Object(a.useMemo)((function(){return d(h,g,fe,X,D,F+Number.parseInt(null!=le?le:"10"),C,f,Number.parseInt(null!=oe?oe:"10"),y,b,s)}),[h,g,fe,X,D,F,le,C,f,oe,y,b,s]),ye="\n  .root-"+me+" {\n    "+(Q?"font-family: "+Q+";":"")+"\n  }\n  .axisTextStyle-"+me+" {\n    fill: "+se+";\n    "+(oe?"font-size: "+oe+";":"")+"\n    text-anchor: middle;\n  }\n  .barTextStyle-"+me+" {\n    fill: "+se+";\n    "+(le?"font-size: "+le+";":"")+"\n  }\n  .cBarTextStyle-"+me+" {\n    fill: "+se+";\n    "+(le?"font-size: "+le+";":"")+"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-"+me+" {\n    fill: "+se+";\n    "+(le?"font-size: "+le+";":"")+"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-"+me+" {\n    "+(le?"font-size: "+le+";":"")+"\n    fill: "+Y+";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-"+me+" {\n    fill: "+se+";\n    "+(de?"font-size: "+de+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-"+me+" {\n    fill: "+se+";\n    "+(ce?"font-size: "+ce+";":"")+"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-"+me+" {\n    fill: "+se+";\n    "+(ce?"font-size: "+ce+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n  .exportTextStyle-"+me+" {\n    fill: "+se+";\n    "+(le?"font-size: "+le+";":"")+"\n  }\n  .legendTextStyle-"+me+" {\n    fill: "+se+";\n    "+(ue?"font-size: "+ue+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  .startText-"+me+" {\n    text-anchor: start;\n  }\n  .endText-"+me+" {\n    text-anchor: end;\n  }\n  .pnone-"+me+" {\n    pointer-events: none;\n  }\n  .fillPrimary-"+me+" { fill: "+J+"; }\n  .fillSelection-"+me+" { fill: "+te+"; }\n  .fillNotMember-"+me+" { fill: "+Z+"; }\n  .fillAlternating-"+me+" { fill: "+(R||"transparent")+"; }\n  .fillTransparent-"+me+" { fill: transparent; }\n\n  .selectionHint-"+me+" {\n    fill: transparent;\n    pointer-events: none;\n    stroke: "+te+";\n  }\n\n  .axisLine-"+me+" {\n    fill: none;\n    stroke: "+se+";\n  }\n  .clickAble-"+me+" {\n    cursor: pointer;\n  }\n\n  .hoverBar-"+me+" {\n    fill: transparent;\n  }\n\n  .interactive-"+me+":hover > .hoverBar-"+me+" {\n    stroke: "+Y+";\n  }\n  .interactive-"+me+":hover > .hoverBarTextStyle-"+me+" {\n    display: unset;\n  }\n\n  .exportButtons-"+me+" {\n    text-anchor: middle;\n  }\n  .exportButton-"+me+" {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-"+me+":hover {\n    opacity: 1;\n  }\n  .exportButton-"+me+" > rect {\n    fill: none;\n    stroke: "+se+";\n  }\n\n  .upsetLine-"+he.id+" {\n    stroke-width: "+.6*he.r+";\n    stroke: "+J+";\n  }\n\n  .upsetSelectionLine-"+he.id+" {\n    stroke-width: "+.6*he.r*1.1+";\n    stroke: "+te+";\n    pointer-events: none;\n  }\n  "+B.map((function(e,t){return".fillQ"+t+"-"+he.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ";return r.a.createElement("svg",{id:s,className:l("root-"+me,i),style:o,width:c,height:m,ref:t,viewBox:"0 0 "+c+" "+m,"data-theme":null!=j?j:"light"},r.a.createElement("style",null,ye),r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clip-"+fe.id},r.a.createElement("rect",{x:fe.sets.w,y:0,width:fe.labels.w,height:fe.sets.h}))),ee&&r.a.createElement(O,{queries:B,size:fe,style:pe,data:he}),V&&r.a.createElement(k,{transform:"translate("+(fe.w-2)+","+(fe.h-3)+")",styleId:me}),r.a.createElement("g",{transform:"translate("+p+","+p+")","data-upset":"base"},S&&r.a.createElement("rect",{width:fe.cs.x,height:fe.sets.y,onClick:function(e){return S(null,e.nativeEvent)},className:"fillTransparent-"+me}),r.a.createElement(A,{size:fe,style:pe,data:he}),r.a.createElement(M,{size:fe,style:pe,data:he,onClick:S,onHover:x,onContextMenu:E,setChildrenFactory:N,combinationChildrenFactory:T}),r.a.createElement(G,{size:fe,style:pe,data:he,onHover:x,selection:w}),r.a.createElement(P,{size:fe,style:pe,data:he,onHover:x,queries:B,secondary:null!=x||null!=w})),e.children)}));t.default=V},38:function(e,t,n){"use strict";function a(e){return e instanceof Set?e.size:e.length}function r(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,s={setA:r,setB:r,union:r,intersection:r};return function(i){if(i===e)return s;var o=0;i.forEach((function(e){(t&&n.has(t(e))||!t&&n.has(e))&&o++}));var l=a(i);return{setA:r,setB:l,intersection:o,union:r+l-o}}}function s(e,t,n){if(a(e)<a(t)||e instanceof Set)return r(e,n)(t);var s=r(t,n)(e);return Object.assign({},s,{setA:s.setB,setB:s.setA})}function i(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),a=Array.isArray(e)?e:Array.from(e),r={setA:a,setB:a,union:a,intersection:a};return function(s){if(s===e)return r;var i=[],o=a.slice();return s.forEach((function(e){t&&n.has(t(e))||!t&&n.has(e)?i.push(e):o.push(e)})),{setA:a,setB:Array.isArray(s)?s:Array.from(s),intersection:i,union:o}}}function o(e,t,n){if(a(e)<a(t)||e instanceof Set)return i(e,n)(t);var r=i(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})}function l(e,t){var n=e instanceof Set?Array.from(e):e,a=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return function(r){if(r===e)return n;var s=[];return r.forEach((function(e){(t&&a.has(t(e))||!t&&a.has(e))&&s.push(e)})),s}}function c(e){return Array.isArray(e.elems)}function u(e){return"function"==typeof e.overlap}function d(e){return null!=e.set}function m(e,t,n){if(u(e))return e.overlap;if(d(e)&&e.set.overlap)return e.set.overlap;var a=r(c(e)?e.elems:e.set.elems,n);return function(n){return n.overlap&&c(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&d(e)?n.overlap(e.set):a(n.elems)[t]}}function p(e,t,n){if(u(e))return function(){return null};if("intersection"===t){var a=l(c(e)?e.elems:e.set.elems,n);return function(e){return a(e.elems)}}var r=i(c(e)?e.elems:e.set.elems,n);return function(e){return r(e.elems)[t]}}function f(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function h(e){return f(e)&&"set"===e.type}function y(e){var t=e;return f(e)&&["composite","union","intersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function b(e){return h(e)||y(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function w(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function S(e,t){return e.name.localeCompare(t.name)}function E(e,t){return t.cardinality-e.cardinality}function x(e,t){return e.degree-t.degree}function k(e){return function(t,n){return e.reduce((function(e,a){return 0===e?a(t,n):e}),0)}}function O(e){return function(t,n){return-e(t,n)}}function j(e){return function(t,n){var a=function(e){return e<0?Number.POSITIVE_INFINITY:e};return a(e.findIndex((function(e){return t.sets.has(e)})))-a(e.findIndex((function(e){return n.sets.has(e)})))}}function C(e,t){void 0===t&&(t=/[∩∪&|]/);var n=new Map(e.map((function(e){return[e.name,e]})));return function(e){return e.name.split(t).map((function(e){return n.get(e.trim())}))}}function N(e,t,n){void 0===n&&(n={});var a=t;return n.order&&(a=a.sort(function(e,t){if(!t)return S;var n=Array.isArray(t)?t:[t];return 0===n.length?S:k(n.map((function(t){switch(t){case"cardinality":case"cardinality:desc":return E;case"cardinality:asc":return O(E);case"name:desc":return O(S);case"degree":case"degree:asc":return x;case"degree:desc":return O(x);case"group":case"group:asc":return j(e);case"group:desc":return O(j(e));default:return S}})))}(e,n.order))),null!=n.limit?a.slice(0,n.limit):a}function A(e,t,n){var a=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(a),degree:a.length},e)}function T(e,t,n){return e.map((function(e){return A(e,t,n)}))}function L(e,t,n){for(var a=void 0===n?{}:n,r=a.min,s=void 0===r?0:r,i=a.max,o=void 0===i?1/0:i,l=Math.pow(2,e.length),c=0,u=1,d=0;d<l;d++){d>=u&&(c++,u<<=1);for(var m=[],p=0;p<c;p++)d&1<<p&&m.push(e[p]);m.length>=s&&m.length<=o&&t(m)}}function q(e,t,n){for(var a=void 0===n?{}:n,r=a.min,s=void 0===r?0:r,i=a.max,o=void 0===i?1/0:i,l=BigInt(0),c=BigInt(1),u=BigInt(2)<<BigInt(e.length),d=0,m=c,p=e.map((function(e,t){return c<<BigInt(t)})),f=l;f<u;f+=c){f>=m&&(d++,m<<=c);for(var h=[],y=0;y<d;y++)(f&p[y])!==l&&h.push(e[y]);h.length>=s&&h.length<=o&&t(h)}}function M(e,t,n){var a=void 0===n?{}:n,r=a.min,s=void 0===r?0:r,i=a.max,o=void 0===i?1/0:i,l=function(e){return e>=s&&e<=o};l(0)&&t([]),function n(a,r){if(!(a.length>=o))for(var s=r;s<e.length;s++)a.push(e[s]),l(a.length)&&t(a.slice()),n(a,s+1),a.pop()}([],0)}function z(e,t){void 0===t&&(t={});var n=function(n){return{forEach:function(a){return n(e,a,t)}}};return Math.pow(2,e.length)<Number.MAX_SAFE_INTEGER?n(L):void 0!==window.BigInt?n(q):n(M)}n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return ce})),n.d(t,"h",(function(){return se})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return fe})),n.d(t,"k",(function(){return I})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return c})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return Z})),n.d(t,"p",(function(){return ae})),n.d(t,"q",(function(){return z})),n.d(t,"r",(function(){return p})),n.d(t,"s",(function(){return m})),n.d(t,"t",(function(){return l})),n.d(t,"u",(function(){return o})),n.d(t,"v",(function(){return i})),n.d(t,"w",(function(){return s})),n.d(t,"x",(function(){return r})),n.d(t,"y",(function(){return le})),n.d(t,"z",(function(){return re})),n.d(t,"A",(function(){return J})),n.d(t,"B",(function(){return de})),n.d(t,"C",(function(){return he}));var B={intersection:" ∩ ",union:" ∪ ",composite:","};function $(e,t,n,a){var r=new Map(e.map((function(e){return[e,a?new Set(e.elems.map(a)):new Set(e.elems)]}))),s=a?null:r,i=a?r:null;return function(e){if(0===e.length){if(Array.isArray(n))return n;if(i&&a){var r=Array.from(i.values());return t.filter((function(e){var t=a(e);return r.every((function(e){return!e.has(t)}))}))}var o=Array.from(s.values());return t.filter((function(e){return o.every((function(t){return!t.has(e)}))}))}if(1===e.length)return e[0].elems;var l=e.reduce((function(e,t){return!e||e.length>t.elems.length?t.elems:e}),null);return i&&a?l.filter((function(t){var n=a(t);return e.every((function(e){return i.get(e).has(n)}))})):l.filter((function(t){return e.every((function(e){return s.get(e).has(t)}))}))}}function P(e,t,n,a){return function(r){if(0===r.length){if(Array.isArray(n))return n;if(a){var s=new Set;return e.forEach((function(e){e.elems.forEach((function(e){return s.add(a(e))}))})),t.filter((function(e){return!s.has(a(e))}))}var i=new Set;return e.forEach((function(e){e.elems.forEach((function(e){return i.add(e)}))})),t.filter((function(e){return!i.has(e)}))}if(1===r.length)return r[0].elems;var o=r.reduce((function(e,t){return!e||e.length<t.elems.length?t.elems:e}),null),l=o.slice(),c=a?new Set(l.map(a)):new Set(l);return r.forEach((function(e){e.elems!==o&&e.elems.forEach((function(e){if(a){var t=a(e);c.has(t)||(l.push(e),c.add(t))}else c.has(e)||(l.push(e),c.add(e))}))})),l}}function I(e,t){var n,a=void 0===t?{}:t,r=a.type,s=void 0===r?"intersection":r,i=a.min,o=void 0===i?0:i,l=a.max,c=void 0===l?1/0:l,u=a.empty,d=void 0!==u&&u,m=a.elems,p=void 0===m?[]:m,f=a.notPartOfAnySet,h=a.toElemKey,y=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(a,["type","min","max","empty","elems","notPartOfAnySet","toElemKey"]),g=null!==(n=B[s])&&void 0!==n?n:B.intersection,v=[],w=("union"===s?P:$)(e,p,f,h);return z(e,{min:o,max:c}).forEach((function(e){if(0===e.length&&"number"==typeof f&&f>0)v.push({type:"composite",elems:[],sets:new Set,name:"()",cardinality:f,overlap:function(e){return e===this||b(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0});else{var t=w(e);(d||0!==t.length)&&v.push({type:0===e.length?"composite":s,elems:t,sets:new Set(e),name:1===e.length?e[0].name:"("+e.map((function(e){return e.name})).join(g)+")",cardinality:t.length,degree:e.length})}})),N(e,v,y)}function R(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function D(e,t){void 0===t&&(t={});var n=e;if(t.order){var a=function(e){if(!e)return S;switch(e){case"cardinality":case"cardinality:desc":return k([E,S]);case"cardinality:asc":return k([O(E),S]);case"name:desc":return O(S);default:return S}}(t.order);n=n.slice().sort(a)}return null!=t.limit?n.slice(0,t.limit):n}function F(e,t){return void 0===t&&(t={}),D(e.map(R),t)}function _(e,t){void 0===t&&(t=function(e){return e.sets});var n=new Map;return e.forEach((function(e){t(e).forEach((function(t){n.has(t)?n.get(t).push(e):n.set(t,[e])}))})),Array.from(n).map((function(e){var t=e[0],n=e[1];return{type:"set",elems:n,name:t.toString(),cardinality:n.length}}))}function J(e){return e.name+":"+e.type+"#"+e.cardinality}var G=function(e,t,n){var a=e.length+n,r=t/Math.max(1,a),s=t-r*e.length,i=new Map(e.map((function(e,t){return[e,t]}))),o=r/(1+n),l=function(e){var t=i.get(e);if(null!=t)return s+r*t};return l.bandwidth=function(){return o},l};function U(e,t,n){void 0===n&&(n=1);for(var a=0;a<e.length-n;a+=n){var r=e[a],s=e[a+1];if(r<s){if(r+t[a]/2>s-t[a+1]/2)return!0}else{var i=r-t[a]/2;if(s+t[a+1]/2>i)return!0}}return!1}function H(e,t,n,a,r){var s=e[e.length-1];if(!s.label)for(var i=e.length-2;i>0;--i)if(e[i].label){s=e[i];break}if(s.value<t){var o=n(s.value),l=n(t);if(o<l){o+a(s.value)/2<l-a(t)/2&&e.push({value:t,label:r(t)})}else{var c=o-a(s.value)/2;l+a(t)/2<c&&e.push({value:t,label:r(t)})}}return e}function W(e,t,n){return void 0===t&&(t=String),void 0===n&&(n=1),e.map((function(e,a){return{value:e,label:1===n||a%n==0?t(e):void 0}}))}function V(e,t,n,a,r){var s=e.map((function(e){return t(e)})),i=e.map((function(e){return n(e)}));return U(s,i)&&U(s,i,2)?null:H(W(e,r),a,t,n,r)}function Q(e){return e.toLocaleString()}function K(e,t){void 0===t&&(t=1);for(var n=[],a=0;a<=e;a+=t)n.push(a);return n}function Y(e,t,n,a){if(t<=0)return[];for(var r,s=w(function(e,t){void 0===t&&(t=11);var n=Math.max(0,Math.floor(Math.log10(e)-.5)),a=Math.pow(10,n),r=[1,2,5],s=r.map((function(e){return e*a}));n>0&&s.unshift(r[r.length-1]*Math.pow(10,n-1)),s.push(r[0]*Math.pow(10,n+1));var i=Math.ceil(e/t);return s.filter((function(t){return t>=i&&t<=e}))}(e,t));!(r=s()).done;){var i=V(K(e,r.value),n,a,e,Q);if(i)return i}return W([0,e],Q)}var Z=function(e,t,n){var a=t[1]-t[0],r=e,s=function(e){var n=e/r;return t[0]+n*a};return s.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var a=Math.ceil(1.4*n.fontSizeHint);return Y(e,t+1,s,(function(){return a}))}var r=n.fontSizeHint/1.4;return Y(e,t+1,s,(function(e){return Math.ceil(Q(e).length*r)}))},s.tickFormat=function(){return Q},s};function X(e){var t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1));return""+(Math.round(e/Math.pow(10,3*n-1))/10).toLocaleString()+t[n]}function ee(e,t){for(var n=[],a=Math.pow(10,t),r=1;r<=e;r*=a)n.push(r);return n}function te(e,t){for(var n=[],a=1,r=0;a<=e;a*=10,r++){n.push({value:a,label:1===t||r%t==0?X(a):void 0});for(var s=a+a;s<10*a&&s<e;s+=a*t)n.push({value:s})}return n}function ne(e,t,n,a){if(t<=0)return[];for(var r=0,s=[1,2,5];r<s.length;r++){var i=s[r];if(V(ee(e,i),n,a,e,X))return H(te(e,i),e,n,a,X)}return W([0,e],X)}var ae=function(e,t,n){var a=t[1]-t[0],r=e<1?1:Math.log10(e),s=function(e){var n=e<=1?0:Math.log10(e)/r;return t[0]+n*a};return s.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var a=Math.ceil(1.4*n.fontSizeHint);return ne(e,t+1,s,(function(){return a}))}var r=n.fontSizeHint/1.4;return ne(e,t+1,s,(function(e){return Math.ceil(X(e).length*r)}))},s.tickFormat=function(){return X},s};function re(e,t,n){var a=void 0===n?{}:n,r=a.sortAble,s=a.compress,i=void 0===s?"auto":s;if(0===e.length)return[];var o=e.map((function(e){return t(e)}));if("no"===i)return o;r&&o.sort((function(e,t){return e-t}));var l=function(e){if(0===e.length)return"";for(var t=[],n=0,a=function(a){return a===n+1?t.push(e[n].toString()):a===n+2&&a<10?t.push(e[n]+","+e[n+1]):t.push(e[n]+"+"+(a-n-1)),a},r=1;r<e.length;r++){var s=e[r-1]+1;e[r]!==s&&(n=a(r),n=r)}return a(e.length),t.join(",")}(o),c=JSON.stringify(o).length,u=l.length+2;return u<.6*c||c-u>50||"yes"===i&&u<c?l:o}function se(e,t){return"string"==typeof e?0===e.length?[]:e.split(",").map((function(e){if(e.includes("+")){var n=e.split("+").map((function(e){return Number.parseInt(e,10)})),a=n[0],r=n[1];return t.slice(a,a+r+1)}return t[Number.parseInt(e,10)]})).flat():e.map((function(e){return t[e]}))}function ie(e){if(0===e.length)return[];for(var t,n=e.split(";"),a=n[0],r=n[1],s=Number.parseInt(a,10),i=0===(t=r).length?[]:t.split(",").map((function(e){if(""===e)return 0;if(e.includes("=")){var t=e.split("=").map((function(e){return Number.parseInt(e,10)})),n=t[0],a=t[1];return Array(a+1).fill(n)}return Number.parseInt(e,10)})).flat(),o=[],l=0,c=s;c>0;c--)o.push(i.slice(l,l+c)),l+=c;return o}function oe(e,t,n){var a=void 0===n?{}:n,s=a.toElemKey,i=a.what,o=void 0===i?"intersection":i,l=a.compress,c=void 0===l?"auto":l,u=e.concat(t);var d=u.map((function(e,t){for(var n=function(e){if(e.overlap)return e.overlap;var t=r(e.elems,s);return function(n){return n.overlap?n.overlap(e):t(n.elems)[o]}}(e),a=[],i=t+1;i<u.length;i++)a.push(n(u[i]));return a}));if(d.pop(),"no"===c)return d;var m=function(e){return 0===e.length?"":e.length+";"+function(e){if(0===e.length)return"";for(var t=[],n=e[0],a=1,r=1;r<e.length;r++){var s=e[r];s===n?a++:(a>1?t.push(n+"="+(a-1)):0===n?t.push(""):t.push(n.toString()),n=s,a=1)}return a>1?t.push(n+"="+a):0===n?t.push(""):t.push(n.toString()),t.join(",")}(e.flat())}(d);if("yes"===c)return m;var p=JSON.stringify(d).length;return m.length+2<.6*p?m:d}function le(e,t){var n;void 0===t&&(t={});var a=g({sortAble:!0},t),r=null!==(n=t.toKey)&&void 0!==n?n:J,s=new Map(e.sets.map((function(e,t){return[r(e),t]}))),i=new Map(e.combinations.map((function(e,t){return[r(e),t]}))),o=function(e){return{type:e.type,index:"set"===e.type?s.get(r(e)):i.get(r(e))}},l=e.sets.map((function(e,t){return{key:r(e),i:t}}));return{sets:e.sets.map((function(t){return{name:t.name,cardinality:t.cardinality,elems:re(t.elems,e.toElemIndex,a)}})),combinations:"no"===t.compress?e.combinations.map((function(t){var n=new Set(Array.from(t.sets).map(r));return{name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:l.filter((function(e){var t=e.key;return n.has(t)})).map((function(e){return e.i})),elems:re(t.elems,e.toElemIndex,a)}})):void 0,combinationOptions:e.combinationOptions,selection:e.selection?o(e.selection):void 0,queries:e.queries.map((function(t){return{name:t.name,color:t.color,set:d(t)?o(t.set):void 0,elems:c(t)?re(Array.from(t.elems),e.toElemIndex,a):void 0}}))}}function ce(e,t,n){void 0===n&&(n={});var a,r=e.sets.map((function(e){return R(g(g({},e),{},{elems:se(e.elems,t)}))})),s=e.combinations?e.combinations.map((function(e){return A(g(g({},e),{},{elems:se(e.elems,t)}),e.type,(function(e){return e.sets.map((function(e){return r[e]}))}))})):I(r,Object.assign({type:"intersection",elems:t,toElemKey:n.toElemKey},null!==(a=e.combinationOptions)&&void 0!==a?a:{}));function i(e){return"set"===e.type?r[e.index]:s[e.index]}return{sets:r,combinations:s,selection:e.selection?i(e.selection):void 0,queries:e.queries.map((function(e){return e.set?{name:e.name,color:e.color,set:i(e.set)}:{name:e.name,color:e.color,elems:se(e.elems,t)}}))}}function ue(e,t){return 1===e.length?e[0].name:"("+e.map((function(e){return e.name})).join(B[t])+")"}function de(e,t){var n;void 0===t&&(t={});var a=null!==(n=t.toKey)&&void 0!==n?n:J,s=new Map(e.sets.map((function(e,t){return[a(e),t]}))),i=new Map(e.combinations.map((function(e,t){return[a(e),t]}))),o=function(e){return{type:e.type,index:"set"===e.type?s.get(a(e)):i.get(a(e))}},l=new Map(e.sets.map((function(e,t){return[a(e),t]}))),c=oe(e.sets,e.combinations,t),u="yes"===t.compress;return{sets:u?e.sets.map((function(e){return{n:e.name,c:e.cardinality}})):e.sets.map((function(e){return{name:e.name,cardinality:e.cardinality}})),combinations:u?e.combinations.map((function(t){var n=Array.from(t.sets).map((function(e){return l.get(a(e))})).sort((function(e,t){return e-t})),r={c:t.cardinality,s:n.reduce((function(e,t){return e+Math.pow(2,t)}),0)};return t.name!==ue(n.map((function(t){return e.sets[t]})),t.type)&&(r.n=t.name),"intersection"!==t.type&&(r.type=t.type[0]),r})):e.combinations.map((function(e){return{name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map((function(e){return l.get(a(e))})).sort((function(e,t){return e-t}))}})),overlaps:c,selection:e.selection?o(e.selection):void 0,queries:e.queries.map((function(t){if(d(t))return{name:t.name,color:t.color,set:o(t.set)};var n=r(t.elems),a=e.sets.map((function(e){return n(e.elems).intersection})).concat(e.combinations.map((function(e){return n(e.elems).intersection})));return{name:t.name,color:t.color,overlaps:a}}))}}function me(e){return"number"==typeof e.c}function pe(e){return"number"==typeof e.c}function fe(e,t){var n;void 0===t&&(t={});var a=null!==(n=t.toKey)&&void 0!==n?n:J,r=function(){return 0};function s(e){return e.overlap=function(t){return r(e,t)},e}var i=e.sets.map((function(e){return s({name:pe(e)?e.n:e.name,cardinality:pe(e)?e.c:e.cardinality,type:"set",elems:[]})})),o=e.combinations.map((function(e){var t,n,a,r=me(e)?(a=e.s,i.filter((function(e,t){var n=Math.pow(2,t);return(a&n)===n}))):e.sets.map((function(e){return i[e]})),o={i:"intersection",u:"union",c:"composite"}[(null!==(t=e.type)&&void 0!==t?t:"i")[0]];return s({name:me(e)?null!==(n=e.n)&&void 0!==n?n:ue(r,o):e.name,cardinality:me(e)?e.c:e.cardinality,type:o,degree:r.length,sets:new Set(r),elems:[]})})),l=function(e,t,n,a){void 0===a&&(a=J);var r="string"==typeof e?ie(e):e,s=new Map(t.map((function(e,t){return[a(e),t]}))),i=new Map(n.map((function(e,n){return[a(e),n+t.length]})));return{setIndex:s,compute:function(e,t){if(e===t)return e.cardinality;var n=a(e),o=a(t),l=s.has(n)?s.get(n):i.get(n),c=s.has(o)?s.get(o):i.get(o);if(l===c)return e.cardinality;var u=Math.min(l,c),d=Math.max(l,c)-u-1;return u<0||u>=r.length||d<0||d>=r[u].length?0:r[u][d]},combinationIndex:i}}(e.overlaps,i,o,a),c=l.setIndex,u=l.combinationIndex,d=l.compute;function m(e){return"set"===e.type?i[e.index]:o[e.index]}return r=d,{sets:i,combinations:o,selection:e.selection?m(e.selection):void 0,queries:e.queries.map((function(e){if(e.set)return{name:e.name,color:e.color,set:m(e.set)};var t=e.overlaps;return{name:e.name,color:e.color,overlap:function(e){var n=a(e),r=c.has(n)?c.get(n):u.get(n);return null==r||r<0||r>=t.length?0:t[r]}}}))}}var he={isGenerateSetCombinationOptions:function(e){var t=e;return null!=e&&(null==t.type||["intersection","union"].includes(t.type))},isSet:h,isSetCombination:y,isSetLike:b,isSetQuery:function e(t){var n=t;return null!=t&&"string"==typeof n.name&&"string"==typeof n.color&&(c(n)||e(n)||u(n))}}}}]);