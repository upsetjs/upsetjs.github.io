(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{112:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return fn}));var a=n(37),r=n(0),i=n.n(r),s=n(156),l=n(5);class o{constructor(){this.sidePanelExpanded=new Set((localStorage.getItem("sidePanel")||"queries,options,sets,elems").split(",")),this.menu=!1,this.zen="T"===localStorage.getItem("zen"),this.theme="dark"===localStorage.getItem("theme")?"dark":"light",this.setTable={order:"desc",orderBy:"cardinality"},this.elemTable={order:"asc",orderBy:"name"},this.speedDial=!1,this.ref=Object(r.createRef)(),this.toast=null,Object(l.c)(()=>{localStorage.setItem("theme",this.theme)}),Object(l.c)(()=>{localStorage.setItem("zen",this.zen?"T":"F")}),Object(l.c)(()=>{localStorage.setItem("sidePanel",Array.from(this.sidePanelExpanded).join(","))})}setSpeedDial(e){this.speedDial=e}toggleSidePanelExpansion(e){this.sidePanelExpanded.has(e)?this.sidePanelExpanded.delete(e):this.sidePanelExpanded.add(e)}changeSetTableOptions(e){Object.assign(this.setTable,e)}changeElemTableOptions(e){Object.assign(this.elemTable,e)}closeToast(){this.toast=null}showToast(e){this.toast=e}toggleMenu(){this.menu=!this.menu}toggleTheme(){this.theme="light"===this.theme?"dark":"light"}toggleZen(){this.zen=!this.zen}}Object(s.b)([l.g],o.prototype,"sidePanelExpanded",void 0),Object(s.b)([l.g],o.prototype,"menu",void 0),Object(s.b)([l.g],o.prototype,"zen",void 0),Object(s.b)([l.g],o.prototype,"theme",void 0),Object(s.b)([l.g],o.prototype,"setTable",void 0),Object(s.b)([l.g],o.prototype,"elemTable",void 0),Object(s.b)([l.g],o.prototype,"speedDial",void 0),Object(s.b)([l.g],o.prototype,"ref",void 0),Object(s.b)([l.g],o.prototype,"toast",void 0),Object(s.b)([l.b],o.prototype,"setSpeedDial",null),Object(s.b)([l.b],o.prototype,"toggleSidePanelExpansion",null),Object(s.b)([l.b],o.prototype,"changeSetTableOptions",null),Object(s.b)([l.b],o.prototype,"changeElemTableOptions",null),Object(s.b)([l.b.bound],o.prototype,"closeToast",null),Object(s.b)([l.b],o.prototype,"showToast",null),Object(s.b)([l.b.bound],o.prototype,"toggleMenu",null),Object(s.b)([l.b.bound],o.prototype,"toggleTheme",null),Object(s.b)([l.b.bound],o.prototype,"toggleZen",null);var c=n(127),m=n(216);var u={id:"simpsons",name:"Simpsons",description:"Simpsons Dataset",author:"Alexander Lex",attrs:[],setCount:5,load:()=>{const e=m.map(e=>Object.assign({attrs:{}},e));return Promise.resolve({sets:Object(c.e)(e),elems:e})}},d=n(184);function h(e){const t=new URL(e);return fetch(`https://cors-anywhere.herokuapp.com/${e}`,{headers:{Origin:`${t.protocol}://${t.hostname}`}})}const p="https://vcg.github.io/upset/",f="https://vdl.sci.utah.edu/upset2";function b(e){var t,n,a;return{id:(a=e.name,a.replace(/[(); \-{}~%$^&@#]+/g," ").trim().split(" ").map(e=>e.slice(0,2)).join("")),name:e.name,description:null!==(t=e.description)&&void 0!==t?t:"",author:null!==(n=e.author)&&void 0!==n?n:"",attrs:e.meta.filter(e=>"float"===e.type||"integer"===e.type).map(e=>e.name),setCount:e.sets.length>0?e.sets[0].end-e.sets[0].start:void 0,load:()=>Object(s.a)(this,void 0,void 0,(function*(){const t=yield function(e){var t,n;return Object(s.a)(this,void 0,void 0,(function*(){const a=yield fetch(e.file).then(e=>e.text()),r=Object(d.parse)(a,{delimiter:e.separator}),i={start:e.sets[0].start,end:e.sets[0].end},s=null!==(n=null===(t=e.meta.find(e=>"id"===e.type))||void 0===t?void 0:t.index)&&void 0!==n?n:0,l=r.data,o=l[e.skip+e.header],c=l.slice(e.skip+e.header+1),m=o.slice(i.start,i.end);return c.map(t=>{const n=t.slice(i.start,i.end).map((e,t)=>[e,m[t]]).filter(([e,t])=>"1"===e).map(([e,t])=>t),a={};return e.meta.filter(e=>"float"===e.type||"integer"===e.type).forEach(e=>{a[e.name]=Number.parseFloat(t[e.index])}),{name:t[s],sets:n,attrs:a}})}))}(e);return{elems:t,sets:Object(c.e)(t)}}))}}function g(){return function(e=`${p}/datasets.json`,t=p){return Object(s.a)(this,void 0,void 0,(function*(){return(yield h(e).then(e=>e.json())).map(e=>h(`${t}/${e}`).then(e=>e.json()).then(e=>(e.file=e.file.startsWith("https")?e.file:`${t}/${e.file}`,b(e))))}))}(`${f}/data/datasets.json`,f)}function y(e){const t=new Map(e.map((e,t)=>[e,t]));return e=>t.get(e)}function v(e){var t,n;let a=e.elems;const r=0===e.combinationsOptions.min;if(!r){const t=new Set(e.visibleSets.map(e=>e.elems).flat());a=a.filter(e=>t.has(e))}const i=y(a),s=y(e.visibleSets),l=y(e.visibleCombinations),o=(null!==(n=null===(t=e.dataset)||void 0===t?void 0:t.attrs)&&void 0!==n?n:[]).filter(t=>e.selectedAttrs.has(t));return{all:r,sets:e.visibleSets,elems:a.map(e=>{if(0===o.length)return e.name;const t={name:e.name};return o.forEach(n=>t[n]=e.attrs[n]),t}),attrs:o,toElemIndex:i,toSetIndex:s,toCombinationIndx:l,toSetRef:e=>({type:e.type,index:"set"===e.type?s(e):l(e)})}}var E=n(39);function x(e){const t=v(e),n=e.dataset;return{name:n.name,description:n.description,author:n.author,elements:Object(l.j)(t.elems),attrs:Object(l.j)(t.attrs),sets:t.sets.map(e=>Object.assign(Object.assign({},e),{elems:e.elems.map(t.toElemIndex)})),combinations:Object(l.j)(e.combinationsOptions),props:Y(e.props,e.ui.theme),selection:e.hover?t.toSetRef(e.hover):void 0,queries:e.visibleQueries.map(e=>({name:e.name,color:e.color,set:t.toSetRef(e.set)})),interactive:!0}}n.p;var S=n(20),O=n(185);function w(e,t){return{id:t,name:e.name,author:e.author,description:e.description,creationDate:new Date,attrs:e.attrs,setCount:e.sets.length,load:()=>{const t=Object(S.a)(e,O.generateCombinations);return Promise.resolve({elems:e.elements,sets:t.sets,props:e.props,combinations:e.combinations})}}}let j=null;function C(){return j?Promise.resolve(j):n.e(4).then(n.bind(null,333)).then(e=>{class t extends e.default{constructor(){super("UpSet.js App DB"),this.version(1).stores({datasets:"++uid,id,name,creationDate"}),this.datasets=this.datasets||void 0}}return new t}).then(e=>j=e)}function N(e){const t=w(e,e.uid);return t.uid=e.uid,t.creationDate=new Date(e.creationDate),t}function k(e){return e.sort((e,t)=>t.creationDate-e.creationDate)}function z(e,t,n){var a=t-1,r=function(t){var r=t*a,i=Math.floor(r),s=r-i,l=e[i];return 0===s?l:n(l,e[Math.min(i+1,a)],s)};return{q1:r(.25),median:r(.5),q3:r(.75)}}function L(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e,t,n){return e+n*(t-e)}))}function M(e,t){void 0===t&&(t=e.length);var n=t,a=Math.floor((n+3)/2)/2,r=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:r(a),median:r((n+1)/2),q3:r(n+1-a)}}var A={hinges:M,fivenum:M,type7:L,quantiles:L,linear:function(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e,t,n){return e+(t-e)*n}))},lower:function(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e){return e}))},higher:function(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e,t){return t}))},nearest:function(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e,t,n){return n<.5?e:t}))},midpoint:function(e,t){return void 0===t&&(t=e.length),z(e,t,(function(e,t){return.5*(e+t)}))}};function q(e,t){void 0===t&&(t={});for(var n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=0,i=0,s=e.length,l=function(e){var t,n,a;return void 0===e&&(e={}),{coef:null!==(t=e.coef)&&void 0!==t?t:1.5,quantiles:(a=null!==(n=e.quantiles)&&void 0!==n?n:"type7","function"==typeof a?a:A[a]||L)}}(t),o=l.quantiles,c=l.coef,m=new Float32Array(s),u=0;u<s;++u){var d=e[u];null==d||Number.isNaN(d)||(m[i]=d,i++,d<n&&(n=d),d>a&&(a=d),r+=d)}var h=s-i;if(0===i)return{min:NaN,max:NaN,mean:NaN,missing:h,count:s,whiskerHigh:NaN,whiskerLow:NaN,outlier:[],median:NaN,q1:NaN,q3:NaN};for(var p=m.subarray(0,i).sort(),f=o(p,i),b=f.median,g=f.q1,y=f.q3,v=y-g,E="number"==typeof c&&c>0,x=E?Math.max(n,g-c*v):n,S=E?Math.min(a,y+c*v):a,O=[],w=x,j=0;j<i;++j){var C=p[j];if(x<C){w=C;break}0!==O.length&&O[O.length-1]===C||O.push(C)}for(var N=S,k=[],z=i-1;z>=0;--z){var M=p[z];if(M<S){N=M;break}0!==k.length&&k[k.length-1]===M||k.push(M)}return{min:n,max:a,count:s,missing:h,mean:r/i,whiskerHigh:N,whiskerLow:w,outlier:O.concat(k.reverse()),median:b,q1:g,q3:y}}function T(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function P(e){return Math.round(100*e)/100}var I=i.a.memo((function(e){var t=e.theme,n=void 0===t?"light":t,a=e.mode,r=void 0===a?"normal":a,s=e.values,l=e.orient,o=void 0===l?"horizontal":l,c=e.width,m=e.height,u=e.min,d=e.max,h=e.boxStyle,p=e.lineStyle,f=e.outlierStyle,b=e.boxPadding,g=void 0===b?.1:b,y=e.outlierRadius,v=void 0===y?3:y,E=e.numberFormat,x=void 0===E?function(e){return e.toFixed(2)}:E,S=q(s,T(e,["theme","mode","values","orient","width","height","min","max","boxStyle","lineStyle","outlierStyle","boxPadding","outlierRadius","numberFormat"]));if(Number.isNaN(S.median))return i.a.createElement("g",null);var O,w,j="indicator"===r?1:0,C="horizontal"===o,N=(w=(O=[u,d])[1]-O[0],function(e){return(e-O[0])/w}),k=function(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}([0,C?c:m]),z=function(e){return P(k(N(e)))},L={max:z(S.max),avg:z(S.mean),med:z(S.median),min:z(S.min),q1:z(S.q1),q3:z(S.q3),wh:z(S.whiskerHigh),wl:z(S.whiskerLow)},M=i.a.createElement("title",null,"Min: "+x(S.min)+", 25% Quantile: "+x(S.q1)+", Median: "+x(S.median)+", 75% Quantile: "+x(S.q3)+", Max: "+x(S.max)),A="light"===n?"#d3d3d3":"#666666",I={box:Object.assign({fill:A},h),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},p),outlier:Object.assign({fill:A},f)};if(C){var B=m/2,D=P(m*g)+j,R=m-D-j,$="M"+L.wl+","+j+" l0,"+(m-2*j)+" M"+L.wl+","+B+" L"+L.q1+","+B,F="M"+L.q3+","+B+" L"+L.wh+","+B+" M"+L.wh+","+j+" L"+L.wh+","+(m-j),H="M"+L.q1+","+D+" L"+L.q3+","+D+" L"+L.q3+","+R+" L"+L.q1+","+R+" L"+L.q1+","+D+" M"+L.med+","+D+" l0,"+(R-D),U=i.a.createElement("path",{d:$+"  "+F+" "+H,style:I.line});return"indicator"===r?U:i.a.createElement("g",null,M,"normal"===r&&i.a.createElement("rect",{x:L.q1,y:D,width:L.q3-L.q1,height:m-2*D,style:I.box}),U,";",S.outlier.map((function(e){return i.a.createElement("circle",{key:e,r:v,cy:B,cx:z(e),style:I.outlier},i.a.createElement("title",null,"$",x(e)))})))}var J=c/2,Q=P(c*g)+j,G=c-Q-j,_="M"+j+","+L.wl+" l"+(c-2*j)+",0 M"+J+","+L.wl+" L"+J+","+L.q1,W="M"+J+","+L.q3+" L"+J+","+L.wh+" M"+j+","+L.wh+" L"+(c-j)+","+L.wh,V="M"+Q+","+L.q1+" L"+Q+","+L.q3+" l"+(G-Q)+",0 L"+G+","+L.q1+" L"+Q+","+L.q1+" M"+Q+","+L.med+" l"+(G-Q)+",0",Y=i.a.createElement("path",{d:_+" "+W+" "+V,style:I.line});return"indicator"===r?Y:i.a.createElement("g",null,M,"normal"===r&&i.a.createElement("rect",{y:L.q1,x:Q,height:L.q3-L.q1,width:c-2*Q,style:I.box}),Y,S.outlier.map((function(e){return i.a.createElement("circle",{key:e,r:v,cx:J,cy:z(e),style:I.outlier},i.a.createElement("title",null,"$",x(e)))})))}));function B(e,t,n){var a=void 0===n?{}:n,r=a.size,s=void 0===r?100:r,l=a.position,o=a.name,c=void 0===o?e.toString():o,m=T(a,["size","position","name"]),u="function"==typeof e?e:function(t){return t[e]},d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;if(Array.isArray(t))t.forEach((function(e){var t=u(e);null==t||Number.isNaN(t)||(t<d&&(d=t),t>h&&(h=t))}));else{var p=t;d=p.min,h=p.max}return{name:c,position:l,size:s,render:function(e){var t=e.width,n=e.height,a=e.set,r=e.theme,s=a.elems.map(u);return i.a.createElement(I,Object.assign({values:s,width:t,height:n,min:d,max:h,theme:r},m))},renderSelection:function(e){var t=e.width,n=e.height,a=e.overlap,r=e.selectionColor,s=e.theme;if(null==a||0===a.length)return null;var l=a.map(u);return i.a.createElement(I,Object.assign({values:l,width:t,height:n,min:d,max:h,mode:"box",lineStyle:{stroke:r},outlierStyle:{fill:r},theme:s},m))},renderQuery:function(e){var t=e.width,n=e.height,a=e.overlap,r=e.query,s=e.secondary,l=e.theme;if(null==a||0===a.length)return null;var o=a.map(u);return i.a.createElement(I,Object.assign({values:o,width:t,height:n,min:d,max:h,mode:s?"indicator":"box",lineStyle:{stroke:r.color},outlierStyle:{fill:r.color},theme:l},m))}}}function D(e,t,n){const a=function(e,t){const n="function"==typeof e?e:t=>t[e],a="asc"===t?1:-1;return(e,t)=>{const r=n(e),i=n(t);return r===i?0:r<i?-a:a}}(t,n),r=e.map((e,t)=>({v:e,i:t}));return r.sort((e,t)=>{const n=a(e.v,t.v);return 0!==n?n:e.i-t.i}),r.map(e=>e.v)}var R=n(347);function $(e){const t=e.visibleSets,n=e.visibleCombinations,a=e.dataset.attrs.filter(t=>e.selectedAttrs.has(t));return Object(d.unparse)([["Name","Cardinality","Degree",t.map(e=>e.name),a.map(e=>function(e){return["Count","Median","Mean","Min","Max","Q1","Q3"].map(t=>`${e}_${t}`)}(e))].flat(2),...n.map(e=>[e.name,e.cardinality,e.degree,t.map(t=>e.sets.has(t)?1:0),a.map(t=>function(e,t){const n=q(t.map(t=>t.attrs[e]));return[n.count,n.median,n.mean,n.min,n.max,n.q1,n.q3]}(t,e.elems))].flat(2))])}function F(e,t){const n={};return e.forEach(e=>n[e]=t[e]),n}const H='<div id="app"></div>',U="#app {\n  width: 100vw;\n  height: 100vh;\n}";function J(e,t="UpSetJS."){const n=v(e),a=e.visibleSets.map(e=>Object.assign(Object.assign({},e),{elems:`CC${JSON.stringify(e.elems.map(n.toElemIndex))}.map(byIndex)CC`})),r=n.attrs.length>0?`\n  setAddons: ${JSON.stringify(n.attrs.map(e=>`CC${t}boxplotAddon((v) => v['${e}'], elems, { name: '${e}' })CC`).join(","))},\n  combinationAddons: ${JSON.stringify(n.attrs.map(e=>`CC${t}boxplotAddon((v) => v['${e}'], elems, { orient: 'vertical', name: '${e}' })CC`).join(","))}`:"";return`\nconst root = document.getElementById("app");\n\nconst elems = ${JSON.stringify(Object(l.j)(n.elems),null,2)};\n\nconst byIndex = (i) => elems[i];\n\nconst sets = ${JSON.stringify(Object(l.j)(a),null,2)};\n\nconst combinations = ${t}generateCombinations(sets, ${JSON.stringify(Object.assign(Object.assign({},e.combinationsOptions),{elems:"CCelemsCC"}),null,2)});\n\nfunction fromSetRef(ref) {\n  if (ref.type === "set") {\n    return sets[ref.index];\n  }\n  return combinations[ref.index];\n}\n\nlet selection = ${e.hover?`CCfromSetRef(${JSON.stringify(n.toSetRef(e.hover))})CC`:null};\nconst queries = ${JSON.stringify(e.visibleQueries.map(e=>({name:e.name,color:e.color,set:`CCfromSetRef(${JSON.stringify(n.toSetRef(e.set))})CC`})),null,2)};\n\nconst props = Object.assign({\n  width: root.clientWidth,\n  height: root.clientHeight,\n}, {\n  sets: sets,\n  combinations: combinations,\n  selection: selection,\n  queries: queries,${r}\n}, ${JSON.stringify(Y(e.props,e.ui.theme),null,2)});\n\nfunction render() {\n  ${t}renderUpSet(root, props);\n}\n\n// uncomment for interactivity\nprops.onHover = (s) => {\n  props.selection = s;\n  render();\n}\n//props.onClick = (s) => {\n//  console.log(s);\n//}\n\nrender();\n\n`.replace(/"CC/gm,"").replace(/CC"/gm,"")}const Q=[R.a[0],...R.a.slice(2)],G=Q.shift(),_=["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor"],W=["fontSizes","barPadding","dotPadding","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","heightRatios","padding","theme","widthRatios","fontFamily","numericScale","bandScale"];function V(e,t){const n=Object(O.fillDefaults)({theme:t,width:100,height:100,sets:[]}),a={};for(const t of e)a[t]=n[t];return a}function Y(e,t){const n=V(_.concat(W),t),a=(e,t)=>{const n={};for(const a of Object.keys(e)){const r=t[a],i=e[a];r!==i&&(n[a]=i)}return n},r=a(e,n);if(r.fontSizes){const e=a(r.fontSizes,n.fontSizes);0===Object.keys(e).length?delete r.fontSizes:r.fontSizes=e}return Array.isArray(r.heightRatios)&&r.heightRatios.every((e,t)=>e===n.heightRatios[t])&&delete r.heightRatios,Array.isArray(r.widthRatios)&&r.widthRatios.every((e,t)=>e===n.widthRatios[t])&&delete r.widthRatios,r}class Z{constructor(e,t){this.q=e,this.visible=t}}Object(s.b)([l.g.ref],Z.prototype,"q",void 0),Object(s.b)([l.g],Z.prototype,"visible",void 0);class X{constructor(){this.ui=new o,this.datasets=[],this.dataset=null,this.sets=[],this.elems=[],this.props=V(_.concat(W),this.ui.theme),this.hover=null,this.selection=null,this.queries=[],this.selectedAttrs=new Set,this.combinationsOptions={type:"intersection",min:1,max:5,empty:!1,limit:100,order:["cardinality","name"]},this.selectedSets=new Set,this.appendDatasets([u]),Promise.all([C().then(e=>e.datasets.toArray()).then(k).then(e=>e.map(N)).then(e=>this.appendDatasets(e)),g().then(e=>{e.forEach(e=>e.then(e=>this.appendDatasets([e])))})]).then(()=>{this.syncHistory()}),Object(l.c)(()=>{Object.assign(this.props,V(_.concat(W),this.ui.theme))}),Object(l.c)(()=>{document.title=this.title})}syncHistory(){const e=()=>{var e;const t=new URL(window.location.href);if(t.searchParams.has("ds")){const n=decodeURIComponent(t.searchParams.get("ds"));(null===(e=this.dataset)||void 0===e?void 0:e.id)!==n&&this.selectDataSet(n)}};window.addEventListener("popstate",e),e(),Object(l.c)(()=>{const t=new URLSearchParams;this.dataset&&t.set("ds",encodeURIComponent(this.dataset.id)),t.sort();const n=new URL(window.location.href);n.searchParams.toString()!==t.toString()&&(n.search=`?${t.toString()}`,window.removeEventListener("popstate",e),window.history.pushState(null,"",n.toString()),window.addEventListener("popstate",e))})}resetProps(){Object.assign(this.props,V(_.concat(W),this.ui.theme))}appendDatasets(e){e.length<=0||(this.datasets.push(...e),this.sortDatasets(),this.datasets.length>0&&!this.dataset&&this.loadDataSet(this.datasets[0]))}sortDatasets(){this.datasets=this.datasets.slice().sort((e,t)=>"simpsons"===e.id?-1:"simpsons"===t.id?1:e.name.localeCompare(t.name))}selectDataSet(e){var t;const n=null!==(t=this.datasets.find(t=>t.id===e))&&void 0!==t?t:null;this.loadDataSet(n)}pushDataSet(e){this.datasets.push(e),this.sortDatasets(),this.dataset=e,this.loadDataSet(e,()=>{(function(e){const t=Object.assign({creationDate:Date.now()},x(e));return t.name=`${t.name} - Local`,C().then(e=>e.datasets.add(t)).then(e=>N(Object.assign(t,{uid:e})))})(this).then(t=>{this.dataset=t,this.datasets.splice(this.datasets.indexOf(e),1,t)})}),this.ui.showToast({severity:"success",message:"Data set loaded"})}deleteDataSet(e){e.uid&&function(e){return C().then(t=>t.transaction("rw",t.datasets,()=>Promise.all([t.datasets.where("uid").equals(e.uid).delete()])))}(e).then(()=>Object(l.h)(()=>{this.datasets.splice(this.datasets.indexOf(e),1),this.dataset===e&&this.loadDataSet(this.datasets[0]),this.ui.showToast({severity:"success",message:"Data set deleted"})}))}loadDataSet(e,t){this.dataset=e,this.sets=[],this.elems=[],this.selectedSets=new Set,this.selectedAttrs=new Set(e?e.attrs.slice(0,1):[]),this.hover=null,this.selection=null,this.queries.splice(0,this.queries.length),this.dataset&&this.dataset.load().then(e=>Object(l.h)(()=>{var n,a;this.sets=e.sets,this.elems=e.elems,Object.assign(this.props,null!==(n=e.props)&&void 0!==n?n:{}),Object.assign(this.combinationsOptions,null!==(a=e.combinations)&&void 0!==a?a:{}),this.selectedSets=new Set(this.sortedSets.slice(0,5).map(e=>e.name)),t&&t()}))}setHover(e){this.hover=e}setSelection(e){this.selection=e}get visibleSets(){return this.sortedSets.filter(e=>this.selectedSets.has(e.name))}get visibleSetAddons(){return this.dataset?this.dataset.attrs.filter(e=>this.selectedAttrs.has(e)).map(e=>B(t=>t.attrs[e],this.elems,{name:e})):[]}get visibleCombinationAddons(){return this.dataset?this.dataset.attrs.filter(e=>this.selectedAttrs.has(e)).map(e=>B(t=>t.attrs[e],this.elems,{orient:"vertical",name:e})):[]}get sortedSelectedElems(){if(!this.selection)return[];const e=this.ui.elemTable.orderBy;return D(this.selection.elems,e.startsWith("attrs")?t=>t.attrs[e.slice(6)]:e,this.ui.elemTable.order)}get sortedSets(){return D(this.sets,this.ui.setTable.orderBy,this.ui.setTable.order)}setSelectedSets(e){this.selectedSets=e}setSelectedAttrs(e){this.selectedAttrs=e}get visibleCombinations(){return Object(c.g)(this.visibleSets,Object.assign({elems:this.elems},this.combinationsOptions))}changeCombinations(e){Object.assign(this.combinationsOptions,e)}changeProps(e){Object.assign(this.props,e),e.theme&&Object.assign(this.props,function(e){const t=Object(O.fillDefaults)({theme:e,width:100,height:100,sets:[]}),n={};for(const e of _)n[e]=t[e];return n}(e.theme))}changeFontSize(e){this.props.fontSizes=Object.assign({},this.props.fontSizes,e)}get visibleQueries(){const e=this.queries.filter(e=>e.visible).map(e=>e.q);return this.selection?[{name:this.selection.name,color:G,set:this.selection}].concat(e):e}deleteQuery(e){const t=this.queries.findIndex(t=>t.q===e);t>=0&&(this.queries.splice(t,1),Q.unshift(e.color))}persistSelection(){this.selection&&(this.queries.push(new Z({name:this.selection.name,set:this.selection,color:Q.length>0?Q.shift():"grey"},!0)),this.selection=null)}toggleQueryVisibility(e){const t=this.queries.find(t=>t.q===e);t&&(t.visible=!t.visible)}get title(){var e,t;return`UpSet - ${null!==(t=null===(e=this.dataset)||void 0===e?void 0:e.name)&&void 0!==t?t:"Unknown"}`}exportImage(e){this.ui.ref.current&&Object(O.exportSVG)(this.ui.ref.current,{type:e,title:this.title,theme:this.props.theme})}exportCSV(){const e=$(this),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t);Object(O.downloadUrl)(n,`${this.title}.csv`,document),URL.revokeObjectURL(n)}exportJSON(){const e=function(e){const t=Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json"},x(e));return JSON.stringify(t,null,2)}(this),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t);Object(O.downloadUrl)(n,`${this.title}.json`,document),URL.revokeObjectURL(n)}exportCodepen(){!function(e){const t={title:e.title,description:e.dataset.description,html:H,css:U,css_pre_processor:"scss",css_starter:"normalize",js:J(e),js_pre_processor:"babel",js_modernizr:!1,js_external:`https://unpkg.com/@upsetjs/bundle@${encodeURIComponent("^")}0.4.1`},n=JSON.stringify(t).replace(/"/g,"&quot;").replace(/'/g,"&apos;"),a=document.createElement("form");a.method="post",a.action="https://codepen.io/pen/define",a.target="_blank",a.rel="noopener noreferrer",a.innerHTML='<input type="hidden" name="data">',a.firstElementChild.value=n,document.body.appendChild(a),a.submit(),a.remove()}(this)}exportCodesandbox(){!function(e){const t={files:{"index.html":{content:`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <title>${e.title}</title>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n</head>\n<body>\n${H}\n</body>\n</html>`},"main.css":{content:U},"index.js":{content:`\nimport {renderUpSet, generateCombinations} from "@upsetjs/bundle";\nimport "./main.css";\n\n${J(e,"")}\n`},"package.json":{content:{name:e.dataset.name,description:e.dataset.description,dependencies:{"@upsetjs/bundle":"^0.4.1"}}}}},n=Object(E.compressToBase64)(JSON.stringify(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),a=document.createElement("form");a.method="post",a.action="https://codesandbox.io/api/v1/sandboxes/define",a.target="_blank",a.rel="noopener noreferrer",a.innerHTML='<input type="hidden" name="parameters">',a.firstElementChild.value=n,document.body.appendChild(a),a.submit(),a.remove()}(this)}exportJSFiddle(){!function(e){const t=document.createElement("form");t.method="post",t.action="https://jsfiddle.net/api/post/library/pure/",t.target="_blank",t.rel="noopener noreferrer",t.innerHTML='\x3c!--https://docs.jsfiddle.net/api/display-a-fiddle-from-post--\x3e\n      <input type="hidden" name="title">\n      <input type="hidden" name="description">\n      <input type="hidden" name="resources">\n      <input type="hidden" name="html">\n      <input type="hidden" name="css">\n      <input type="hidden" name="js">\n      <input type="hidden" name="wrap" value="d">\n      <input type="hidden" name="normalize_css" value="yes">\n      <input type="hidden" name="css_panel" value="1">\x3c!--SCSS--\x3e\n      <input type="hidden" name="js_panel" value="2">\x3c!--JS 1.7--\x3e';const n=(e,n)=>{t.querySelector(`[name="${e}"]`).value=n.toString()};n("title",e.title),n("description",e.dataset.description),n("html",H),n("css",U),n("js",J(e)),n("resources",`https://unpkg.com/@upsetjs/bundle@${encodeURIComponent("^")}0.4.1`),document.body.appendChild(t),t.submit(),t.remove()}(this)}sharedEmbedded(){!function(e){const t=x(e),n=Object(E.compressToEncodedURIComponent)(JSON.stringify(t)),a=new URL(window.location.toString());if(a.hash="",a.pathname="embed.html",a.searchParams.set("p",n),a.toString().length<2048)window.open(a.toString(),"_blank");else{a.searchParams.delete("p");const e=window.open(a.toString(),"_blank");null==e||e.addEventListener("load",()=>{null==e||e.postMessage(t,a.origin)})}}(this)}importFile(e){e.name.endsWith(".json")?function(e){return Object(S.b)(e).then(t=>w(t,e.name))}(e).then(e=>this.pushDataSet(e)):e.name.endsWith(".csv")&&function(e){const t=e.name.includes(".")?e.name.slice(0,e.name.lastIndexOf(".")):e.name;return new Promise(n=>{Object(d.parse)(e,{dynamicTyping:!0,header:!0,complete(a){const r=a.meta.fields,i=function(e,t){return t.filter(t=>e.every(e=>function(e){if(""===e||null==e)return!0;if("number"==typeof e)return 1===e||0===e;if("string"==typeof e){const t=e.toLowerCase();return"t"===t||"f"===t||"true"===t||"false"===t}return!1}(e[t])))}(a.data,r),s=function(e,t){return t.filter(t=>e.every(e=>"number"==typeof e[t]))}(a.data,r.filter(e=>!i.includes(e)));n({id:e.name,name:t,creationDate:new Date,author:"User",description:`imported from ${e.name}`,attrs:s,load:()=>{const e=a.data.map(e=>({name:e.name,sets:i.filter(t=>function(e){if(""===e||null==e)return!1;if("number"==typeof e)return 1===e;if("string"==typeof e){const t=e.toLowerCase();return"t"===t||"true"===t}return!1}(e[t])),attrs:F(s,e)}));return Promise.resolve({elems:e,sets:Object(c.e)(e)})}})}})})}(e).then(e=>this.pushDataSet(e))}}Object(s.b)([l.g],X.prototype,"ui",void 0),Object(s.b)([l.g.shallow],X.prototype,"datasets",void 0),Object(s.b)([l.g.ref],X.prototype,"dataset",void 0),Object(s.b)([l.g.shallow],X.prototype,"sets",void 0),Object(s.b)([l.g.shallow],X.prototype,"elems",void 0),Object(s.b)([l.g],X.prototype,"props",void 0),Object(s.b)([l.g.ref],X.prototype,"hover",void 0),Object(s.b)([l.g.ref],X.prototype,"selection",void 0),Object(s.b)([l.g],X.prototype,"queries",void 0),Object(s.b)([l.g],X.prototype,"selectedAttrs",void 0),Object(s.b)([l.g],X.prototype,"combinationsOptions",void 0),Object(s.b)([l.g],X.prototype,"selectedSets",void 0),Object(s.b)([l.b.bound],X.prototype,"resetProps",null),Object(s.b)([l.b],X.prototype,"appendDatasets",null),Object(s.b)([l.b],X.prototype,"selectDataSet",null),Object(s.b)([l.b.bound],X.prototype,"pushDataSet",null),Object(s.b)([l.b],X.prototype,"deleteDataSet",null),Object(s.b)([l.b.bound],X.prototype,"setHover",null),Object(s.b)([l.b.bound],X.prototype,"setSelection",null),Object(s.b)([l.d],X.prototype,"visibleSets",null),Object(s.b)([l.d],X.prototype,"visibleSetAddons",null),Object(s.b)([l.d],X.prototype,"visibleCombinationAddons",null),Object(s.b)([l.d],X.prototype,"sortedSelectedElems",null),Object(s.b)([l.d],X.prototype,"sortedSets",null),Object(s.b)([l.b],X.prototype,"setSelectedSets",null),Object(s.b)([l.b],X.prototype,"setSelectedAttrs",null),Object(s.b)([l.d],X.prototype,"visibleCombinations",null),Object(s.b)([l.b],X.prototype,"changeCombinations",null),Object(s.b)([l.b],X.prototype,"changeProps",null),Object(s.b)([l.b],X.prototype,"changeFontSize",null),Object(s.b)([l.d],X.prototype,"visibleQueries",null),Object(s.b)([l.b],X.prototype,"deleteQuery",null),Object(s.b)([l.b],X.prototype,"persistSelection",null),Object(s.b)([l.b],X.prototype,"toggleQueryVisibility",null),Object(s.b)([l.d],X.prototype,"title",null),Object(s.b)([l.b],X.prototype,"exportImage",null),Object(s.b)([l.b.bound],X.prototype,"exportCSV",null),Object(s.b)([l.b.bound],X.prototype,"exportJSON",null),Object(s.b)([l.b.bound],X.prototype,"exportCodepen",null),Object(s.b)([l.b.bound],X.prototype,"exportCodesandbox",null),Object(s.b)([l.b.bound],X.prototype,"exportJSFiddle",null),Object(s.b)([l.b.bound],X.prototype,"sharedEmbedded",null),Object(s.b)([l.b.bound],X.prototype,"importFile",null);const K=i.a.createContext(null),ee=({children:e})=>{const t=Object(a.c)(()=>new X);return i.a.createElement(K.Provider,{value:t}," ",e," ")},te=()=>{const e=i.a.useContext(K);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e};var ne=n(332),ae=n(244),re=n(331),ie=n(293),se=n(301),le=n(346),oe=n(302),ce=n(299),me=n(222),ue=n.n(me);const de=Object(ie.a)(e=>({root:{padding:e.spacing(1),display:"flex",flexDirection:"column"}}));var he=Object(a.a)(({id:e,title:t,className:n,children:a})=>{const r=te(),s=de();return i.a.createElement(le.a,{expanded:r.ui.sidePanelExpanded.has(e),onChange:()=>r.ui.toggleSidePanelExpansion(e),className:n},i.a.createElement(ce.a,{expandIcon:i.a.createElement(ue.a,null),"aria-controls":e,id:e},i.a.createElement(se.a,{variant:"h6"},t)),i.a.createElement(oe.a,{className:s.root},a))}),pe=Object(a.a)(()=>{const e=te(),t=e.dataset;return i.a.createElement(he,{id:"datasetinfo",title:"Dataset Information"},i.a.createElement(se.a,{variant:"subtitle2"},"Name:"),i.a.createElement(se.a,null,null==t?void 0:t.name),i.a.createElement(se.a,{variant:"subtitle2"},"#Sets:"),i.a.createElement(se.a,null,e.sets.length),i.a.createElement(se.a,{variant:"subtitle2"},"Author:"),i.a.createElement(se.a,null,null==t?void 0:t.author),i.a.createElement(se.a,{variant:"subtitle2"},"Description:"),i.a.createElement(se.a,null,null==t?void 0:t.description))}),fe=n(310),be=n(308),ge=n(311),ye=n(340),ve=Object(a.a)(()=>{var e;const t=te(),n=t.combinationsOptions,a=Array.isArray(n.order)?n.order.join(","):null!==(e=n.order)&&void 0!==e?e:"",r=e=>t.changeCombinations({[e.target.name]:Number.parseInt(e.target.value,10)});return i.a.createElement(he,{id:"options",title:"Set Combinations"},i.a.createElement(ye.a,{label:"Ordering",value:a,select:!0,required:!0,onChange:e=>t.changeCombinations({order:e.target.value.split(",")})},i.a.createElement(be.a,{value:"name"},"1. Name"),i.a.createElement(be.a,{value:"cardinality,name"},"1. Cardinality 2. Name"),i.a.createElement(be.a,{value:"cardinality,degree,name"},"1. Cardinality 2. Degree 3. Name"),i.a.createElement(be.a,{value:"degree,name"},"1. Degree 2. Name"),i.a.createElement(be.a,{value:"degree,cardinality,name"},"1. Degree 2. Cardinality 3. Name"),i.a.createElement(be.a,{value:"group,name"},"1. Set Group 2. Name"),i.a.createElement(be.a,{value:"group,cardinality,name"},"1. Set Group 2. Cardinality 3. Name"),i.a.createElement(be.a,{value:"group,degree,name"},"1. Set Group 2. Degree 3. Name"),i.a.createElement(be.a,{value:"group,degree,cardinality,name"},"1. Set Group 2. Degree 3. Cardinality 4. Name")),i.a.createElement(ye.a,{label:"Mode",value:n.type,select:!0,required:!0,onChange:e=>t.changeCombinations({type:"intersection"===String(e.target.value)?"intersection":"union"})},i.a.createElement(be.a,{value:"intersection"},"Set Intersections"),i.a.createElement(be.a,{value:"union"},"Set Unions")),i.a.createElement(ye.a,{label:"Mininum Set Members",value:n.min,name:"min",type:"number",required:!0,inputProps:{min:0,max:t.sets.length>0?t.sets.length:void 0},onChange:r}),i.a.createElement(ye.a,{label:"Maximum Set Members",name:"max",value:n.max,type:"number",required:!0,inputProps:{min:1,max:t.sets.length>0?t.sets.length:void 0},onChange:r}),i.a.createElement(ye.a,{label:"Max # Combinations",name:"limit",value:n.limit,type:"number",required:!0,inputProps:{min:1},onChange:r}),i.a.createElement(fe.a,{control:i.a.createElement(ge.a,{checked:n.empty,onChange:e=>t.changeCombinations({[e.target.name]:e.target.checked}),name:"empty",size:"small"}),label:"Include Empty Combinations"}))}),Ee=n(343),xe=n(313),Se=n(317),Oe=n(316),we=n(312),je=n(314),Ce=n(315),Ne=n(351);const ke=Object(ie.a)(e=>({pointer:{cursor:"pointer"},cell:{position:"relative"},bar:{position:"absolute",left:0,top:"6px",bottom:"6px",backgroundColor:e.palette.text.primary,opacity:.3}}));var ze=Object(a.a)(()=>{const e=te(),t=ke(),n=e.ui.setTable,a=e.sets,r=a.length,s=e.selectedSets,l=e.selectedSets.size,o=t=>()=>{const a=n.orderBy===t&&"asc"===n.order;e.ui.changeSetTableOptions({order:a?"desc":"asc",orderBy:t})},c=e.sortedSets.reduce((e,t)=>Math.max(e,t.cardinality),0);return i.a.createElement(he,{id:"sets",title:"Set Chooser"},i.a.createElement(we.a,null,i.a.createElement(xe.a,{size:"small"},i.a.createElement(je.a,null,i.a.createElement(Ce.a,null,i.a.createElement(Oe.a,{padding:"checkbox"},i.a.createElement(Ee.a,{indeterminate:l>0&&l<r,checked:r>0&&l===r,onChange:t=>{if(t.target.checked){const t=a.map(e=>e.name);e.setSelectedSets(new Set(t))}else e.setSelectedSets(new Set([]))},inputProps:{"aria-label":"select all sets"}})),i.a.createElement(Oe.a,{padding:"none",sortDirection:"name"===n.orderBy&&n.order},i.a.createElement(Ne.a,{active:"name"===n.orderBy,direction:"name"===n.orderBy?n.order:"asc",onClick:o("name")},"Name")),i.a.createElement(Oe.a,{sortDirection:"cardinality"===n.orderBy&&n.order},i.a.createElement(Ne.a,{active:"cardinality"===n.orderBy,direction:"cardinality"===n.orderBy?n.order:"asc",onClick:o("cardinality")},"Cardinality")))),e.ui.sidePanelExpanded.has("sets")&&i.a.createElement(Se.a,null,e.sortedSets.map(n=>{const a=(r=n.name,s.has(r));var r,l;return i.a.createElement(Ce.a,{hover:!0,onClick:t=>((t,n)=>{const a=new Set(s);a.has(n)?a.delete(n):a.add(n),e.setSelectedSets(a)})(0,n.name),role:"checkbox",tabIndex:-1,key:n.name,selected:a,className:t.pointer},i.a.createElement(Oe.a,{padding:"checkbox"},i.a.createElement(Ee.a,{checked:a})),i.a.createElement(Oe.a,{component:"th",scope:"row",padding:"none"},n.name),i.a.createElement(Oe.a,{align:"right",className:t.cell},i.a.createElement("div",{className:t.bar,style:{width:(l=n.cardinality,`${Math.round(100*l/c)}%`)}}),n.cardinality))})))))});const Le=Object(ie.a)(()=>({pointer:{cursor:"pointer"}}));var Me=Object(a.a)(()=>{var e,t;const n=te(),a=Le(),r=null!==(t=null===(e=n.dataset)||void 0===e?void 0:e.attrs)&&void 0!==t?t:[],s=n.selectedAttrs,l=s.size,o=r.length;if(0===o)return null;return i.a.createElement(he,{id:"attrs",title:"Attribute Chooser"},i.a.createElement(we.a,null,i.a.createElement(xe.a,{size:"small"},i.a.createElement(je.a,null,i.a.createElement(Ce.a,null,i.a.createElement(Oe.a,{padding:"checkbox"},i.a.createElement(Ee.a,{indeterminate:l>0&&l<o,checked:o>0&&l===o,onChange:e=>{if(e.target.checked){const e=r;n.setSelectedAttrs(new Set(e))}else n.setSelectedAttrs(new Set([]))},inputProps:{"aria-label":"select all attributes"}})),i.a.createElement(Oe.a,{padding:"none"},"Name"))),n.ui.sidePanelExpanded.has("attrs")&&i.a.createElement(Se.a,null,r.map(e=>{const t=(r=e,s.has(r));var r;return i.a.createElement(Ce.a,{hover:!0,onClick:t=>((e,t)=>{const a=new Set(s);a.has(t)?a.delete(t):a.add(t),n.setSelectedAttrs(a)})(0,e),role:"checkbox",tabIndex:-1,key:e,selected:t,className:a.pointer},i.a.createElement(Oe.a,{padding:"checkbox"},i.a.createElement(Ee.a,{checked:t})),i.a.createElement(Oe.a,{component:"th",scope:"row",padding:"none"},e))})))))}),Ae=n(298);const qe=Object(ie.a)(e=>({wrapper:{overflow:"auto",position:"relative",width:"15vw",borderRight:`1px solid ${e.palette.primary.main}`},root:{position:"absolute",left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"}}));var Te=Object(a.a)(()=>{const e=qe();return i.a.createElement(Ae.a,{className:e.wrapper},i.a.createElement("div",{className:e.root},i.a.createElement(ve,null),i.a.createElement(ze,null),i.a.createElement(Me,null),i.a.createElement(pe,null)))}),Pe=n(342),Ie=n(300),Be=Object(a.a)(()=>{const e=te(),t=e.props,n=t=>e.changeProps({[t.target.name]:t.target.value});return i.a.createElement(he,{id:"theme",title:"Customize Theme"},i.a.createElement(ye.a,{label:"Theme",value:t.theme,select:!0,required:!0,onChange:t=>e.changeProps({theme:"dark"===String(t.target.value)?"dark":"light"})},i.a.createElement(be.a,{value:"dark"},"Dark Theme"),i.a.createElement(be.a,{value:"light"},"Light Theme")),i.a.createElement(ye.a,{label:"Bar Color",required:!0,name:"color",value:t.color,type:"color",onChange:n}),i.a.createElement(ye.a,{label:"Text Color",required:!0,name:"textColor",value:t.textColor,type:"color",onChange:n}),i.a.createElement(ye.a,{label:"Selection Color",name:"selectionColor",value:t.selectionColor,type:"color",required:!0,onChange:n}),i.a.createElement(ye.a,{label:"Hover Hint Color",name:"hoverHintColor",value:t.hoverHintColor,type:"color",required:!0,onChange:n}),i.a.createElement(ye.a,{label:"Not Member Dot Color",name:"notMemberColor",value:t.notMemberColor,type:"color",required:!0,onChange:n}),i.a.createElement(ye.a,{label:"Alternating Background Color",name:"alternatingBackgroundColor",value:t.alternatingBackgroundColor,type:"color",onChange:n}))}),De=n(307),Re=n(309),$e=n(320),Fe=n(318),He=n(319),Ue=n(201),Je=n.n(Ue),Qe=n(224),Ge=n.n(Qe),_e=n(321),We=n(348);const Ve=Object(ie.a)(()=>({root:{}})),Ye=Object(a.a)(()=>{const e=te(),t=e.selection;return i.a.createElement(Re.a,null,i.a.createElement(Fe.a,{onClick:()=>e.persistSelection()},i.a.createElement(We.a,{title:"Persist Selection"},i.a.createElement(Ie.a,{edge:"start","aria-label":"persist"},i.a.createElement(Ge.a,{style:{color:G}})))),i.a.createElement(He.a,{primary:`${t.name}: ${t.cardinality}`}))}),Ze=Object(a.a)(({query:e,visible:t})=>{const n=te();return i.a.createElement(Re.a,null,i.a.createElement(Fe.a,{onClick:()=>n.toggleQueryVisibility(e)},i.a.createElement(Ee.a,{edge:"start",checked:t,tabIndex:-1,disableRipple:!0,style:{color:e.color}})),i.a.createElement(He.a,{primary:`${e.name}: ${e.set.cardinality}`}),i.a.createElement($e.a,null,i.a.createElement(We.a,{title:"Remove Query"},i.a.createElement(Ie.a,{edge:"end","aria-label":"delete",onClick:()=>n.deleteQuery(e)},i.a.createElement(Je.a,null)))))});var Xe=Object(a.a)(()=>{const e=te(),t=Ve();return i.a.createElement(he,{id:"queries",title:"Queries",className:t.root},i.a.createElement(De.a,{dense:!0},e.selection&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ye,null),i.a.createElement(_e.a,null)),e.queries.map(({q:e,visible:t})=>i.a.createElement(Ze,{key:e.name+e.color,query:e,visible:t}))))}),Ke=n(322),et=n(336),tt=n(323);function nt({label:e,value:t,onChange:n}){const a=Number.parseFloat(t),r=t.slice(a.toString().length);return i.a.createElement(ye.a,{label:e,value:a,type:"number",inputProps:{min:0,step:1},InputProps:{endAdornment:i.a.createElement(Ke.a,{position:"end"},i.a.createElement(et.a,{value:r,onChange:e=>{n(`${a}${e.target.value}`)}},i.a.createElement(be.a,{value:"px"},"px"),i.a.createElement(be.a,{value:"pt"},"pt")))},required:!0,onChange:e=>{n(`${e.target.value}${r}`)}})}var at=Object(a.a)(()=>{const e=te(),t=e.props,n=t=>e.changeProps({[t.target.name]:t.target.value}),a=t=>e.changeProps({[t.target.name]:Number.parseFloat(t.target.value)});return i.a.createElement(he,{id:"customize",title:"Customize"},i.a.createElement(ye.a,{label:"Set Name",name:"setName",value:t.setName,required:!0,onChange:n}),i.a.createElement(ye.a,{label:"Set Axis Offset",name:"setNameAxisOffset",value:t.setNameAxisOffset,type:"number",required:!0,onChange:a}),i.a.createElement(ye.a,{label:"Combination Name",name:"combinationName",value:t.combinationName,required:!0,onChange:n}),i.a.createElement(ye.a,{label:"Combination Axis Offset",name:"combinationNameAxisOffset",value:t.combinationNameAxisOffset,type:"number",required:!0,onChange:a}),i.a.createElement(ye.a,{label:"Font Family",name:"fontFamily",value:t.fontFamily,required:!0,onChange:n}),i.a.createElement(nt,{label:"Chart Font Size",value:t.fontSizes.chartLabel,onChange:t=>e.changeFontSize({chartLabel:t})}),i.a.createElement(nt,{label:"Set Label Font Size",value:t.fontSizes.setLabel,onChange:t=>e.changeFontSize({setLabel:t})}),i.a.createElement(_e.a,null),i.a.createElement(ye.a,{label:"Axis Scale",value:"linear"===t.numericScale?"linear":"log",select:!0,required:!0,onChange:t=>e.changeProps({numericScale:"log"===String(t.target.value)?"log":"linear"})},i.a.createElement(be.a,{value:"linear"},"Linear Scale"),i.a.createElement(be.a,{value:"log"},"Log Scale")),i.a.createElement(ye.a,{label:"Bar Padding",name:"barPadding",value:t.barPadding,type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:a}),i.a.createElement(ye.a,{label:"Dot Padding",name:"dotPadding",value:t.dotPadding,type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:a}),i.a.createElement(ye.a,{label:"Chart Padding",name:"padding",value:t.padding,type:"number",required:!0,onChange:a}),i.a.createElement(ye.a,{label:"Combination to Set Height Ratio",value:t.heightRatios[0],type:"number",required:!0,inputProps:{min:0,max:1,step:.1},onChange:t=>{const n=Number.parseFloat(t.target.value);e.changeProps({heightRatios:[n,1-n]})}}),i.a.createElement(ye.a,{label:"Combination to Set Width Ratio",value:t.widthRatios[2],type:"number",required:!0,inputProps:{min:0,max:1,step:.05},onChange:n=>{const a=Number.parseFloat(n.target.value),r=t.widthRatios[0]+t.widthRatios[1],i=(1-a)*t.widthRatios[0]/r,s=(1-a)*t.widthRatios[1]/r;e.changeProps({widthRatios:[i,s,a]})}}),i.a.createElement(ye.a,{label:"Set to Label Width Ratio",value:t.widthRatios[0]/(t.widthRatios[0]+t.widthRatios[1]),type:"number",required:!0,inputProps:{min:0,max:1,step:.05},onChange:n=>{const a=Number.parseFloat(n.target.value),r=t.widthRatios[0]+t.widthRatios[1],i=a*r,s=(1-a)*r;e.changeProps({widthRatios:[i,s,t.widthRatios[2]]})}}),i.a.createElement(_e.a,null),i.a.createElement(tt.a,{onClick:e.resetProps},"Reset"))});const rt=Object(ie.a)(()=>({root:{}}));var it=Object(a.a)(()=>{var e,t;const n=te(),a=rt(),r=n.ui.elemTable,s=e=>()=>{const t=r.orderBy===e&&"asc"===r.order;n.ui.changeElemTableOptions({order:t?"desc":"asc",orderBy:e})},l=n.sortedSelectedElems,o=null!==(t=null===(e=n.dataset)||void 0===e?void 0:e.attrs)&&void 0!==t?t:[];return i.a.createElement(he,{id:"elems",title:`Selected Elements${l.length>0?`: ${l.length}`:""}`},i.a.createElement(we.a,null,i.a.createElement(xe.a,{size:"small",className:a.root},i.a.createElement(je.a,null,i.a.createElement(Ce.a,null,i.a.createElement(Oe.a,{padding:"none",sortDirection:"name"===r.orderBy&&r.order},i.a.createElement(Ne.a,{active:"name"===r.orderBy,direction:"name"===r.orderBy?r.order:"asc",onClick:s("name")},"Name")),o.map(e=>i.a.createElement(Oe.a,{key:e,sortDirection:r.orderBy===`attrs.${e}`&&r.order},i.a.createElement(Ne.a,{active:r.orderBy===`attrs.${e}`,direction:r.orderBy===`attrs.${e}`?r.order:"asc",onClick:s(`attrs.${e}`)},e))))),n.ui.sidePanelExpanded.has("elems")&&i.a.createElement(Se.a,null,l.map(e=>i.a.createElement(Ce.a,{hover:!0,tabIndex:-1,key:e.name},i.a.createElement(Oe.a,{component:"th",scope:"row",padding:"none"},e.name),o.map(t=>i.a.createElement(Oe.a,{key:t,align:"right"},e.attrs[t]))))))))});const st=Object(ie.a)(e=>({wrapper:{overflow:"auto",position:"relative",width:"15vw",borderLeft:`1px solid ${e.palette.primary.main}`},root:{position:"absolute",left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"}}));var lt=Object(a.a)(()=>{const e=st();return i.a.createElement(Ae.a,{className:e.wrapper},i.a.createElement("div",{className:e.root},i.a.createElement(Xe,null),i.a.createElement(it,null),i.a.createElement(Be,null),i.a.createElement(at,null)))}),ot=n(245),ct=n(324);const mt=Object(ie.a)(()=>({root:{display:"flex",alignItems:"center",justifyContent:"center"}}));var ut=function({children:e}){const t=mt();return i.a.createElement("div",{className:t.root},null!=e?e:i.a.createElement(ct.a,null))},dt=n(325);const ht=Object(ie.a)(()=>({root:{display:"flex",padding:"1rem",flexGrow:1,"& > *":{flexGrow:1}},wrapper:{position:"absolute"}})),pt=Object(r.lazy)(()=>Promise.resolve().then(n.bind(null,185))),ft=Object(a.a)(({width:e,height:t})=>{const n=te(),a=ht();return i.a.createElement("div",null,i.a.createElement(r.Suspense,{fallback:i.a.createElement(dt.a,{variant:"rect",width:e,height:t})},e>0&&t>0&&i.a.createElement(pt,Object.assign({width:e,height:t,className:a.wrapper},n.props,{sets:n.visibleSets,queries:n.visibleQueries,combinations:n.visibleCombinations,selection:n.hover,onHover:n.setHover,onClick:n.setSelection,exportButtons:!1,setAddons:n.visibleSetAddons,combinationAddons:n.visibleCombinationAddons,ref:n.ui.ref}))))});function bt({width:e,height:t}){return i.a.createElement(ft,{width:e,height:t})}var gt=Object(a.a)(()=>{const e=te(),t=ht();return i.a.createElement("div",{className:t.root},e.sets.length>0&&e.dataset&&i.a.createElement(ot.a,{handleWidth:!0,handleHeight:!0,render:bt}),!e.dataset&&i.a.createElement(ut,null,"Choose Dataset"),0===e.sets.length&&e.dataset&&i.a.createElement(ut,null))}),yt=n(326),vt=n(327),Et=n(227),xt=n.n(Et),St=n(230),Ot=n.n(St),wt=n(231),jt=n.n(wt),Ct=n(233),Nt=n.n(Ct),kt=n(232),zt=n.n(kt),Lt=n(234),Mt=n.n(Lt),At=n(235),qt=n.n(At),Tt=n(236),Pt=n.n(Tt),It=n(349),Bt=n(329),Dt=n(229),Rt=n.n(Dt),$t=n(228),Ft=n.n($t),Ht=n(237),Ut=n.n(Ht),Jt=n(116);const Qt=Object(ie.a)(e=>({menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{},select:{marginLeft:"1rem",minWidth:"20em",color:e.palette.primary.contrastText},menu:{display:"flex",justifyContent:"space-between"},speeddial:{position:"absolute",right:e.spacing(2),bottom:-e.spacing(2)},grow:{flexGrow:1},line:{display:"flex",alignItems:"center"},file:{position:"absolute",left:-1e4,top:-1e4,visibility:"hidden"}}));function Gt(e){if(!e)return"Choose Dataset...";const t=e.setCount?`${e.setCount} sets`:null,n=e.attrs.length>0?`${e.attrs.length} attributes`:null;return t||n?`${e.name} (${[t,n].filter(Boolean).join(", ")})`:e.name}var _t=Object(a.a)(({className:e})=>{var t;const n=te(),a=Qt(),r=i.a.useRef(null);return i.a.createElement(yt.a,{position:"fixed",className:e},i.a.createElement(vt.a,null,i.a.createElement(Ie.a,{edge:"start",className:Object(Jt.a)(a.menuButton,n.ui.menu&&a.hide),color:"inherit","aria-label":"menu",onClick:n.ui.toggleMenu},i.a.createElement(xt.a,null)),i.a.createElement("div",{className:a.line,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{1===e.dataTransfer.files.length&&(e.preventDefault(),n.importFile(e.dataTransfer.files[0]))}},i.a.createElement(se.a,{variant:"h6",className:a.title},"UpSet.js: ",i.a.createElement(et.a,{className:a.select,onChange:e=>{n.selectDataSet(e.target.value)},value:(null===(t=n.dataset)||void 0===t?void 0:t.id)||"",renderValue:()=>Gt(n.dataset)},i.a.createElement(be.a,{value:""},"Choose Dataset..."),n.datasets.map(e=>i.a.createElement(be.a,{key:e.id,value:e.id,className:a.menu},i.a.createElement("span",null,Gt(e)),null!=e.uid&&i.a.createElement(Ie.a,{onClick:()=>n.deleteDataSet(e),edge:"end",size:"small"},i.a.createElement(Je.a,null)))))),i.a.createElement(We.a,{title:"CSV file or JSON UpSet Dump file"},i.a.createElement(Ie.a,{onClick:()=>{r.current&&r.current.click()}},i.a.createElement(Ft.a,null)))),i.a.createElement("div",{className:a.grow},i.a.createElement("input",{ref:r,type:"file",className:a.file,onChange:e=>{const t=e.target.files[0];e.target.value="",n.importFile(t)},accept:".json,.csv,application/json,text/csv"})),i.a.createElement(It.a,{ariaLabel:"Export",icon:i.a.createElement(Rt.a,null),direction:"left",hidden:null==n.dataset,className:a.speeddial,onClose:()=>n.ui.setSpeedDial(!1),onOpen:()=>n.ui.setSpeedDial(!0),open:n.ui.speedDial},i.a.createElement(Bt.a,{icon:i.a.createElement(Ot.a,null),tooltipTitle:"PNG Image",tooltipPlacement:"bottom",onClick:()=>n.exportImage("png")}),i.a.createElement(Bt.a,{icon:i.a.createElement(jt.a,null),tooltipTitle:"SVG Image",tooltipPlacement:"bottom",onClick:()=>n.exportImage("svg")}),i.a.createElement(Bt.a,{icon:i.a.createElement(zt.a,null),tooltipTitle:"CSV File",tooltipPlacement:"bottom",onClick:n.exportCSV}),i.a.createElement(Bt.a,{icon:i.a.createElement(Nt.a,null),tooltipTitle:"JSON File",tooltipPlacement:"bottom",onClick:n.exportJSON}),i.a.createElement(Bt.a,{icon:i.a.createElement(Mt.a,null),tooltipTitle:"Export to Codepen.io",tooltipPlacement:"bottom",onClick:n.exportCodepen}),i.a.createElement(Bt.a,{icon:i.a.createElement(qt.a,null),tooltipTitle:"Export to JSFiddle",tooltipPlacement:"bottom",onClick:n.exportJSFiddle}),i.a.createElement(Bt.a,{icon:i.a.createElement(Pt.a,null),tooltipTitle:"Export to CodeSandbox.io",tooltipPlacement:"bottom",onClick:n.exportCodesandbox}),i.a.createElement(Bt.a,{icon:i.a.createElement(Ut.a,null),tooltipTitle:"Open Embedded Version",tooltipPlacement:"bottom",onClick:n.sharedEmbedded}))))}),Wt=n(240),Vt=n.n(Wt),Yt=n(239),Zt=n.n(Yt),Xt=n(238),Kt=n.n(Xt),en=n(330);const tn=Object(ie.a)(()=>({grow:{flexGrow:1}}));var nn=Object(a.a)(()=>{const e=tn(),t=te();return i.a.createElement(i.a.Fragment,null,i.a.createElement(_e.a,null),i.a.createElement(De.a,null,i.a.createElement(en.a,null,"Options"),i.a.createElement(Re.a,{button:!0,onClick:t.ui.toggleZen},i.a.createElement(Fe.a,null,i.a.createElement(ge.a,{checked:t.ui.zen})),i.a.createElement(He.a,null,"Zen Mode")),i.a.createElement(Re.a,{button:!0,onClick:t.ui.toggleTheme},i.a.createElement(Fe.a,null,i.a.createElement(ge.a,{checked:"dark"===t.ui.theme})),i.a.createElement(He.a,null,"Dark Theme"))),i.a.createElement("div",{className:e.grow}),i.a.createElement(_e.a,null),i.a.createElement(De.a,{dense:!0,disablePadding:!0},i.a.createElement(en.a,null,"About"),i.a.createElement(Re.a,null,i.a.createElement(Fe.a,null,i.a.createElement(Kt.a,null)),i.a.createElement(He.a,null,"v","0.4.1")),i.a.createElement(Re.a,null,i.a.createElement(Fe.a,null,i.a.createElement(Zt.a,null)),i.a.createElement(He.a,null,i.a.createElement("a",{href:"https://github.com/upsetjs/upsetjs/blob/master/LICENSE.md",target:"_blank",rel:"noopener noreferrer"},"AGPL-3.0 and commercial license available"))),i.a.createElement(Re.a,null,i.a.createElement(Fe.a,null,i.a.createElement(Vt.a,null)),i.a.createElement(He.a,null,i.a.createElement("a",{href:"https://www.sgratzl.com",target:"_blank",rel:"noopener noreferrer"},"Samuel Gratzl"),", 2020"))))}),an=n(344),rn=n(337);function sn(e){return i.a.createElement(rn.a,Object.assign({elevation:6,variant:"filled"},e))}var ln=Object(a.a)(()=>{const e=te();return i.a.createElement(an.a,{open:null!=e.ui.toast,autoHideDuration:6e3,onClose:e.ui.closeToast},e.ui.toast?i.a.createElement(sn,{onClose:e.ui.closeToast,severity:e.ui.toast.severity},e.ui.toast.message):void 0)}),on=n(241),cn=n.n(on);const mn=Object(ie.a)(e=>({root:{width:"100vw",height:"100vh",display:"flex",flexGrow:1},appBar:{},appBarShift:{width:"calc(100% - 240px)",marginLeft:240},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object.assign(Object.assign({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{justifyContent:"flex-end"}),content:{display:"flex",flexDirection:"column",flexGrow:1,marginLeft:-240},main:{display:"flex",flexGrow:1},contentShift:{marginLeft:0}}));var un=Object(a.a)(()=>{const e=mn(),t=te();return i.a.createElement("div",{className:e.root},i.a.createElement(_t,{className:Object(Jt.a)(e.appBar,{[e.appBarShift]:t.ui.menu})}),i.a.createElement(Pe.a,{className:e.drawer,variant:"persistent",anchor:"left",open:t.ui.menu,classes:{paper:e.drawerPaper}},i.a.createElement("div",{className:e.drawerHeader},i.a.createElement(Ie.a,{onClick:t.ui.toggleMenu},i.a.createElement(cn.a,null))),i.a.createElement(nn,null)),i.a.createElement("div",{className:Object(Jt.a)(e.content,{[e.contentShift]:t.ui.menu})},i.a.createElement("div",{className:e.drawerHeader}),i.a.createElement("main",{className:e.main},!t.ui.zen&&i.a.createElement(Te,null),i.a.createElement(gt,null),!t.ui.zen&&i.a.createElement(lt,null))),i.a.createElement(ln,null))});const dn=Object(ae.a)({palette:{type:"dark"}}),hn=Object(ae.a)({palette:{type:"light"}}),pn=Object(a.a)(()=>{const e=te();return i.a.createElement(re.a,{theme:"dark"===e.ui.theme?dn:hn},i.a.createElement(ne.a,null),i.a.createElement(un,null))});function fn(){return i.a.createElement(ee,null,i.a.createElement(pn,null))}},127:function(e,t,n){"use strict";function a(e){return e instanceof Set?e.size:e.length}function r(e){var t=e instanceof Set?e:new Set(e),n=t.size,r={setA:n,setB:n,union:n,intersection:n};return function(i){if(i===e)return r;var s=0;i.forEach((function(e){t.has(e)&&s++}));var l=a(i);return{setA:n,setB:l,intersection:s,union:n+l-s}}}function i(e,t){if(a(e)<a(t)||e instanceof Set)return r(e)(t);var n=r(t)(e);return Object.assign({},n,{setA:n.setB,setB:n.setA})}function s(e){var t=e instanceof Set?e:new Set(e),n=Array.isArray(e)?e:Array.from(e),a={setA:n,setB:n,union:n,intersection:n};return function(r){if(r===e)return a;var i=[],s=n.slice();return r.forEach((function(e){t.has(e)?i.push(e):s.push(e)})),{setA:n,setB:Array.isArray(r)?r:Array.from(r),intersection:i,union:s}}}function l(e,t){if(a(e)<a(t)||e instanceof Set)return s(e)(t);var n=s(t)(e);return Object.assign({},n,{setA:n.setB,setB:n.setA})}function o(e){return Array.isArray(e.elems)}function c(e){return"function"==typeof e.overlap}function m(e){return null!=e.set}function u(e,t){if(c(e))return e.overlap;var n=r(o(e)?e.elems:e.set.elems);return function(e){return n(e.elems)[t]}}function d(e,t){if(c(e))return function(){return null};var n=s(o(e)?e.elems:e.set.elems);return function(e){return n(e.elems)[t]}}function h(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function p(e){return h(e)&&"set"===e.type}function f(e){var t=e;return h(e)&&["composite","union","intersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function b(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function g(e,t,n){for(var a=void 0===n?{}:n,r=a.min,i=void 0===r?0:r,s=a.max,l=void 0===s?1/0:s,o=Math.pow(2,e.length),c=0,m=1,u=0;u<o;u++){u>=m&&(c++,m<<=1);for(var d=[],h=0;h<c;h++)u&1<<h&&d.push(e[h]);d.length>=i&&d.length<=l&&t(d)}}function y(e,t,n){for(var a=void 0===n?{}:n,r=a.min,i=void 0===r?0:r,s=a.max,l=void 0===s?1/0:s,o=BigInt(0),c=BigInt(1),m=BigInt(2)<<BigInt(e.length),u=0,d=c,h=e.map((function(e,t){return c<<BigInt(t)})),p=o;p<m;p+=c){p>=d&&(u++,d<<=c);for(var f=[],b=0;b<u;b++)(p&h[b])!==o&&f.push(e[b]);f.length>=i&&f.length<=l&&t(f)}}function v(e,t,n){var a=void 0===n?{}:n,r=a.min,i=void 0===r?0:r,s=a.max,l=void 0===s?1/0:s,o=function(e){return e>=i&&e<=l};o(0)&&t([]),function n(a,r){if(!(a.length>=l))for(var i=r;i<e.length;i++)a.push(e[i]),o(a.length)&&t(a.slice()),n(a,i+1),a.pop()}([],0)}function E(e,t){void 0===t&&(t={});var n=function(n){return{forEach:function(a){return n(e,a,t)}}};return Math.pow(2,e.length)<Number.MAX_SAFE_INTEGER?n(g):void 0!==window.BigInt?n(y):n(v)}function x(e,t){return e.name.localeCompare(t.name)}function S(e,t){return t.cardinality-e.cardinality}function O(e,t){return e.degree-t.degree}function w(e){return function(t,n){return e.reduce((function(e,a){return 0===e?a(t,n):e}),0)}}function j(e){return function(t,n){var a=function(e){return e<0?Number.POSITIVE_INFINITY:e};return a(e.findIndex((function(e){return t.sets.has(e)})))-a(e.findIndex((function(e){return n.sets.has(e)})))}}function C(e,t){void 0===t&&(t=/[∩∪&|]/);var n=new Map(e.map((function(e){return[e.name,e]})));return function(e){return e.name.split(t).map((function(e){return n.get(e.trim())}))}}function N(e,t,n){void 0===n&&(n={});var a=t;if(n.order){var r=Array.isArray(n.order)?n.order:[n.order],i={cardinality:S,name:x,degree:O,group:j(e)},s=w(r.map((function(e){return i[e]})));a=a.sort(s)}return null!=n.limit?a.slice(0,n.limit):a}function k(e,t,n){var a=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(a),degree:a.length},e)}function z(e,t,n){return e.map((function(e){return k(e,t,n)}))}function L(e,t){var n=void 0===t?{}:t,a=n.min,r=void 0===a?0:a,i=n.max,s=void 0===i?1/0:i,l=n.empty,o=void 0!==l&&l,c=n.elems,m=void 0===c?[]:c,u=b(n,["min","max","empty","elems"]),d=new Map(e.map((function(e){return[e,new Set(e.elems)]})));var h=[];return E(e,{min:r,max:s}).forEach((function(e){var t=function(e){if(0===e.length){var t=Array.from(d.values());return m.filter((function(e){return t.every((function(t){return!t.has(e)}))}))}return 1===e.length?e[0].elems:e.reduce((function(e,t){return!e||e.length>t.elems.length?t.elems:e}),null).filter((function(t){return e.every((function(e){return d.get(e).has(t)}))}))}(e);(o||0!==t.length)&&h.push({type:"intersection",elems:t,sets:new Set(e),name:1===e.length?e[0].name:"("+e.map((function(e){return e.name})).join(" ∩ ")+")",cardinality:t.length,degree:e.length})})),N(e,h,u)}function M(e,t){var n=void 0===t?{}:t,a=n.min,r=void 0===a?2:a,i=n.max,s=void 0===i?1/0:i,l=n.empty,o=void 0!==l&&l,c=n.elems,m=void 0===c?[]:c,u=b(n,["min","max","empty","elems"]);var d=[];return E(e,{min:r,max:s}).forEach((function(t){var n=function(t){if(0===t.length){var n=new Set;return e.forEach((function(e){e.elems.forEach((function(e){return n.add(e)}))})),m.filter((function(e){return!n.has(e)}))}if(1===t.length)return t[0].elems;var a=t.reduce((function(e,t){return!e||e.length<t.elems.length?t.elems:e}),null),r=a.slice(),i=new Set(r);return t.forEach((function(e){e.elems!==a&&e.elems.forEach((function(e){i.has(e)||(r.push(e),i.add(e))}))})),r}(t);(o||0!==n.length)&&d.push({type:"union",elems:n,sets:new Set(t),name:1===t.length?t[0].name:"("+t.map((function(e){return e.name})).join(" ∪ ")+")",cardinality:n.length,degree:t.length})})),N(e,d,u)}function A(e,t){return"union"===t.type?M(e,t):L(e,t)}function q(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function T(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});var n=e;return t.order&&(n=n.slice().sort("cardinality"===t.order?w([S,x]):x)),null!=t.limit?n.slice(0,t.limit):n}(e.map(q),t)}function P(e){var t=new Map;return e.forEach((function(e){e.sets.forEach((function(n){t.has(n)?t.get(n).push(e):t.set(n,[e])}))})),Array.from(t).map((function(e){var t=e[0],n=e[1];return{type:"set",elems:n,name:t.toString(),cardinality:n.length}}))}n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return T})),n.d(t,"e",(function(){return P})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return L})),n.d(t,"i",(function(){return M})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"q",(function(){return s})),n.d(t,"r",(function(){return i})),n.d(t,"s",(function(){return r})),n.d(t,"t",(function(){return I}));var I={isGenerateSetCombinationOptions:function(e){var t=e;return null!=e&&(null==t.type||["intersection","union"].includes(t.type))},isSet:p,isSetCombination:f,isSetLike:function(e){return p(e)||f(e)},isSetQuery:function e(t){var n=t;return null!=t&&"string"==typeof n.name&&"string"==typeof n.color&&(o(n)||e(n)||c(n))}}},185:function(e,t,n){"use strict";n.r(t),n.d(t,"downloadUrl",(function(){return z})),n.d(t,"exportSVG",(function(){return k})),n.d(t,"fillDefaults",(function(){return g}));var a=n(0),r=n.n(a),i=n(127);n.d(t,"asCombination",(function(){return i.a})),n.d(t,"asCombinations",(function(){return i.b})),n.d(t,"asSet",(function(){return i.c})),n.d(t,"asSets",(function(){return i.d})),n.d(t,"extractSets",(function(){return i.e})),n.d(t,"fromSetName",(function(){return i.f})),n.d(t,"generateCombinations",(function(){return i.g})),n.d(t,"generateIntersections",(function(){return i.h})),n.d(t,"generateUnions",(function(){return i.i})),n.d(t,"isCalcQuery",(function(){return i.j})),n.d(t,"isElemQuery",(function(){return i.k})),n.d(t,"isSetQuery",(function(){return i.l})),n.d(t,"powerSet",(function(){return i.m})),n.d(t,"queryElemOverlap",(function(){return i.n})),n.d(t,"queryOverlap",(function(){return i.o})),n.d(t,"setElemOverlap",(function(){return i.p})),n.d(t,"setElemOverlapFactory",(function(){return i.q})),n.d(t,"setOverlap",(function(){return i.r})),n.d(t,"setOverlapFactory",(function(){return i.s})),n.d(t,"validators",(function(){return i.t}));var s=n(339),l=n(350),o=n(345),c={selectionColor:"#ffa500",color:"#000000",textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"#0000000d"},m={selectionColor:"#ffa500",color:"#cccccc",textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"#ffffff33"};var u={},d=[],h={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px"},p=[.2,.1,.7],f=[.6,.4],b={type:"intersection"};function g(e){var t,n=function(e){return"dark"===e?m:c}(e.theme);return Object.assign({theme:"light",padding:20,barPadding:.3,dotPadding:.7,combinations:b,selection:null,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:24,combinationNameAxisOffset:30,setName:"Set Size",fontFamily:"sans-serif",widthRatios:p,heightRatios:f,queries:d,queryLegend:null!=e.queries&&e.queries.length>0,exportButtons:!0,numericScale:"linear",bandScale:"band",className:"",fontSizes:h,classNames:u,style:u,styles:u,childrenFactories:u,setAddons:d,combinationAddons:d,emptySelection:!0},n,e,e.fontSizes?{fontSizes:Object.assign({},h,e.fontSizes)}:u)}function y(){}function v(e){return e?function(t){return function(){return e.call(this,t)}}:y}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function x(e){var t=0,n=0;return function(a){var r=0;return"before"===a.position?r=-(t+=a.size):(r=e+n,n+=a.size),r}}function S(e){return"upset-"+Math.random().toString(36).slice(4)}function O(e,t){return Object(s.a)().domain(e).range(t)}function w(e,t){return Object(l.a)().domain([Math.max(e[0],1),e[1]]).range(t)}function j(e,t,n){return Object(o.a)().domain(e).range(t).padding(n)}function C(e){return"band"===e?j:e}function N(e,t,n,a,r,s,l,o){var c,m="linear"===(c=a)?O:"log"===c?w:c,u=C(r),d=function(e){return Array.isArray(e)}(t)?t:Object(i.g)(e,t),h=u(e.map((function(e){return e.name})).reverse(),[0,n.sets.h],n.padding),p=u(d.map((function(e){return e.name})),[0,n.cs.w],n.padding),f=Math.min(h.bandwidth(),p.bandwidth())/2*l,b=Math.max(2,Math.min(h.bandwidth(),p.bandwidth())/2*o);return{id:S(),r:f,triangleSize:b,sets:{v:e,rv:e.slice().reverse(),x:m([0,e.reduce((function(e,t){return Math.max(e,t.cardinality)}),0)],[n.sets.w,0]),y:h,bandWidth:h.bandwidth(),cy:h.bandwidth()/2+n.cs.h},cs:{v:d,x:p,y:m([0,d.reduce((function(e,t){return Math.max(e,t.cardinality)}),0)],[n.cs.h,s]),cx:p.bandwidth()/2,bandWidth:p.bandwidth()}}}var k=function(e,t){var n=t.type,a=void 0===n?"png":n,r=t.title,i=void 0===r?"UpSet":r,s=t.theme,l=void 0===s?"light":s,o=t.toRemove;try{var c=function(){URL.revokeObjectURL(d)},m=e.cloneNode(!0);m.style.backgroundColor="dark"===l?"#303030":"white",o&&Array.from(m.querySelectorAll(o)).forEach((function(e){return e.remove()}));var u=new Blob([(new XMLSerializer).serializeToString(m)],{type:"image/svg+xml;charset=utf-8"}),d=URL.createObjectURL(u),h=function(){if("svg"!==a)return Promise.resolve(function(e,t){var n=t.ownerDocument.createElement("canvas"),a=t.getBoundingClientRect();n.width=a.width,n.height=a.height;var r=n.getContext("2d"),i=new Image(n.width,n.height);return new Promise((function(t){i.onload=function(){r.drawImage(i,0,0);var e=n.toDataURL("image/png");t(e)},i.src=e}))}(d,e)).then((function(t){z(t,i+"."+a,e.ownerDocument)}));z(d,i+"."+a,e.ownerDocument)}();return Promise.resolve(h&&h.then?h.then(c):c())}catch(e){return Promise.reject(e)}};function z(e,t,n){var a=n.createElement("a");a.href=e,a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",a.download=t,document.body.appendChild(a),a.click(),a.remove()}function L(e){var t=e.currentTarget.closest("svg"),n=e.currentTarget.dataset.type||"png";k(t,{type:n,toRemove:"."+e.currentTarget.className,theme:t.dataset.theme})}function M(e){var t=e.transform,n=e.styleId;return r.a.createElement("g",{className:"exportButtons-"+n,transform:t},r.a.createElement("g",{className:"exportButton-"+n,onClick:L,"data-type":"png",transform:"translate(-50, 0)"},r.a.createElement("title",null,"Download PNG Image"),r.a.createElement("rect",{y:-9,width:24,height:11,rx:2,ry:2}),r.a.createElement("text",{className:"exportTextStyle-"+n,x:12},"PNG")),r.a.createElement("g",{className:"exportButton-"+n,onClick:L,"data-type":"svg",transform:"translate(-24, 0)"},r.a.createElement("title",null,"Download SVG Image"),r.a.createElement("rect",{y:-9,width:24,height:11,rx:2,ry:2}),r.a.createElement("text",{className:"exportTextStyle-"+n,x:12},"SVG")))}var A=r.a.memo((function(e){var t=e.queries,n=e.size,a=e.style,s=e.data;return r.a.createElement("text",{transform:"translate("+n.legend.x+",4)",style:a.styles.legend,className:E("legendTextStyle-"+a.id,a.classNames.legend)},t.map((function(e,t){var n=null;return Object(i.l)(e)?n=e.set.cardinality:Object(i.k)(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement("tspan",{className:"fillQ"+t+"-"+s.id},"  ⬤ "),r.a.createElement("tspan",null,e.name,null!=n?": "+n:""))})))}));var q=r.a.memo((function(e){var t=e.pos,n=e.spacing,a=e.tickSizeInner,i=e.orient,s=e.name,l=e.style,o="top"===i||"left"===i?-1:1;return r.a.createElement("g",{transform:"translate(0, "+(t+.5)+")"},r.a.createElement("text",{x:o*n,dy:"0.32em",className:E("axisTextStyle-"+l.id,"right"===i?"startText-"+l.id:"endText-"+l.id,l.classNames.axisTick),style:l.styles.axisTick},s),r.a.createElement("line",{x2:o*a,className:"axisLine-"+l.id}))})),T=r.a.memo((function(e){var t=e.pos,n=e.name,a=e.spacing,i=e.orient,s=e.tickSizeInner,l=e.style,o="top"===i||"left"===i?-1:1;return r.a.createElement("g",{transform:"translate("+(t+.5)+", 0)"},r.a.createElement("text",{y:o*a,dy:"top"===i?"0em":"0.71em",className:E("axisTextStyle-"+l.id,l.classNames.axisTick),style:l.styles.axisTick},n),r.a.createElement("line",{y2:o*s,className:"axisLine-"+l.id}))}));function P(e){var t=e.d3Scale,n=e.orient,a=e.tickSizeInner,i=void 0===a?6:a,s=e.tickSizeOuter,l=void 0===s?6:s,o=e.tickPadding,c=void 0===o?3:o,m=e.style,u=e.transform,d=Math.max(i,0)+c,h=t.range(),p=+h[0]+.5,f=+h[h.length-1]+.5,b="top"===n||"left"===n?-1:1,g="left"===n||"right"===n?q:T,y=function(e){return"function"==typeof e.bandwidth}(t)?function(e){var t=e.domain(),a=function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return e(n)+t}}(e);return t.map((function(e){return r.a.createElement(g,{key:e,pos:a(e),name:e,spacing:d,tickSizeInner:i,orient:n,style:m})}))}(t):function(e){return function(e,t){if(!t)return e;var n=e.map((function(e){return Math.round(e)})),a=Number.NEGATIVE_INFINITY;return n.filter((function(e){return(a===Number.NEGATIVE_INFINITY||a!==e)&&(a=e,!0)}))}(e.ticks(),!0).map((function(t){return r.a.createElement(g,{key:t,pos:e(t),name:String(t),spacing:d,tickSizeInner:i,orient:n,style:m})}))}(t);return r.a.createElement("g",{transform:u},y,r.a.createElement("path",{className:"axisLine-"+m.id,d:"left"===n||"right"===n?l?"M"+b*l+","+p+"H0.5V"+f+"H"+b*l:"M0.5,"+p+"V"+f:l?"M"+p+","+b*l+"V0.5H"+f+"V"+b*l:"M"+p+",0.5H"+f}))}var I=r.a.memo((function(e){var t=e.size,n=e.style,a=e.data,i=x(t.sets.w+t.labels.w+t.cs.w),s=x(t.cs.h+t.sets.h);return r.a.createElement("g",null,r.a.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")"},r.a.createElement(P,{d3Scale:a.cs.y,orient:"left",style:n}),r.a.createElement("line",{x1:0,x2:t.cs.w,y1:t.cs.h+1,y2:t.cs.h+1,className:"axisLine"}),r.a.createElement("text",{className:E("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-n.cs.offset+", "+t.cs.h/2+")rotate(-90)"},n.cs.name),t.cs.addons.map((function(e){return r.a.createElement("text",{key:e.name,className:E("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-n.cs.offset+", "+(s(e)+e.size/2)+")rotate(-90)"},e.name)}))),r.a.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")"},r.a.createElement(P,{d3Scale:a.sets.x,orient:"bottom",transform:"translate(0, "+t.sets.h+")",style:n}),r.a.createElement("text",{className:E("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+t.sets.w/2+", "+(t.sets.h+n.sets.offset)+")"},n.sets.name),t.sets.addons.map((function(e){return r.a.createElement("text",{key:e.name,className:E("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+(i(e)+e.size/2)+", "+(t.sets.h+n.sets.offset)+")"},e.name)}))))})),B=r.a.memo((function(e){var t=e.cx,n=e.r,a=e.cy,i=e.name,s=e.className,l=e.style;return r.a.createElement("circle",{r:n,cx:t,cy:a,className:s,style:l},r.a.createElement("title",null,i))})),D=r.a.memo((function(e){var t=e.d,n=e.onClick,a=e.onMouseEnter,i=e.onMouseLeave,s=e.className,l=e.data,o=e.size,c=e.style,m=e.children,u=l.cs.y(t.cardinality),d=x(o.cs.h+o.sets.h);return r.a.createElement("g",{key:t.name,transform:"translate("+l.cs.x(t.name)+", 0)",onMouseEnter:a(t),onMouseLeave:i,onClick:n(t),className:s},r.a.createElement("title",null,t.name,": ",t.cardinality),r.a.createElement("rect",{y:-o.cs.before,width:l.cs.bandWidth,height:o.sets.h+o.cs.h+o.cs.before+o.cs.after,className:"hoverBar-"+c.id}),r.a.createElement("rect",{y:u,height:o.cs.h-u,width:l.cs.bandWidth,className:E("fillPrimary-"+c.id,c.classNames.bar),style:c.styles.bar}),r.a.createElement("text",{y:u-c.barLabelOffset,x:l.cs.bandWidth/2,style:c.styles.barLabel,className:E("cBarTextStyle-"+c.id,c.classNames.barLabel)},t.cardinality),r.a.createElement("text",{y:-c.barLabelOffset-o.cs.before,x:l.cs.bandWidth/2,style:c.styles.barLabel,className:E("hoverBarTextStyle-"+c.id,c.classNames.barLabel)},t.name),l.sets.v.map((function(e){return r.a.createElement(B,{key:e.name,r:l.r,cx:l.cs.cx,cy:l.sets.y(e.name)+l.sets.cy,name:t.sets.has(e)?e.name:t.name,style:c.styles.dot,className:E(t.sets.has(e)?"fillPrimary-"+c.id:"fillNotMember-"+c.id,c.classNames.dot)})})),t.sets.size>1&&r.a.createElement("line",{x1:l.cs.cx,y1:l.sets.y(l.sets.v.find((function(e){return t.sets.has(e)})).name)+l.sets.cy,x2:l.cs.cx,y2:l.sets.y(l.sets.rv.find((function(e){return t.sets.has(e)})).name)+l.sets.cy,className:"upsetLine-"+l.id}),o.cs.addons.map((function(e){return r.a.createElement("g",{key:e.name,transform:"translate(0,"+d(e)+")"},e.render({set:t,width:l.cs.bandWidth,height:e.size,theme:c.theme}))})),m)})),R=r.a.memo((function(e){var t=e.d,n=e.i,a=e.onMouseEnter,i=e.onMouseLeave,s=e.onClick,l=e.className,o=e.size,c=e.data,m=e.style,u=e.children,d=c.sets.x(t.cardinality),h=x(o.sets.w+o.labels.w+o.cs.w);return r.a.createElement("g",{transform:"translate(0, "+c.sets.y(t.name)+")",onMouseEnter:a(t),onMouseLeave:i,onClick:s(t),className:l},r.a.createElement("title",null,t.name,": ",t.cardinality),r.a.createElement("rect",{x:-o.sets.before,width:o.sets.w+o.labels.w+o.cs.w+o.sets.after,height:c.sets.bandWidth,className:"hoverBar-"+m.id}),n%2==1&&r.a.createElement("rect",{x:o.sets.w,width:o.labels.w+o.cs.w+o.sets.after,height:c.sets.bandWidth,className:"fillAlternating-"+m.id}),r.a.createElement("rect",{x:d,width:o.sets.w-d,height:c.sets.bandWidth,className:E("fillPrimary-"+m.id,m.classNames.bar),style:m.styles.bar}),r.a.createElement("text",{x:d,dx:-m.barLabelOffset,y:c.sets.bandWidth/2,style:m.styles.barLabel,className:E("sBarTextStyle-"+m.id,m.classNames.barLabel)},t.cardinality),r.a.createElement("text",{x:o.sets.w+o.labels.w/2,y:c.sets.bandWidth/2,className:E("setTextStyle-"+m.id,m.classNames.setLabel),style:m.styles.setLabel,clipPath:"url(#clip-"+o.id+")"},t.name),o.sets.addons.map((function(e){return r.a.createElement("g",{key:e.name,transform:"translate("+h(e)+",0)"},e.render({set:t,width:e.size,height:c.sets.bandWidth,theme:m.theme}))})),u)})),$=r.a.memo((function(e){var t=e.data,n=e.size,a=e.style,i=e.onHover,s=e.onClick,l=e.childrens,o=r.a.useMemo((function(){return[v(s),v(i),i?function(){return i(null)}:void 0]}),[s,i]),c=o[0],m=o[1],u=o[2];return r.a.createElement("g",{className:s?"clickAble-"+a.id:void 0},r.a.createElement("g",{transform:"translate("+n.sets.x+","+n.sets.y+")"},t.sets.v.map((function(e,o){return r.a.createElement(R,{key:e.name,d:e,i:o,onClick:c,onMouseEnter:m,onMouseLeave:u,className:s||i?"interactive-"+a.id:void 0,data:t,style:a,size:n},l.set&&l.set(e))}))),r.a.createElement("g",{transform:"translate("+n.cs.x+","+n.cs.y+")"},t.cs.v.map((function(e){return r.a.createElement(D,{key:e.name,d:e,onClick:c,onMouseEnter:m,onMouseLeave:u,className:s||i?"interactive-"+a.id:void 0,data:t,style:a,size:n},l.combinations&&l.combinations(e))}))))}));function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function H(e){var t=e.data,n=e.size,a=e.style,i=e.elemOverlap,s=e.secondary,l=e.tooltip,o=e.suffix,c=e.transform,m=e.empty,u=e.combinationAddons,d=t.cs.bandWidth,h=n.cs.h+n.sets.h,p=n.cs.h,f=E("fill"+o,!l&&"pnone-"+a.id,a.classNames.bar);return r.a.createElement("g",{transform:c},t.cs.v.map((function(e){var n=t.cs.x(e.name);if(m&&!s)return r.a.createElement("rect",{key:e.name,x:n,y:p,height:0,width:d,className:f,style:a.styles.bar},l&&r.a.createElement("title",null));var o=i(e);if(0===o)return null;var c=t.cs.y(o),b=l&&r.a.createElement("title",null,e.name+" ∩ "+l+": "+o),g=s?r.a.createElement("path",{key:e.name,transform:"translate("+n+", "+c+")",d:"M0,-1 l"+d+",0 l0,2 l"+-d+",0 L-"+t.triangleSize+",-"+t.triangleSize+" L-"+t.triangleSize+","+t.triangleSize+" Z",className:f},b):r.a.createElement("rect",{key:e.name,x:n,y:c,height:p-c,width:d,className:f,style:a.styles.bar},b),y=x(h),v=u.map((function(t){var i=y(t),s=t.render({set:e,width:d,height:t.size,theme:a.theme});return s?r.a.createElement("g",{key:t.name,transform:"translate("+n+","+i+")"},s):null})).filter(Boolean);return 0===v.length?g:r.a.createElement("g",{key:e.name},g,v)})))}function U(e){var t=e.data,n=e.size,a=e.style,i=e.elemOverlap,s=e.suffix,l=e.secondary,o=e.empty,c=e.tooltip,m=e.setAddons,u=e.transform,d=n.sets.w,h=n.sets.w+n.labels.w+n.cs.w,p=t.sets.bandWidth,f=E("fill"+s,!c&&" pnone-"+a.id,a.classNames.bar);return r.a.createElement("g",{transform:u},t.sets.v.map((function(e){var n=t.sets.y(e.name);if(o&&!l)return r.a.createElement("rect",{key:e.name,x:d,y:n,width:0,height:p,className:f,style:a.styles.bar},c&&r.a.createElement("title",null));var s=i(e);if(0===s)return null;var u=t.sets.x(s),b=c&&r.a.createElement("title",null,e.name+" ∩ "+c+": "+s),g=l?r.a.createElement("path",{key:e.name,transform:"translate("+u+", "+(n+p)+")",d:"M1,0 l0,"+-p+" l-2,0 l0,"+p+" L-"+t.triangleSize+","+t.triangleSize+" L"+t.triangleSize+","+t.triangleSize+" Z",className:f},b):r.a.createElement("rect",{key:e.name,x:u,y:n,width:d-u,height:p,className:f,style:a.styles.bar},b),y=x(h),v=m.map((function(t){var i=y(t),s=t.render({set:e,width:t.size,height:p,theme:a.theme});return s?r.a.createElement("g",{key:t.name,transform:"translate("+i+","+n+")"},s):null})).filter(Boolean);return 0===v.length?g:r.a.createElement("g",{key:e.name},g,v)})))}var J=[],Q=r.a.memo((function(e){var t=e.size,n=e.data,s=e.style,l=e.onHover,o=e.secondary,c=e.queries,m=t.sets.addons.some((function(e){return null!=e.renderQuery}))||t.cs.addons.some((function(e){return null!=e.renderQuery})),u=Object(a.useMemo)((function(){return c.map((function(e){return F({},e,{overlap:Object(i.o)(e,"intersection"),elemOverlap:m?Object(i.n)(e,"intersection"):null})}))}),[c,m]);function d(e,t,n,a){return F({},e,{render:function(r){var i=n(r.set);return e.renderQuery?e.renderQuery(F({query:t,overlap:i,secondary:a},r)):null}})}return r.a.createElement("g",{className:l&&!o?"pnone-"+s.id:void 0},r.a.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")"},u.map((function(e,a){return r.a.createElement(U,{key:e.name,data:n,size:t,style:s,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:o||a>0,tooltip:l&&!(o||a>0)?void 0:e.name,setAddons:0===t.sets.addons.length?J:t.sets.addons.map((function(t){return d(t,e,e.elemOverlap,o||a>0)}))})}))),r.a.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")"},u.map((function(e,a){return r.a.createElement(H,{key:e.name,data:n,size:t,style:s,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:o||a>0,tooltip:l&&!(o||a>0)?void 0:e.name,combinationAddons:0===t.cs.addons.length?J:t.cs.addons.map((function(t){return d(t,e,e.elemOverlap,o||a>0)}))})}))))}));function G(e){var t=e.data,n=e.size,a=e.style,i=e.selection;if(!i||"set"!==i.type)return null;var s=i;return r.a.createElement("rect",{y:t.sets.y(s.name),width:n.labels.w+n.cs.w+n.sets.after,height:t.sets.bandWidth,className:"selectionHint-"+a.id})}function _(e){var t=e.data,n=e.size,a=e.style,i=e.selection,s=t.sets.bandWidth/2,l=t.cs.cx,o=t.r,c=n.sets.h+n.sets.after,m=t.cs.bandWidth;if(!i||"set"===i.type)return null;var u=i;return r.a.createElement("g",{transform:"translate("+(n.labels.w+t.cs.x(u.name))+", 0)"},r.a.createElement("rect",{width:m,height:c,className:"selectionHint-"+a.id}),t.sets.v.filter((function(e){return u.sets.has(e)})).map((function(e){return r.a.createElement(B,{key:e.name,r:1.1*o,cx:l,cy:t.sets.y(e.name)+s,name:e.name,className:E("fillSelection-"+a.id,"pnone-"+a.id,a.classNames.dot),style:a.styles.dot})})),u.sets.size>1&&r.a.createElement("line",{x1:l,y1:t.sets.y(t.sets.v.find((function(e){return u.sets.has(e)})).name)+s,x2:l,y2:t.sets.y(t.sets.rv.find((function(e){return u.sets.has(e)})).name)+s,className:"upsetSelectionLine-"+t.id}))}var W=[];function V(e){return null!=e&&!Array.isArray(e)}function Y(){return 0}function Z(e){var t,n,a=e.size,s=e.data,l=e.style,o=e.selection,c=e.onHover,m=l.emptySelection,u=o?(t=Array.isArray(o)?o:o.elems,n=Object(i.s)(t),function(e){return n(e.elems).intersection}):Y,d=Array.isArray(o)?"Array("+o.length+")":null==o?void 0:o.name,h=a.sets.addons.some((function(e){return null!=e.renderSelection}))||a.cs.addons.some((function(e){return null!=e.renderSelection})),p=o&&h?function(e){var t=Object(i.q)(e);return function(e){return t(e.elems).intersection}}(Array.isArray(o)?o:o.elems):null;function f(e){return F({},e,{render:function(t){var n=p?p(t.set):null;return e.renderSelection?e.renderSelection(F({selection:o,selectionColor:l.selectionColor,overlap:n},t)):null}})}return r.a.createElement("g",{className:c?"pnone-"+l.id:void 0},(o||m)&&r.a.createElement(H,{data:s,size:a,style:l,transform:"translate("+a.cs.x+","+a.cs.y+")",empty:m&&!o,elemOverlap:u,suffix:"Selection-"+l.id,tooltip:c?void 0:d,combinationAddons:0===a.cs.addons.length?W:a.cs.addons.map(f)}),(o||m)&&r.a.createElement(U,{data:s,size:a,style:l,transform:"translate("+a.sets.x+","+a.sets.y+")",empty:m&&!o,elemOverlap:u,suffix:"Selection-"+l.id,tooltip:c?void 0:d,setAddons:0===a.sets.addons.length?W:a.sets.addons.map(f)}),r.a.createElement("g",{transform:"translate("+a.labels.x+","+a.labels.y+")"},V(o)&&r.a.createElement(G,{data:s,size:a,style:l,selection:o}),V(o)&&r.a.createElement(_,{data:s,size:a,style:l,selection:o})))}var X=r.a.forwardRef((function(e,t){var n=g(e),i=n.className,s=n.style,l=n.width,o=n.height,c=n.padding,m=n.barPadding,u=n.sets,d=n.combinations,h=n.selection,p=void 0===h?null:h,f=n.onClick,b=n.onHover,y=n.theme,v=n.dotPadding,x=n.childrenFactories,O=n.widthRatios,w=n.heightRatios,j=n.queries,C=void 0===j?[]:j,k=n.setAddons,z=n.combinationAddons,L=n.alternatingBackgroundColor,q=n.bandScale,T=n.barLabelOffset,P=n.classNames,B=n.color,D=n.combinationName,R=n.combinationNameAxisOffset,F=n.exportButtons,H=n.fontFamily,U=n.fontSizes,J=n.hoverHintColor,G=n.notMemberColor,_=n.numericScale,W=n.queryLegend,V=n.selectionColor,Y=n.setName,X=n.setNameAxisOffset,K=n.styles,ee=n.textColor,te=n.emptySelection,ne=U.axisTick,ae=U.barLabel,re=U.chartLabel,ie=U.legend,se=U.setLabel,le=Object(a.useMemo)((function(){return S()}),[H,ne,ae,re,ie,se,ee,J,B,V,G,L]),oe=Object(a.useMemo)((function(){return function(e,t,n,a,r,i,s,l,o,c,m){return{theme:e,styles:t,classNames:n,cs:{name:a,offset:r},sets:{name:i,offset:s},emptySelection:m,id:l,barLabelOffset:o,selectionColor:c}}(y,K,P,D,R,Y,X,le,T,V,te)}),[y,K,P,T,D,R,Y,X,le,V,te]),ce=Object(a.useMemo)((function(){return function(e,t,n,a,r,i,s,l){var o=s.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),c=s.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),m=l.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),u=l.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),d=t-2*n-20-u-m,h=e-2*n-o-c,p=h*r[0],f=h*r[1],b=d*i[0];return{id:S(),cs:{before:m,after:u,x:o+p+f,y:m,w:h-p-f,h:b,addons:l},labels:{x:o+p,y:m+b,w:f,h:d-b},sets:{before:o,after:c,x:o,y:m+b,w:p,h:d-b,addons:s},padding:a,legend:{x:e/2},margin:n,w:e,h:t}}(l,o,c,m,O,w,k,z)}),[l,o,c,m,O,w,k,z]),me=Object(a.useMemo)((function(){var e;return N(u,d,ce,_,q,T+Number.parseInt(null!==(e=U.barLabel)&&void 0!==e?e:"10"),v,m)}),[u,d,ce,_,q,T,U.barLabel,v,m]),ue="\n  .root-"+le+" {\n    "+(H?"font-family: "+H+";":"")+"\n  }\n  .axisTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ne?"font-size: "+ne+";":"")+"\n    text-anchor: middle;\n  }\n  .barTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ae?"font-size: "+ae+";":"")+"\n  }\n  .cBarTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ae?"font-size: "+ae+";":"")+"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ae?"font-size: "+ae+";":"")+"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-"+le+" {\n    "+(ae?"font-size: "+ae+";":"")+"\n    fill: "+J+";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(se?"font-size: "+se+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(re?"font-size: "+re+";":"")+"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(re?"font-size: "+re+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n  .exportTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ae?"font-size: "+ae+";":"")+"\n  }\n  .legendTextStyle-"+le+" {\n    fill: "+ee+";\n    "+(ie?"font-size: "+ie+";":"")+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  .startText-"+le+" {\n    text-anchor: start;\n  }\n  .endText-"+le+" {\n    text-anchor: end;\n  }\n  .pnone-"+le+" {\n    pointer-events: none;\n  }\n  .fillPrimary-"+le+" { fill: "+B+"; }\n  .fillSelection-"+le+" { fill: "+V+"; }\n  .fillNotMember-"+le+" { fill: "+G+"; }\n  .fillAlternating-"+le+" { fill: "+(L||"transparent")+"; }\n  .fillTransparent-"+le+" { fill: transparent; }\n\n  .selectionHint-"+le+" {\n    fill: transparent;\n    pointer-events: none;\n    stroke: "+V+";\n  }\n\n  .axisLine-"+le+" {\n    fill: none;\n    stroke: "+ee+";\n  }\n  .clickAble-"+le+" {\n    cursor: pointer;\n  }\n\n  .hoverBar-"+le+" {\n    fill: transparent;\n  }\n\n  .interactive-"+le+":hover > .hoverBar-"+le+" {\n    stroke: "+J+";\n  }\n  .interactive-"+le+":hover > .hoverBarTextStyle-"+le+" {\n    display: unset;\n  }\n\n  .exportButtons-"+le+" {\n    text-anchor: middle;\n  }\n  .exportButton-"+le+" {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-"+le+":hover {\n    opacity: 1;\n  }\n  .exportButton-"+le+" > rect {\n    fill: none;\n    stroke: "+ee+";\n  }\n\n  .upsetLine-"+me.id+" {\n    stroke-width: "+.6*me.r+";\n    stroke: "+B+";\n  }\n\n  .upsetSelectionLine-"+me.id+" {\n    stroke-width: "+.6*me.r*1.1+";\n    stroke: "+V+";\n    pointer-events: none;\n  }\n  "+C.map((function(e,t){return".fillQ"+t+"-"+me.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ";return r.a.createElement("svg",{className:E("root-"+le,i),style:s,width:l,height:o,ref:t,"data-theme":null!=y?y:"light"},r.a.createElement("style",null,ue),r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clip-"+ce.id},r.a.createElement("rect",{x:ce.sets.w,y:0,width:ce.labels.w,height:ce.sets.h}))),W&&r.a.createElement(A,{queries:C,size:ce,style:oe,data:me}),F&&r.a.createElement(M,{transform:"translate("+(ce.w-2)+","+(ce.h-3)+")",styleId:le}),r.a.createElement("g",{transform:"translate("+c+","+c+")"},f&&r.a.createElement("rect",{width:ce.cs.x,height:ce.sets.y,onClick:function(){return f(null)},className:"fillTransparent-"+le}),r.a.createElement(I,{size:ce,style:oe,data:me}),r.a.createElement($,{size:ce,style:oe,data:me,onClick:f,onHover:b,childrens:x}),r.a.createElement(Z,{size:ce,style:oe,data:me,onHover:b,selection:p}),r.a.createElement(Q,{size:ce,style:oe,data:me,onHover:b,queries:C,secondary:null!=b||null!=p})),e.children)}));t.default=X},20:function(e,t,n){"use strict";function a(e){return new Promise((t,n)=>{const a=new FileReader;a.addEventListener("load",()=>{const e=JSON.parse(a.result);t(e)}),a.addEventListener("error",()=>{n(a.error)}),a.readAsText(e)})}function r(e,t){const n=e.elements,a=e=>n[e],r=e.sets.map(e=>(e.elems=e.elems.map(a),e)),i=t(r,Object.assign({elems:n},e.combinations));function s(e){return"set"===e.type?r[e.index]:i[e.index]}const l=e.selection?s(e.selection):null,o=e.queries.map(e=>Object.assign(e,{set:s(e.set)}));return Object.assign({sets:r,combinations:i,selection:l,queries:o},e.props)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},216:function(e){e.exports=JSON.parse('[{"name":"Lisa","sets":["School"]},{"name":"Bart","sets":["School","Male"]},{"name":"Homer","sets":["Duff Fan","Male"]},{"name":"Marge","sets":["Blue Hair"]},{"name":"Maggie","sets":[]},{"name":"Barney","sets":["Duff Fan","Male"]},{"name":"Mr. Burns","sets":["Evil","Male"]},{"name":"Mo","sets":["Duff Fan","Male"]},{"name":"Ned","sets":["Male"]},{"name":"Milhouse","sets":["School","Blue Hair","Male"]},{"name":"Grampa","sets":["Male"]},{"name":"Krusty","sets":["Duff Fan","Evil","Male"]},{"name":"Smithers","sets":["Evil","Male"]},{"name":"Ralph","sets":["School","Male"]},{"name":"Sideshow Bob","sets":["Evil","Male"]},{"name":"Kent Brockman","sets":["Male"]},{"name":"Fat Tony","sets":["Evil","Male"]},{"name":"Jacqueline Bouvier ","sets":["Blue Hair"]},{"name":"Patty Bouvier","sets":[]},{"name":"Selma Bouvier","sets":[]},{"name":"Lenny Leonard","sets":["Duff Fan","Male"]},{"name":"Carl Carlson","sets":["Duff Fan","Male"]},{"name":"Nelson","sets":["School","Evil","Male"]},{"name":"Martin Prince","sets":["School","Male"]}]')}}]);