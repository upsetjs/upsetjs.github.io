(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{108:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(88),o=a(93),r=a(94);const l=Promise.resolve(new r.a);t.default=function(){return n.a.createElement(s.a,{api:l},n.a.createElement(o.a,null))}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var i=a(86),n=a(0),s=a.n(n),o=a(27),r=a(2),l=a(90),c=a(89);class d extends l.a{constructor(){super(...arguments),this._dataTable=null,this._dataTablePromise=new Promise(()=>null),this.combinationsOptions={type:"intersection",min:1,max:5,empty:!1,limit:100,order:["cardinality","name"]},this.hover=null,this.selection=null,this.attributeFields=[],this.state="init",this.isViewMode=!1}init(e){super.init(e),this.attributeFields=e.attributeFields,this.isViewMode=e.isViewingMode,this.regenerate()}handleUpdates(e){super.handleUpdates(e),e.has("attributeFields")&&(this.attributeFields=this.api.attributeFields),(e.has("dataSource")||e.has("nameField")||e.has("setFields")||e.has("attributeFields"))&&this.regenerate()}regenerate(){const e=this.api;if(this._dataTable=null,!e.dataSource||!e.nameField||0===e.setFields.length)return this.state="config",void(this._dataTablePromise=Promise.resolve(null));this.state="loading",this._dataTablePromise=e.getUnderlyingData(e.dataSource,[e.nameField,...e.setFields,...e.attributeFields].filter(Boolean)),this._dataTablePromise.then(e=>this.setDataTable(e))}get elems(){const e=this.dataTable;if(!e)return[];const t=e.columns.find(e=>e.fieldName===this.api.nameField);if(!t)return[];const a=this.api.attributeFields.map(t=>e.columns.find(e=>e.fieldName===t)).filter(e=>null!=e),i=t.index;return e.data.map(e=>{const t=e[i].formattedValue,n={};return a.forEach(t=>{n[t.fieldName]=e[t.index].value}),{name:t,attrs:n}})}get sets(){const e=this.dataTable;if(!e)return[];const t=this.api.setFields.map(t=>e.columns.find(e=>e.fieldName===t)).filter(e=>null!=e);if(0===t.length)return[];const a=this.elems;return t.map(t=>Object(c.a)({name:t.fieldName,elems:a.filter((a,i)=>function(e){if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;const t=String(e).toLowerCase();return"1"===t||"true"===t||"t"===t||"yes"===t}(e.data[i][t.index].value))}))}get combinations(){return Object(c.c)(this.sets,Object.assign({elems:this.elems},this.combinationsOptions))}setDataTable(e){this.state=e?"ready":"error",this._dataTable=e}setHover(e){this.hover=e}setSelection(e){this.selection=e}get dataTable(){if(this._dataTable)return this._dataTable;throw this._dataTablePromise}}Object(i.b)([r.f.ref],d.prototype,"_dataTable",void 0),Object(i.b)([r.f.ref],d.prototype,"_dataTablePromise",void 0),Object(i.b)([r.f],d.prototype,"combinationsOptions",void 0),Object(i.b)([r.f.ref],d.prototype,"hover",void 0),Object(i.b)([r.f.ref],d.prototype,"selection",void 0),Object(i.b)([r.f],d.prototype,"attributeFields",void 0),Object(i.b)([r.f],d.prototype,"state",void 0),Object(i.b)([r.f],d.prototype,"isViewMode",void 0),Object(i.b)([r.c],d.prototype,"elems",null),Object(i.b)([r.c],d.prototype,"sets",null),Object(i.b)([r.c],d.prototype,"combinations",null),Object(i.b)([r.b],d.prototype,"setDataTable",null),Object(i.b)([r.b.bound],d.prototype,"setHover",null),Object(i.b)([r.b.bound],d.prototype,"setSelection",null);const u=s.a.createContext(null),b=({api:e,children:t})=>{const a=Object(o.c)(()=>new d(e));return s.a.createElement(u.Provider,{value:a}," ",t," ")},h=()=>{const e=s.a.useContext(u);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e}},93:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(13),o=a(28),r=a(27),l=a(88),c=a(96),d=a(97);const u=Object(s.c)({root:{flexGrow:1,overflow:"hidden"},upset:{position:"absolute"}}),b={chartLabel:"13px",setLabel:"13px"},h=Object(r.a)(({width:e,height:t})=>{const a=Object(l.b)();return n.a.createElement(c.a,{sets:a.sets,combinations:a.combinations,width:e,height:t,fontSizes:b,className:u.upset,color:a.hover?"rgba(78, 121, 167, 0.5)":"#4e79a7",textColor:"#444343",alternatingBackgroundColor:"rgba(0, 0, 0, 0.05)",selectionColor:"#4e79a7",fontFamily:!1,selection:a.hover,onHover:a.setHover,onClick:a.setSelection})});function m({width:e,height:t}){return e>0&&t>0?n.a.createElement(i.Suspense,{fallback:"loading"},n.a.createElement(h,{width:e,height:t})):n.a.createElement("svg",{className:u.upset})}var p=Object(r.a)(()=>n.a.createElement("div",{className:u.root},n.a.createElement(d.a,{handleHeight:!0,handleWidth:!0,render:m})));const f=Object(s.c)({root:{flexGrow:1,position:"relative",display:"flex",flexDirection:"column",justifyContent:"center"},click:{alignSelf:"center"}});t.a=Object(r.a)(()=>{const e=Object(l.b)(),t=Object(i.useCallback)(()=>e.api.openDialog(),[e]);return n.a.createElement("div",{className:f.root},"loading"===e.state||"ready"===e.state&&n.a.createElement(p,null),"config"===e.state&&n.a.createElement(o.Button,{className:f.click,onClick:t,kind:e.ui.button},"Configure"),"init"===e.state&&n.a.createElement(o.Spinner,{className:f.click,color:e.ui.theme}))})}}]);