(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{86:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}));function i(e,t,a,i){var n,s=arguments.length,l=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(s<3?n(l):s>3?n(t,a,l):n(t,a))||l);return s>3&&l&&Object.defineProperty(t,a,l),l}function n(e,t,a,i){return new(a||(a=Promise))((function(n,s){function l(e){try{o(i.next(e))}catch(e){s(e)}}function r(e){try{o(i.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,r)}o((i=i.apply(e,t||[])).next())}))}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var i=a(86),n=a(0),s=a.n(n),l=a(27),r=a(2),o=a(90);class d extends o.a{constructor(){super(...arguments),this.selectedTabIndex=0,this._dataSources=null,this.draggedField=null,this.draggedPosition={x:0,y:0},this.draggedFieldRef=Object(n.createRef)(),this.worksheets=[],this._dataSourcesPromise=new Promise(()=>null),this.dataSource="",this.worksheet="",this.nameField="",this.setFields=[],this.attributeFields=[],this.state="init"}init(e){super.init(e),this.state="loading",this.nameField=e.nameField,this.setFields=e.setFields,this.attributeFields=e.attributeFields,this.worksheet=e.worksheet,this.dataSource=e.dataSource,this.worksheets=e.getWorksheets(),this._dataSourcesPromise=e.getDataSources(e.worksheet),this._dataSourcesPromise.then(e=>this.setDataSources(e))}setDataSources(e){this.state="ready",this._dataSources=e,this.dataSource||1!==e.length||(this.dataSource=e[0].id,this.api.dataSource=e[0].id)}setDraggedField(e,t={x:0,y:0}){this.draggedField=e,this.draggedPosition=t}get dataSources(){if(this._dataSources)return this._dataSources;throw this._dataSourcesPromise}get fields(){if(!this._dataSources)return[];const e=this._dataSources.find(e=>this.dataSource===e.id);return e?e.fields.filter(e=>!e.isHidden&&!e.isGenerated):[]}handleUpdates(e){super.handleUpdates(e),e.has("dataSource")&&(this.dataSource=this.api.dataSource),e.has("nameField")&&(this.nameField=this.api.nameField),e.has("setFields")&&(this.setFields=this.api.setFields),e.has("attributeFields")&&(this.attributeFields=this.api.attributeFields)}changeWorksheet(e){this.worksheet=e,this.api.worksheet=e,this.changeDataSource(""),this._dataSourcesPromise=this.api.getDataSources(e),this._dataSourcesPromise.then(e=>this.setDataSources(e))}changeDataSource(e){this.dataSource=e,this.nameField="",this.setFields=[],this.attributeFields=[],this.api.dataSource=this.dataSource,this.api.nameField=this.nameField,this.api.setFields=this.setFields,this.api.attributeFields=this.attributeFields}setSelectedTabIndex(e){this.selectedTabIndex=e}get measures(){return this.fields.filter(e=>"measure"===e.role)}get dimensions(){return this.fields.filter(e=>"dimension"===e.role)}get valid(){return""!==this.nameField&&this.setFields.length>0}setNameField(e){this.nameField=e,this.api.nameField=e}toggleSetField(e,t){const a=this.setFields.includes(e);a!==t&&(a?this.setFields.splice(this.setFields.indexOf(e),1):this.setFields.push(e),this.api.setFields=this.setFields)}toggleAttributeField(e,t){const a=this.attributeFields.includes(e);a!==t&&(a?this.attributeFields.splice(this.attributeFields.indexOf(e),1):this.attributeFields.push(e),this.api.attributeFields=this.attributeFields)}changeProps(e){const t=Object.assign({},this.props,e);this.api.props=t,this.props=t}changeCombinationsOptions(e){const t=Object.assign({},this.combinationsOptions,e);this.api.combinationsOptions=t,this.combinationsOptions=t}}Object(i.b)([r.f],d.prototype,"selectedTabIndex",void 0),Object(i.b)([r.f.shallow],d.prototype,"_dataSources",void 0),Object(i.b)([r.f.ref],d.prototype,"draggedField",void 0),Object(i.b)([r.f],d.prototype,"draggedPosition",void 0),Object(i.b)([r.f.shallow],d.prototype,"worksheets",void 0),Object(i.b)([r.f.ref],d.prototype,"_dataSourcesPromise",void 0),Object(i.b)([r.f.ref],d.prototype,"dataSource",void 0),Object(i.b)([r.f.ref],d.prototype,"worksheet",void 0),Object(i.b)([r.f],d.prototype,"nameField",void 0),Object(i.b)([r.f],d.prototype,"setFields",void 0),Object(i.b)([r.f],d.prototype,"attributeFields",void 0),Object(i.b)([r.f],d.prototype,"state",void 0),Object(i.b)([r.b],d.prototype,"setDataSources",null),Object(i.b)([r.b],d.prototype,"setDraggedField",null),Object(i.b)([r.c],d.prototype,"fields",null),Object(i.b)([r.b],d.prototype,"changeWorksheet",null),Object(i.b)([r.b],d.prototype,"changeDataSource",null),Object(i.b)([r.b.bound],d.prototype,"setSelectedTabIndex",null),Object(i.b)([r.c],d.prototype,"measures",null),Object(i.b)([r.c],d.prototype,"dimensions",null),Object(i.b)([r.c],d.prototype,"valid",null),Object(i.b)([r.b],d.prototype,"setNameField",null),Object(i.b)([r.b],d.prototype,"toggleSetField",null),Object(i.b)([r.b],d.prototype,"toggleAttributeField",null),Object(i.b)([r.b],d.prototype,"changeProps",null),Object(i.b)([r.b],d.prototype,"changeCombinationsOptions",null);const c=s.a.createContext(null),u=({api:e,children:t})=>{const a=Object(l.c)(()=>new d(e));return s.a.createElement(c.Provider,{value:a}," ",t," ")},m=()=>{const e=s.a.useContext(c);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e}},97:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(27),l=a(14),r=a(28),o=a(88),d=a(13);const c=Object(l.b)({flex:"1 1 0",minHeight:"2.5em",overflow:"auto",border:"1px solid #E6E6E6",borderRadius:"5px",position:"relative",$nest:{"& > div":{position:"absolute",width:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"start",padding:"0.5em"}}}),u=Object(l.c)({root:{display:"flex",position:"relative",overflow:"hidden",$nest:{[`&[data-type=measure] .${c}[data-type=measure], &[data-type=dimension] .${c}[data-type=dimension]`]:{borderColor:d.c.action},[`&[data-type=measure] .${c}[data-type=measure]:hover, &[data-type=dimension] .${c}[data-type=dimension]:hover`]:{background:"#F5F5F5"},[`&[data-theme=dark][data-type=measure] .${c}[data-type=measure]:hover, &[data-type=dimension] .${c}[data-type=dimension]:hover`]:{background:"#F5F5F5"},"&[data-type]":{cursor:"grabbing !important"}}},header:{margin:"0.5em 0"},side:{flex:"1 1 0",display:"flex",flexDirection:"column",marginRight:"0.5em"},target:{flex:"1 1 0",display:"flex",flexDirection:"column",marginLeft:"0.5em"},error:{borderColor:d.c.attention},pill:{cursor:"grab",width:"15em",textOverflow:"ellipsis",margin:"2px"},dragged:{pointerEvents:"none",position:"absolute",left:0,top:0},grabbing:{cursor:"grabbing"},elems:{flexGrow:1},sets:{flexGrow:8},attributes:{flexGrow:3}}),m=Object(s.a)(({field:e,schema:t})=>{const a=Object(o.b)(),s=Object(i.useCallback)(t=>{if(0!==t.button)return;const i=t.currentTarget,n=i.closest("."+u.root);n.dataset.type=i.dataset.type;const s=n.getBoundingClientRect();a.setDraggedField(e,{x:t.clientX-s.x,y:t.clientY-s.y})},[a,e]);return n.a.createElement(r.Pill,{kind:"dimension"===e.role?"discrete":"continuous",schema:t,"data-id":e.id,"data-type":e.role,className:u.pill,onMouseDown:s},e.name)}),b=Object(s.a)(()=>{const e=Object(o.b)(),t=e.draggedField;return t?n.a.createElement(r.Pill,{style:{transform:`translate(${e.draggedPosition.x}px,${e.draggedPosition.y}px)`},ref:e.draggedFieldRef,kind:"dimension"===t.role?"discrete":"continuous","data-id":t.id,"data-type":t.role,className:Object(l.a)(u.pill,u.dragged)},t.name):null});var p=Object(s.a)(()=>{var e;const t=Object(o.b)(),a=Object(i.useCallback)(e=>t.changeDataSource(e.target.value),[t]),s=Object(i.useCallback)(e=>t.changeWorksheet(e.target.value),[t]),d=Object(i.useCallback)(e=>{delete e.currentTarget.dataset.type,t.setDraggedField(null)},[t]),p=Object(i.useCallback)(()=>{if(!t.draggedField)return;const e=t.draggedField.id;t.toggleSetField(e,!1),t.nameField===e&&t.setNameField("")},[t]),h=Object(i.useCallback)(()=>{if(!t.draggedField)return;const e=t.draggedField.id;t.toggleAttributeField(e,!1)},[t]),g=Object(i.useCallback)(()=>{if(!t.draggedField)return;const e=t.draggedField.id;t.setNameField(e)},[t]),f=Object(i.useCallback)(()=>{if(!t.draggedField)return;const e=t.draggedField.id;t.toggleSetField(e,!0)},[t]),y=Object(i.useCallback)(()=>{if(!t.draggedField)return;const e=t.draggedField.id;t.toggleAttributeField(e,!0)},[t]),v=Object(i.useCallback)(e=>{if(!t.draggedFieldRef.current)return;const a=e.currentTarget.getBoundingClientRect(),i=e.clientX-a.x,n=e.clientY-a.y;t.draggedFieldRef.current.style.transform=`translate(${i}px, ${n}px)`},[t]);return n.a.createElement("div",{className:u.root,"data-theme":t.ui.theme,onMouseMove:v,onMouseUp:d,onMouseLeave:d},n.a.createElement("div",{className:u.side},n.a.createElement("h4",{className:u.header},"Associated Worksheet"),n.a.createElement("div",{className:u.root},t.worksheets.map(e=>n.a.createElement(r.Radio,{key:e.name,value:e.name,onChange:s,checked:e.name===t.worksheet},e.name))),t.worksheet&&t.dataSources&&t.dataSources.length>1&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{className:u.header},"Data Sources"),n.a.createElement("div",{className:u.root},(null!==(e=t.dataSources)&&void 0!==e?e:[]).map(e=>n.a.createElement(r.Radio,{key:e.id,value:e.id,onChange:a,checked:e.id===t.dataSource},e.name)))),n.a.createElement("h5",{className:u.header},"Dimensions"),n.a.createElement("div",{className:Object(l.a)(c,u.sets),"data-type":"dimension",onMouseUp:p},n.a.createElement("div",null,t.dimensions.filter(e=>t.nameField!==e.id&&!t.setFields.includes(e.id)).map(e=>n.a.createElement(m,{key:e.id,field:e,schema:!0})))),n.a.createElement("h5",{className:u.header},"Measures"),n.a.createElement("div",{className:Object(l.a)(c,u.attributes),"data-type":"measure",onMouseUp:h},n.a.createElement("div",null,t.measures.filter(e=>!t.attributeFields.includes(e.id)).map(e=>n.a.createElement(m,{key:e.id,field:e,schema:!0}))))),n.a.createElement("div",{className:u.target},n.a.createElement("h4",{className:u.header},"Mapped Data"),n.a.createElement("h5",{className:u.header},"Elements (exactly 1)"),n.a.createElement("div",{className:Object(l.a)(c,u.elems,!t.nameField&&u.error),"data-type":"dimension",onMouseUp:g},n.a.createElement("div",null,t.dimensions.filter(e=>t.nameField===e.id).map(e=>n.a.createElement(m,{key:e.id,field:e})))),n.a.createElement("h5",{className:u.header},"Sets (one or more)"),n.a.createElement("div",{className:Object(l.a)(c,u.sets,0===t.setFields.length&&u.error),"data-type":"dimension",onMouseUp:f},n.a.createElement("div",null,t.dimensions.filter(e=>t.setFields.includes(e.id)).map(e=>n.a.createElement(m,{key:e.id,field:e})))),n.a.createElement("h5",{className:u.header},"Attributes"),n.a.createElement("div",{className:Object(l.a)(c,u.attributes),"data-type":"measure",onMouseUp:y},n.a.createElement("div",null,t.measures.filter(e=>t.attributeFields.includes(e.id)).map(e=>n.a.createElement(m,{key:e.id,field:e}))))),n.a.createElement(b,null))});const h=Object(l.c)({root:{display:"flex",flexDirection:"column",alignItems:"start",$nest:{"& > div":{flexDirection:"row",marginBottom:"0.2em"},"& > div > label":{width:"15em"}}}});var g=Object(s.a)(()=>{var e,t,a,s,l;const c=Object(o.b)(),u=c.combinationsOptions,m=Array.isArray(u.order)?u.order.join(","):null!==(e=u.order)&&void 0!==e?e:d.e.order.join(",");return n.a.createElement("div",{className:h.root},n.a.createElement(r.DropdownSelect,{label:"Ordering",required:!0,value:m,onChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({order:e.target.value.split(",")}),[c])},n.a.createElement("option",{value:"name"},"1. Name"),n.a.createElement("option",{value:"cardinality,name"},"1. Cardinality 2. Name"),n.a.createElement("option",{value:"cardinality,degree,name"},"1. Cardinality 2. Degree 3. Name"),n.a.createElement("option",{value:"degree,name"},"1. Degree 2. Name"),n.a.createElement("option",{value:"degree,cardinality,name"},"1. Degree 2. Cardinality 3. Name"),n.a.createElement("option",{value:"group,name"},"1. Set Group 2. Name"),n.a.createElement("option",{value:"group,cardinality,name"},"1. Set Group 2. Cardinality 3. Name"),n.a.createElement("option",{value:"group,degree,name"},"1. Set Group 2. Degree 3. Name"),n.a.createElement("option",{value:"group,degree,cardinality,name"},"1. Set Group 2. Degree 3. Cardinality 4. Name")),n.a.createElement(r.DropdownSelect,{label:"Mode",value:null!==(t=u.type)&&void 0!==t?t:d.e.type,onChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({type:"intersection"===String(e.target.value)?"intersection":"union"}),[c])},n.a.createElement("option",{value:"intersection"},"Set Intersections"),n.a.createElement("option",{value:"union"},"Set Unions")),n.a.createElement(r.Stepper,{label:"Minimum Set Members",name:"min",step:1,min:0,required:!0,pageSteps:1,value:null!==(a=u.min)&&void 0!==a?a:d.e.min,onValueChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({min:e}),[c])}),n.a.createElement(r.Stepper,{label:"Maximum Set Members",name:"max",step:1,min:0,required:!0,pageSteps:1,value:null!==(s=u.max)&&void 0!==s?s:d.e.max,onValueChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({max:e}),[c])}),n.a.createElement(r.Stepper,{label:"Max # Combinations",name:"limit",step:1,min:0,required:!0,pageSteps:10,value:null!==(l=u.limit)&&void 0!==l?l:d.e.limit,onValueChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({limit:e}),[c])}),n.a.createElement(r.Checkbox,{checked:u.empty,onChange:Object(i.useCallback)(e=>c.changeCombinationsOptions({empty:e.target.checked}),[c])},"Include Empty Combinations"))});const f=Object(l.c)({root:{display:"flex",flexDirection:"column",alignItems:"start",$nest:{"& > div":{flexDirection:"row",marginBottom:"0.2em"},"& > div > :first-child":{width:"15em",color:"#4f4f4f",fontSize:"12px"}}},line:{display:"flex"},color:{display:"flex",flexDirection:"column"}});var y=Object(s.a)(()=>{var e,t;const a=Object(o.b)(),s=Object(i.useCallback)(e=>a.changeProps({[e.target.name]:e.target.value}),[a]);return n.a.createElement("div",{className:f.root},n.a.createElement("div",{className:f.line},n.a.createElement("label",null,"Color"),n.a.createElement("div",{className:f.color},d.a.map(e=>n.a.createElement(r.Radio,{key:e,name:"color",value:e,onChange:s,checked:e===a.props.color},n.a.createElement("span",{style:{color:e}},"◼ ",e))))),n.a.createElement(r.TextField,{label:"Set Axis Label",name:"setName",value:null!==(e=a.props.setName)&&void 0!==e?e:d.f.setName,onChange:s}),n.a.createElement(r.TextField,{label:"Combination Axis Label",name:"combinationName",value:null!==(t=a.props.combinationName)&&void 0!==t?t:d.f.combinationName,onChange:s}))});const v=Object(l.c)({root:{flexGrow:1,display:"flex",flexDirection:"column"},grow:{flexGrow:1},buttonBar:{display:"flex",justifyContent:"center",$nest:{"& > *":{marginRight:"1em",cursor:"pointer"}}},tabs:{flex:"1 1 0",display:"flex",flexDirection:"column",$nest:{"& > [role=tablist] button":{cursor:"pointer"},"& > [role=tabpanel]":{flex:"1 1 0",display:"flex"},"& > [role=tabpanel] > *":{flex:"1 1 0"}}}}),F=Object(s.a)(()=>{const e=Object(o.b)();return n.a.createElement(n.a.Fragment,null,"init"===e.state||"loading"===e.state&&n.a.createElement(r.Spinner,{color:e.ui.theme}),"ready"===e.state&&n.a.createElement(i.Suspense,{fallback:n.a.createElement(r.Spinner,{color:e.ui.theme})},0===e.selectedTabIndex&&n.a.createElement(p,null),1===e.selectedTabIndex&&n.a.createElement(g,null),2===e.selectedTabIndex&&n.a.createElement(y,null)))});t.a=Object(s.a)(()=>{const e=Object(o.b)(),t=Object(i.useCallback)(()=>e.api.save(),[e]),a=Object(i.useCallback)(()=>e.api.closeDialog(!1),[e]),s=Object(i.useCallback)(()=>e.api.closeDialog(),[e]);return n.a.createElement("div",{className:v.root},n.a.createElement(r.Tabs,{className:v.tabs,selectedTabIndex:e.selectedTabIndex,onTabChange:e.setSelectedTabIndex,activation:"automatic",alignment:"justified",tabs:[{title:"Data",content:"Data"},{title:"Set Combinations",content:"Set Combinations"},{title:"Style",content:"Style"}]},n.a.createElement(F,null)),n.a.createElement("div",{className:v.buttonBar},n.a.createElement(r.Button,{onClick:t,kind:"primary",disabled:!e.valid},"Save Changes"),n.a.createElement(r.Button,{onClick:s,kind:e.ui.button,disabled:!e.valid},"Save Changes and Close"),n.a.createElement(r.Button,{onClick:a,kind:e.ui.button},"Cancel")))})}}]);